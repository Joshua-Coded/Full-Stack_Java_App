define((()=>(()=>{var e={742:()=>{extensionRegistry.registerComponent("DocumentsHeaderLeft","documents-header-left",{id:"add-new-file",vueComponent:Vue.options.components["documents-add-new-file"],rank:20}),extensionRegistry.registerComponent("DocumentsHeaderRight","documents-header-right",{id:"filter-input",vueComponent:Vue.options.components["documents-filter-input"],rank:20}),extensionRegistry.registerComponent("DocumentsHeaderRight","documents-header-right",{id:"primary-filter",cssClass:"pt-1",vueComponent:Vue.options.components["documents-filter"],rank:20}),extensionRegistry.registerExtension("Documents","views",{id:"timeline",labelKey:"documents.label.timelineView",listingType:"TIMELINE",filePropertiesExpand:"creator,modifier,owner,metadatas",componentOptions:{vueComponent:Vue.options.components["documents-timeline-view"]},rank:20}),extensionRegistry.registerExtension("Documents","timelineViewHeader",{id:"name",labelKey:"documents.label.name",align:"left",sortable:!0,cssClass:"font-weight-bold tooltip-marker",width:"auto",rank:20,componentOptions:{vueComponent:Vue.options.components["documents-file-name-cell"]}}),extensionRegistry.registerExtension("Documents","timelineViewHeader",{id:"lastUpdated",labelKey:"documents.label.lastUpdated",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap tooltip-marker",width:"190px",rank:40,componentOptions:{vueComponent:Vue.options.components["documents-last-updated-cell"]}}),extensionRegistry.registerExtension("Documents","timelineViewHeader",{id:"visibility",labelKey:"documents.label.extension.visibility",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap tooltip-marker",width:"190px",rank:60,componentOptions:{vueComponent:Vue.options.components["documents-visibility-cell"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"favorite",labelKey:"documents.label.favorite",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:40,enabled:(e,t)=>e&&!e.folder&&!e.cloudDriveFolder&&t,componentOptions:{vueComponent:Vue.options.components["favorite-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"copyLink",labelKey:"documents.label.copy.link",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:1,enabled:()=>!0,componentOptions:{vueComponent:Vue.options.components["copy-link-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"edit",labelKey:"documents.label.edit",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:2,enabled:(e,t)=>e&&!e.cloudDriveFolder&&e.acl.canEdit&&!t,componentOptions:{vueComponent:Vue.options.components["edit-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"rename",labelKey:"documents.label.rename",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:3,enabled:e=>e&&!e.cloudDriveFolder&&e.acl.canEdit,componentOptions:{vueComponent:Vue.options.components["rename-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"move",labelKey:"documents.label.move",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:4,enabled:e=>e&&!e.cloudDriveFolder&&e.acl.canEdit,componentOptions:{vueComponent:Vue.options.components["move-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"duplicate",labelKey:"documents.label.duplicate",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:5,enabled:e=>e&&!e.cloudDriveFolder&&e.acl.canEdit,componentOptions:{vueComponent:Vue.options.components["duplicate-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"shortcut",labelKey:"documents.label.shortcut",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:6,enabled:e=>e&&!e.cloudDriveFolder&&e.acl.canEdit&&!e.sourceID,componentOptions:{vueComponent:Vue.options.components["shortcut-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"visibility",labelKey:"documents.label.visibility",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:7,enabled:e=>!Vue.prototype.$shareDocumentSuspended&&e&&!e.cloudDriveFolder&&e.acl.canEdit&&!e.sourceID&&!e.path.includes("News Attachments"),componentOptions:{vueComponent:Vue.options.components["visibility-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"versionHistory",labelKey:"documents.label.showVersionHistory",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:8,enabled:e=>e&&!e.cloudDriveFolder&&e.versionable,componentOptions:{vueComponent:Vue.options.components["versionHistory-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"download",labelKey:"documents.label.download",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:9,enabled:e=>!Vue.prototype.$downloadDocumentSuspended&&e&&!e.cloudDriveFolder&&!e.folder&&(e.acl.canEdit||e.sourceID),componentOptions:{vueComponent:Vue.options.components["download-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"details",labelKey:"documents.label.details",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:40,enabled:(e,t)=>e&&!e.cloudDriveFolder&&!e.folder&&t,componentOptions:{vueComponent:Vue.options.components["details-menu-action"]}}),extensionRegistry.registerExtension("DocumentMenu","menuActionMenu",{id:"delete",labelKey:"documents.label.delete",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:10,enabled:e=>e&&!e.cloudDriveFolder&&e.acl.canEdit,componentOptions:{vueComponent:Vue.options.components["delete-menu-action"]}}),extensionRegistry.registerExtension("Documents","timelineViewHeader",{id:"favorite",labelKey:"documents.label.favorite",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap tooltip-marker",width:"120px",rank:60,componentOptions:{vueComponent:Vue.options.components["documents-favorite-cell"]}}),extensionRegistry.registerExtension("Documents","views",{id:"folder",labelKey:"documents.label.folderView",listingType:"FOLDER",filePropertiesExpand:"creator,modifier,owner,metadatas",componentOptions:{vueComponent:Vue.options.components["documents-folder-view"]},rank:30}),extensionRegistry.registerExtension("DocumentTabs","documentsHeaderTab",{id:"recentView",viewName:"timeline",icon:"fas fa-history",labelKey:"documents.label.timelineView",rank:10}),extensionRegistry.registerExtension("DocumentTabs","documentsHeaderTab",{id:"folderView",viewName:"folder",icon:"fas fa-folder",labelKey:"documents.label.folderView",rank:20}),extensionRegistry.registerExtension("DocumentMobileFilterMenu","menuMobileFilterMenu",{id:"extendSearchToContent",labelKey:"documents.label.extendSearchToContent",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:40,menuType:"searchType",componentOptions:{vueComponent:Vue.options.components["extend-filter-action"]}}),extensionRegistry.registerExtension("DocumentMobileFilterMenu","menuMobileFilterMenu",{id:"quickFilter",labelKey:"documents.label.quickFilter",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:40,menuType:"searchType",componentOptions:{vueComponent:Vue.options.components["quick-filter-action"]}}),extensionRegistry.registerExtension("DocumentMobileFilterMenu","menuMobileFilterMenu",{id:"all",labelKey:"documents.label.all",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:40,menuType:"filterOptions",componentOptions:{vueComponent:Vue.options.components["all-filter-action"]}}),extensionRegistry.registerExtension("DocumentMobileFilterMenu","menuMobileFilterMenu",{id:"favorites",labelKey:"documents.label.favorites",align:"center",sortable:!0,cssClass:"font-weight-bold text-no-wrap",width:"190px",rank:40,menuType:"filterOptions",componentOptions:{vueComponent:Vue.options.components["favorite-filter-action"]}})}},t={};function i(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s](n,n.exports,i),n.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";i.r(s),i.d(s,{init:()=>zi,initSwitchApp:()=>Ui});var e={};i.r(e),i.d(e,{canAddDocument:()=>wi,createFolder:()=>Si,createShortcut:()=>ki,deleteDocument:()=>Fi,duplicateDocument:()=>_i,getBreadCrumbs:()=>gi,getDocumentItems:()=>yi,getFileVersions:()=>Ai,getFullTreeData:()=>xi,getNewName:()=>Mi,moveDocument:()=>Di,renameDocument:()=>Ci,restoreVersion:()=>Ni,saveVisibility:()=>$i,undoDeleteDocument:()=>Ei,updateDescription:()=>Ii,updateVersionSummary:()=>Ti});var t={};i.r(t),i.d(t,{injectSortTooltip:()=>Vi});var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",{staticClass:"documents-application border-box-sizing",class:e.isMobile?"mobile":"",attrs:{role:"main",flat:""}},[i("div",{on:{mouseover:e.hideOverlay}},[i("div",{staticClass:"pa-3 white",on:{dragover:function(e){e.preventDefault()},drop:function(e){e.preventDefault()},dragstart:function(e){e.preventDefault()}}},[i("documents-header",{staticClass:"py-2",attrs:{"files-size":e.files.length,"selected-view":e.selectedView,"can-add":e.canAdd,query:e.query,"primary-filter":e.primaryFilter,"is-mobile":e.isMobile}}),e._v(" "),e.searchResult&&!e.loading?i("div",[i("documents-no-result-body",{attrs:{"is-mobile":e.isMobile,"show-extend-filter":e.showExtendFilter,query:e.query}})],1):e.filesLoad||e.loading||"folder"!=e.selectedView?e.filesLoad||e.loading?i("div",{on:{drop:e.dragFile,dragover:e.startDrag}},[e.optionsLoaded?i("documents-body",{attrs:{"view-extension":e.selectedViewExtension,files:e.files,"groups-sizes":e.groupsSizes,"page-size":e.pageSize,offset:e.offset,limit:e.limit,"has-more":e.hasMore,"sort-field":e.sortField,ascending:e.ascending,initialized:e.initialized,loading:e.loading,query:e.query,"extended-search":e.extendedSearch,"show-extend-filter":e.showExtendFilter,"primary-filter":e.primaryFilter,"selected-view":e.selectedView,"is-mobile":e.isMobile}}):e._e(),e._v(" "),i("exo-document-notification-alerts")],1):i("div",{on:{drop:e.dragFile,dragover:e.startDrag}},[i("documents-no-body",{attrs:{query:e.query,"is-mobile":e.isMobile}})],1):i("div",{on:{drop:e.dragFile,dragover:e.startDrag}},[i("documents-no-body-folder",{attrs:{query:e.query,"is-mobile":e.isMobile}})],1)],1),e._v(" "),i("documents-visibility-drawer",{attrs:{"is-mobile":e.isMobile}}),e._v(" "),i("document-tree-selector-drawer",{attrs:{"is-mobile":e.isMobile}}),e._v(" "),i("documents-info-drawer",{attrs:{"selected-view":e.selectedView,"is-mobile":e.isMobile}}),e._v(" "),i("v-alert",{class:e.isMobile?"documents-alert-mobile":"",attrs:{icon:!1,"colored-border":e.isMobile,border:e.isMobile&&!e.isAlertActionRunning?"top":"",color:e.alertType,type:e.isMobile?"":e.alertType,dismissible:!e.isMobile},scopedSlots:e._u([{key:"close",fn:function(t){var s=t.toggle;return[e.isMobile?e._e():i("v-btn",{attrs:{icon:""},on:{click:function(t){return e.handleAlertClose(s)}}},[i("v-icon",[e._v("\n            mdi-close-circle\n          ")])],1)]}}]),model:{value:e.alert,callback:function(t){e.alert=t},expression:"alert"}},[e.isAlertActionRunning?i("v-progress-linear",{class:e.progressAlertClassMobile,attrs:{active:e.isAlertActionRunning,height:e.isMobile?"8px":"4px",indeterminate:!0,color:e.progressAlertColor}}):e._e(),e._v("\n      "+e._s(e.message)+"\n      "),e._l(e.alertActions,(function(t){return i("v-btn",{key:t.event,attrs:{disabled:e.isAlertActionRunning,plain:"",text:"",color:"primary"},on:{click:function(i){return e.emitAlertAction(t)}}},[e._v("\n        "+e._s(e.$t("document.conflicts.action."+t.event))+"\n      ")])}))],2),e._v(" "),i("folder-treeview-drawer",{ref:"folderTreeDrawer",attrs:{"is-mobile":e.isMobile}}),e._v(" "),i("documents-app-reminder",{attrs:{"is-mobile":e.isMobile}}),e._v(" "),i("documents-actions-menu-mobile",{attrs:{"is-mobile":e.isMobile}}),e._v(" "),i("documents-filter-menu-mobile",{attrs:{"primary-filter":e.primaryFilter,query:e.query,"extended-search":e.extendedSearch,"is-mobile":e.isMobile}}),e._v(" "),i("version-history-drawer",{ref:"documentVersionHistory",attrs:{"can-manage":e.canManageVersions,"enable-edit-description":!0,versions:e.versions,"is-loading":e.isLoadingVersions,"show-load-more":e.showLoadMoreVersions,"is-mobile":e.isMobile},on:{"drawer-closed":e.versionsDrawerClosed,"open-version":e.showVersionPreview,"restore-version":e.restoreVersion,"version-update-description":e.updateVersionSummary,"load-more":e.loadMoreVersions}})],1)])};o._withStripped=!0;const n={data:()=>({canAdd:!1,versions:[],versionableFile:{},allVersions:[],versionsPageSize:Math.round((window.innerHeight-79)/95),isLoadingVersions:!1,canManageVersions:!1,extensionApp:"Documents",extensionType:"views",query:null,extendedSearch:!1,fileName:null,userId:null,sortField:"lastUpdated",isFavorites:!1,ascending:!1,showExtendFilter:!1,parentFolderId:null,pageSize:50,files:[],offset:0,limit:0,optionsLoaded:!1,initialized:!1,loading:!1,hasMore:!1,canSendSearchStat:!0,viewExtensions:{},currentFolderPath:"",currentFolder:null,groupsSizes:{thisDay:0,thisWeek:0,thisMonth:0,thisYear:0,beforeThisYear:0},selectedView:"timeline",previewMode:!1,primaryFilter:"all",alert:!1,alertType:"",message:"",alertActions:[],ownerId:eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId,isAlertActionRunning:!1,documentsToBeDeleted:[],showOverlay:!1}),computed:{progressAlertColor(){return"warning"===this.alertType?"amber":"error"===this.alertType?"red":"primary"},progressAlertClassMobile(){return this.isMobile?"position-relative document-mobile-alert-progress":""},showLoadMoreVersions(){return this.versions.length<this.allVersions.length},filesLoad(){return this.files&&this.files.length},selectedViewExtension(){return this.selectedView?Object.values(this.viewExtensions).find((e=>e.id===this.selectedView)):Object.keys(this.viewExtensions).length?Object.values(this.viewExtensions).sort(((e,t)=>e.rank-t.rank))[0]:null},isMobile(){return this.$vuetify.breakpoint.width<960},searchResult(){return(this.query&&this.query.length||this.isFavorites)&&!this.files.length},prefixClone(){return this.$t("documents.label.prefix.clone")}},created(){window.setTimeout((()=>{localStorage.removeItem("deletedDocument")}),1e4),document.addEventListener(`extension-${this.extensionApp}-${this.extensionType}-updated`,this.refreshViewExtensions),window.addEventListener("popstate",(e=>{this.onBrowserNavChange(e)})),this.refreshViewExtensions(),this.canAddDocument(),this.$root.$on("documents-refresh-files",this.refreshFiles),this.$root.$on("openTreeFolderDrawer",this.folderTreeDrawer),this.$root.$on("document-load-more",this.loadMore),this.$root.$on("document-change-view",this.changeView),this.$root.$on("document-open-folder",this.openFolder),this.$root.$on("document-open-home",this.openHome),this.$root.$on("documents-add-folder",this.addFolder),this.$root.$on("duplicate-document",this.duplicateDocument),this.$root.$on("documents-create-folder",this.createFolder),this.$root.$on("documents-rename",this.renameDocument),this.$root.$on("documents-move",this.moveDocument),this.$root.$on("confirm-document-deletion",this.deleteDocument),this.$root.$on("undo-delete-document",this.undoDeleteDocument),this.$root.$on("documents-open-drawer",this.openDrawer),this.$root.$on("set-current-folder",this.setCurrentFolder),this.$root.$on("cancel-add-folder",this.cancelAddFolder),this.$root.$on("document-search",this.search),this.$root.$on("document-extended-search",this.extendSearch),this.$root.$on("save-visibility",this.saveVisibility),this.$root.$on("documents-sort",this.sort),this.$root.$on("documents-open-attachments-drawer",this.openDrawer),this.$root.$on("set-loading",this.setLoading),this.$root.$on("documents-filter",(e=>{this.primaryFilter=e,this.refreshFiles({primaryFilter:this.primaryFilter})})),this.$root.$on("show-alert",(e=>{this.displayMessage(e)})),this.getDocumentDataFromUrl().finally((()=>{this.checkDefaultViewOptions(),this.optionsLoaded=!0;const e=new URLSearchParams(window.location.search).has("path");this.refreshFiles({disablePreview:e}).then((()=>{this.watchDocumentPreview(),"folder"===this.selectedView&&this.$nextTick().then((()=>this.$root.$emit("update-breadcrumb",this.folderPath)))})).finally((()=>{this.initialized=!0,this.$root.$applicationLoaded()}))})),this.$root.$on("create-shortcut",this.createShortcut),this.$root.$on("show-version-history",this.showVersionHistory),this.$on("keepBoth",this.handleConflicts),this.$on("createNewVersion",this.handleConflicts),this.$root.$on("cancel-alert-actions",this.handleCancelAlertActions)},destroyed(){document.removeEventListener(`extension-${this.extensionApp}-${this.extensionType}-updated`,this.refreshViewExtensions)},methods:{handleAlertClose(){this.$root.$emit("cancel-action"),this.alert=!1},handleCancelAlertActions(){this.alertActions?.length&&(this.alert=!1,this.alertActions=[])},handleConflicts(e){this.isAlertActionRunning=!0,"createShortcut"===e.function.name&&this.createShortcut(...e.function.params,e.event),"moveDocument"===e.function.name&&this.moveDocument(...e.function.params,e.event)},emitAlertAction(e){this.$emit(e.event,e)},restoreVersion(e){return this.$documentFileService.restoreVersion(e.id).then((e=>{e&&(this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.restore.version.success")}),this.$root.$emit("version-restored",e),this.refreshVersions(this.versionableFile,e),this.refreshFiles())})).catch((()=>{this.$root.$emit("show-alert",{type:"error",message:this.$t("documents.restore.version.error")}),this.$root.$emit("version-restore-error")}))},updateVersionSummary(e,t){return t?this.$documentFileService.updateVersionSummary(e.originId,e.id,t).then((e=>{this.$root.$emit("version-description-updated",e),this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.summary.added.success")})})).catch((()=>{this.$root.$emit("show-alert",{type:"error",message:this.$t("documents.summary.added.error")}),this.$root.$emit("version-description-update-error",e)})):(this.$root.$emit("show-alert",{type:"warning",message:this.$t("document.summary.add.empty.error")}),void this.$root.$emit("version-description-update-error",e))},setLoading(e){this.loading=e},versionsDrawerClosed(){this.versions=[],this.allVersions=[]},loadMoreVersions(){this.versionsPageSize+=10,this.versions=this.allVersions.slice(0,this.versionsPageSize)},refreshVersions(e,t){this.versions.unshift(t),this.$root.$emit("version-number-updated",e.id),this.updateVersionNumber(e)},updateVersionNumber(e){const t=this.files.findIndex((t=>t.id===e.id));this.files[t].versionNumber++},showVersionHistory(e){this.versionableFile=e,this.isLoadingVersions=!0,this.canManageVersions=e.acl.canEdit,this.versionsPageSize=Math.round((window.innerHeight-79)/95),this.$refs.documentVersionHistory.open();const t=e.sourceID?e.sourceID:e.id;this.$documentFileService.getFileVersions(t).then((e=>{this.allVersions=e.versions,this.versions=this.allVersions.slice(0,this.versionsPageSize),this.isLoadingVersions=!1})),this.addVersionHistoryStatistics()},addVersionHistoryStatistics(){document.dispatchEvent(new CustomEvent("exo-statistic-message",{detail:{module:"portal",subModule:"ui",userId:eXo.env.portal.userIdentityId,userName:eXo.env.portal.userName,name:"actionVersionHistory",operation:"accessVersionHistory",parameters:{spaceId:eXo.env.portal.spaceId,view:"timeline"===this.selectedView?"recentView":"folderView"},timestamp:Date.now()}}))},folderTreeDrawer(){this.$refs.folderTreeDrawer&&this.$refs.folderTreeDrawer.open()},sort(e,t){this.sortField=e,this.ascending=t,this.files=[],this.refreshFiles()},search(e){const t=this.query;this.extendedSearch=!1,this.query=e,this.refreshFiles(),e&&e.length>0?(this.$root.$emit("enable-extend-filter"),this.showExtendFilter=!0):(this.$root.$emit("disable-extend-filter"),this.showExtendFilter=!1),this.canSendSearchStat&&t!==e&&(this.canSendSearchStat=!1,window.setTimeout((()=>{this.simpleSearchStatistics(),this.canSendSearchStat=!0}),2e3))},extendSearch(){this.extendedSearch=!0,this.showExtendFilter=!1,this.refreshFiles(),this.extendedSearchStatistics()},getFolderPath(e){e||(e=window.location.pathname),eXo.env.portal.spaceName?e.includes("/documents/")&&(this.folderPath=e.substring(e.indexOf("/documents/")+"/documents/".length),this.selectedView="folder"):e.includes("Private/")&&(this.folderPath=e.substring(e.indexOf("Private/")+"Private/".length),this.selectedView="folder")},duplicateDocument(e){return this.parentFolderId=e.id,this.$documentFileService.duplicateDocument(this.parentFolderId,this.ownerId,this.prefixClone).then((()=>{this.parentFolderId=null,this.getFolderPath(this.folderPath),this.refreshFiles(),e.folder?this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.alert.success.label.duplicateFolder")}):this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.alert.success.label.duplicateDocument")})})).catch((e=>console.error(e)))},deleteDocument(e){setTimeout((()=>{null!=localStorage.getItem("deletedDocument")&&this.refreshFiles({deleted:!0,documentId:e.id})}),500)},undoDeleteDocument(){null!=localStorage.getItem("deletedDocument")&&this.refreshFiles()},openFolder(e){this.folderPath="",this.fileName=null,this.parentFolderId=e.id;let t=null;e.sourceID&&(t=e.id,this.parentFolderId=e.sourceID),this.files=[],this.refreshFiles({symlinkId:t}),this.$root.$emit("set-breadcrumb",e);let i="";if(eXo.env.portal.spaceName){let t=e.path;t=t.replace(`/spaces/${eXo.env.portal.spaceGroup}`,`/spaces/${eXo.env.portal.spaceGroup}/${eXo.env.portal.spaceName}`);const s=eXo.env.portal.selectedNodeUri.replace("/documents","/Documents");let o=t.split(s);o.length>1&&(i=o[1]),o=window.location.pathname.split(eXo.env.portal.selectedNodeUri),window.history.pushState(e.name,e.title,`${o[0]}${eXo.env.portal.selectedNodeUri}${i}?view=folder`)}else{const t=eXo.env.portal.userName,s=`${t}/Private`,o=`${t}/Public`;if(e.path.includes(s)){const t=e.path.split(s);t.length>1&&(i=t[1]),window.history.pushState(e.name,e.title,`${window.location.pathname.split("/Private")[0]}/Private${i}?view=folder`)}if(e.path.includes(o)){const t=e.path.split(o);t.length>1&&(i=t[1]),window.history.pushState(e.name,e.title,`${window.location.pathname.split("/Public")[0]}/Public${i}?view=folder`)}}},loadMore(){this.refreshFiles({primaryFilter:this.primaryFilter,append:!0})},changeView(e){const t=window.location.href.toLowerCase().indexOf(eXo.env.portal.selectedNodeUri.toLowerCase())+eXo.env.portal.selectedNodeUri.length,i=new URL(window.location.href.substring(0,t));i.searchParams.set("view",e),window.history.replaceState("documents","Documents",i.toString()),this.selectedView=e,this.parentFolderId=null,this.folderPath=null,this.files=[],this.$root.$emit("resetSearch"),this.primaryFilter="all",this.query=null,this.extendedSearch=!1,this.$root.$emit("set-documents-search",{extended:this.extendedSearch,query:this.query}),this.$root.$emit("set-documents-filter","All"),this.checkDefaultViewOptions(),this.refreshFiles({primaryFilter:this.primaryFilter}).finally((()=>{"folder"===this.selectedView&&this.$nextTick().then((()=>this.$root.$emit("update-breadcrumb")))}))},openHome(){this.parentFolderId=null,this.folderPath="",this.fileName=null,this.refreshFiles({primaryFilter:this.primaryFilter}),window.location.pathname.includes("/Private")?window.history.pushState("Documents","Personal Documents",`${window.location.pathname.split("/Private")[0]}?view=${this.selectedView}`):window.location.pathname.includes("/Public")?window.history.pushState("Documents","Personal Documents",`${window.location.pathname.split("/Public")[0]}?view=${this.selectedView}`):window.history.pushState("Documents","Personal Documents",`${window.location.pathname}?view=${this.selectedView}`)},refreshFiles(e){if(!this.selectedViewExtension)return Promise.resolve(null);const t={ownerId:eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId,listingType:this.selectedViewExtension.listingType};this.parentFolderId&&(t.parentFolderId=this.parentFolderId),this.folderPath&&(t.folderPath=this.folderPath),this.query?t.query=this.query:this.extendedSearch=!1,this.extendedSearch&&(t.extendedSearch=this.extendedSearch),this.sortField&&(t.sortField=this.sortField),this.userId&&(t.userId=this.userId),t.ascending=this.ascending,"favorites"===e?.primaryFilter&&(this.isFavorites=!0),"all"===e?.primaryFilter&&(this.isFavorites=!1),e?.symlinkId&&(t.symlinkFolderId=e.symlinkId),e?.deleted&&this.documentsToBeDeleted.push(e?.documentId),t.favorites=this.isFavorites;const i=this.selectedViewExtension.filePropertiesExpand||"modifier,creator,owner,metadatas";return this.offset=e?.append?this.offset+this.pageSize:0,this.limit=e?.append?this.limit+this.pageSize:this.pageSize,this.loading=!0,this.$root.$emit("set-documents-search",{extended:this.extendedSearch,query:this.query}),this.$documentFileService.getDocumentItems(t,this.offset,this.limit+1,i).then((t=>{if(t="favorite"===this.sortField&&t&&t.sort(((e,t)=>!1===e.favorite&&!0===t.favorite?this.ascending?-1:1:!0===e.favorite&&!1===t.favorite?this.ascending?1:-1:0))||t,this.files=e?.append?this.files.concat(t):t,this.files=e?.deleted?this.files.filter(this.isDocumentsToBeDeleted):this.files,this.hasMore=t&&t.length>=this.limit,this.fileName&&!e?.disablePreview){const e=t.filter((e=>e?.path.endsWith(`/${this.fileName}`)));e.length>0&&this.showPreview(e[0].id)}this.files.forEach((e=>{e.canAdd=this.canAdd}))})).finally((()=>this.loading=!1))},isDocumentsToBeDeleted(e){return!this.documentsToBeDeleted.find((t=>t===e.id))},checkDefaultViewOptions(){"folder"===this.selectedView?(this.sortField="name",this.ascending=!0):"timeline"===this.selectedView&&(this.sortField="lastUpdated",this.ascending=!1)},refreshViewExtensions(){const e=extensionRegistry.loadExtensions(this.extensionApp,this.extensionType);let t=!1;e.forEach((e=>{!e.id||this.viewExtensions[e.id]&&this.viewExtensions[e.id]===e||(this.viewExtensions[e.id]=e,t=!0)})),t&&(this.viewExtensions=Object.assign({},this.viewExtensions))},watchDocumentPreview(){const e=this,t=document.body;new MutationObserver((function(){const t=document.getElementById("documentPreviewContainer");!t&&e.previewMode?(e.previewMode=!1,e.fileName=null,window.history.pushState("","",window.location.pathname)):t&&!e.previewMode&&(e.previewMode=!0)})).observe(t,{childList:!0,subtree:!0})},addFolder(){const e=eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId,t=this.$t("Folder.label.newfolder");this.$documentFileService.getNewName(e,this.parentFolderId,this.folderPath,t).then((e=>{const t={id:-1,name:e,folder:!0};this.files.unshift(t)})).catch((e=>console.error(e)))},cancelAddFolder(e){this.files.splice(this.files.indexOf(e),1)},createFolder(e){const t=eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId;this.$documentFileService.createFolder(t,this.parentFolderId,this.folderPath,e).then((e=>{e.canAdd=this.canAdd,this.files.shift(),this.files.unshift(e)})).catch((e=>{409===e.status&&this.$root.$emit("show-alert",{type:"warning",message:this.$t("document.folder.conflict.error.message")})})).finally((()=>this.loading=!1))},renameDocument(e,t){const i=eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId;this.$documentFileService.renameDocument(i,e.id,t).then((()=>{this.refreshFiles(),this.$root.$emit("document-renamed",e)})).catch((t=>{409===t.status&&this.$root.$emit("show-alert",{type:"warning",message:e.folder?this.$t("document.folder.conflict.error.message"):this.$t("document.file.conflict.error.message")})})).finally((()=>{this.loading=!1}))},getConflictMessage(e){return e.folder&&!this.isMobile?this.$t("document.folder.conflict.error.message.action"):e.folder&&this.isMobile?this.$t("document.folder.conflict.error.message"):!e.folder&&this.isMobile?this.$t("document.file.conflict.error.message"):this.$t("document.file.conflict.error.message.action")},getConflictActions(e,t){const i=[{event:"keepBoth",function:t}];return e.versionable?(i.push({event:"createNewVersion",function:t}),i):i},moveDocument(e,t,i,s,o,n){this.$documentFileService.moveDocument(e,t.id,i,n).then((()=>{if(this.$root.$emit("show-alert",{type:"success",message:t.folder?this.$t("document.alert.success.label.moveFolder"):this.$t("document.alert.success.label.moveDocument")}),o&&o.groupId){const e=s.path.includes("/Documents/")?s.path.split("/Documents/")[1]:"";window.setTimeout((()=>{window.location.href=`${window.location.pathname.split(":spaces")[0]+o.groupId.replaceAll("/",":")}/${o.prettyName}/documents/${e}`}),1e3)}else this.openFolder(s);this.$root.$emit("document-moved"),this.isAlertActionRunning=!1})).catch((n=>{409===n.status?n.json().then((n=>{this.$root.$emit("show-alert",{type:"warning",message:this.getConflictMessage(t),actions:this.getConflictActions(n.existingObject,{name:"moveDocument",params:[e,t,i,s,o]})})})):this.$root.$emit("show-alert",{type:"error",message:this.$t("document.alert.move.error")})})).finally((()=>this.loading=!1))},createShortcut(e,t,i,s,o){this.$documentFileService.createShortcut(e.id,t,o).then((()=>{if(this.$root.$emit("show-alert",{type:"success",message:this.$t("document.shortcut.creationSuccess")}),this.createShortcutStatistics(e,s),s&&s.groupId){const e=i.path.includes("/Documents/")?i.path.split("/Documents/")[1]:"";window.location.href=`${window.location.pathname.split(":spaces")[0]+s.groupId.replaceAll("/",":")}/${s.prettyName}/documents/${e}`}else this.openFolder(i);this.$root.$emit("shortcut-created"),this.isAlertActionRunning=!1})).catch((o=>{409===o.status?this.$root.$emit("show-alert",{type:"warning",message:this.getConflictMessage(e),actions:[{event:"keepBoth",function:{name:"createShortcut",params:[e,t,i,s]}}]}):this.$root.$emit("show-alert",{type:"error",message:this.$t("document.shortcut.creationError")})})).finally((()=>this.loading=!1))},createShortcutStatistics(e,t){document.dispatchEvent(new CustomEvent("exo-statistic-message",{detail:{module:"Drive",subModule:"Documents",userId:eXo.env.portal.userIdentityId,userName:eXo.env.portal.userName,name:"actionFileCreated",operation:"fileCreated",parameters:{documentName:e.name,documentType:"exo:symlink",origin:"Portlet document",category:e.folder?"folderCategory":"documentCategory",spaceId:t?t.id:eXo.env.portal.spaceId,view:"timeline"===this.selectedView?"recentView":"folderView"},timestamp:Date.now()}}))},simpleSearchStatistics(){document.dispatchEvent(new CustomEvent("exo-statistic-message",{detail:{module:"Drive",subModule:"Documents",userId:eXo.env.portal.userIdentityId,userName:eXo.env.portal.userName,name:"actionSimpleSearch",operation:"simpleSearch",parameters:{spaceId:eXo.env.portal.spaceId,origin:eXo.env.portal.spaceId?"Document":"Personal document",view:"timeline"===this.selectedView?"recentView":"folderView"},timestamp:Date.now()}}))},extendedSearchStatistics(){document.dispatchEvent(new CustomEvent("exo-statistic-message",{detail:{module:"Drive",subModule:"Documents",userId:eXo.env.portal.userIdentityId,userName:eXo.env.portal.userName,name:"actionExtendedSearch",operation:"extendedSearch",parameters:{spaceId:eXo.env.portal.spaceId,origin:eXo.env.portal.spaceId?"Document":"Personal document",view:"timeline"===this.selectedView?"recentView":"folderView"},timestamp:Date.now()}}))},saveVisibility(e){this.$documentFileService.saveVisibility(e).then((()=>{this.refreshFiles(),this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.label.saveVisibility.success")}),this.$root.$emit("visibility-saved")})).catch((()=>{this.$root.$emit("show-alert",{type:"error",message:this.$t("documents.label.saveVisibility.error")})})).finally((()=>{this.loading=!1}))},openDrawer(e){const t={sourceApp:"NEW.APP"};if(eXo.env.portal.spaceName)t.defaultDrive={isSelected:!0,name:`.spaces.${eXo.env.portal.spaceGroup}`,title:eXo.env.portal.spaceDisplayName},window.location.pathname.toLowerCase().split(`${eXo.env.portal.selectedNodeUri.toLowerCase()}/`).length>1&&(t.defaultFolder=this.extractDefaultFolder());else{t.defaultDrive={isSelected:!0,name:"Personal Documents",title:"Personal Documents"},t.defaultFolder="/";let e=window.location.pathname.split(`${eXo.env.portal.selectedNodeUri}/`);e.length>1&&e[1].startsWith("Private/")&&(e=e[1].split("Private/")),e.length>1&&(t.defaultFolder=`${this.extractDefaultFolder(!0)}`)}e&&(t.files=e),document.dispatchEvent(new CustomEvent("open-attachments-app-drawer",{detail:t}))},extractDefaultFolder(e){const t=this.currentFolder.path;return e?t.substring(t.indexOf("Private")+"/Private".length):t.substring(t.indexOf("Documents")+"/Documents".length)},setCurrentFolder(e){this.currentFolder=e},getDocumentDataFromUrl(e){const t=window.location.search,i=new URLSearchParams(t);if(!eXo.env.portal.spaceName&&i.has("userId")&&(this.userId=i.get("userId")),i.has("documentPreviewId")){this.loading=!0,this.previewMode=!0;const e=i.get("documentPreviewId");return this.selectedView="folder",this.showPreview(e).then((e=>{e?.path&&this.selectFile(e.path)}))}if(i.has("folderId")&&(this.parentFolderId=i.get("folderId"),this.selectedView="folder"),i.has("path")){this.selectedView="folder";const e=i.get("path")||"";this.selectFile(e)}else{e||(e=window.location.pathname);const t=e.split(`${eXo.env.portal.selectedNodeUri.toLowerCase()}/`);t.length>1?(this.folderPath=t[1],this.selectedView="folder"):this.folderPath="",i.has("view")&&("folder"===i.get("view").toLowerCase()?this.selectedView="folder":(this.parentFolderId=null,this.folderPath=null,this.selectedView="timeline")),"folder"===this.selectedView&&this.getFolderPath(this.folderPath)}return this.$nextTick()},onBrowserNavChange(e){this.parentFolderId=null,this.getDocumentDataFromUrl(e.currentTarget.location.pathname),this.refreshFiles().finally((()=>this.$root.$emit("update-breadcrumb",this.folderPath)))},displayMessage(e){this.message=e.message,this.alertType=e.type,this.alertActions=e.actions,this.alert=!0,setTimeout((()=>{this.alertActions?.length||(this.alert=!1)}),5e3)},selectFile(e){const t=eXo.env.portal.spaceName?"/Documents/":"/Private/",i=e.substring(e.indexOf(t)+t.length).split("/");return this.selectedView="folder",this.fileName=i.pop(),this.folderPath=i.join("/"),this.getFolderPath(this.folderPath)},showVersionPreview(e){return this.$attachmentService.getAttachmentById(e.originId).then((t=>(documentPreview.init({doc:{id:e.frozenId,repository:"repository",workspace:"collaboration",path:t.path,title:t.title,openUrl:`${t.openUrl}?version=${e.versionNumber}`,breadCrumb:null,size:t.size,downloadUrl:`${t.downloadUrl}?version=${e.versionNumber}`,isCloudDrive:t.cloudDrive},author:t.updater,version:{number:t.version},showComments:!1,showOpenInFolderButton:!1}),t))).catch((e=>console.error(e))).finally((()=>this.loading=!1))},showPreview(e){return this.$attachmentService.getAttachmentById(e).then((t=>(documentPreview.init({doc:{id:e,repository:"repository",workspace:"collaboration",path:t.path,title:t.title,openUrl:t.openUrl,breadCrumb:t.previewBreadcrumb,size:t.size,downloadUrl:t.downloadUrl,isCloudDrive:t.cloudDrive},author:t.updater,version:{number:t.version},showComments:!1,showOpenInFolderButton:!1}),t))).catch((e=>console.error(e))).finally((()=>this.loading=!1))},dragFile(e){const t=e.dataTransfer.items[0],i=t&&""!==t.type;this.canAdd&&i&&(this.openDrawer(e.dataTransfer.files),this.showOverlay=!1,this.$root.$emit("hide-upload-overlay"))},startDrag(e){this.showOverlay=!0;const t=e.dataTransfer.items[0],i=t&&""!==t.type;this.canAdd&&i&&this.$root.$emit("show-upload-overlay")},hideOverlay(){this.showOverlay&&(this.showOverlay=!1,this.$root.$emit("hide-upload-overlay"))},canAddDocument(){const e=eXo.env.portal.spaceId;e?this.$documentFileService.canAddDocument(e).then((e=>{this.canAdd=e})):this.canAdd=!0}}};function a(e,t,i,s,o,n,a,r){var l,c="function"==typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),a?(l=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=l):o&&(l=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var d=c.render;c.render=function(e,t){return l.call(t),d(e,t)}}else{var u=c.beforeCreate;c.beforeCreate=u?[].concat(u,l):[l]}return{exports:e,options:c}}var r=a(n,o,[],!1,null,null,null);r.options.__file="src/main/webapp/vue-app/documents/components/DocumentsMain.vue";const l=r.exports;var c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-main",[i("changes-reminder",{attrs:{reminder:e.introduceNewDocAppReminder}}),e._v(" "),i("changes-reminder",{attrs:{reminder:e.introduceSwitchOldAppReminder}})],1)};c._withStripped=!0;var d=a({data(){return{introduceNewDocAppReminder:{name:"IntroduceNewDocApp",title:this.$t("documents.reminder.newDocApp.dialog.title"),img:"/documents-portlet/images/newdocapp.png",description:this.$t("documents.reminder.newDocApp.Dialog.message")},introduceSwitchOldAppReminder:{name:"IntroduceSwitchOldDocApp",title:this.$t("documents.reminder.oldDocSwitch.dialog.title"),img:"/documents-portlet/images/switcholdapp.gif",description:this.$t("documents.reminder.oldDocSwitch.Dialog.message")}}},mounted(){window.setTimeout((()=>{document.dispatchEvent(new CustomEvent("changes-reminder-open"))}),800)}},c,[],!1,null,null,null);d.options.__file="src/main/webapp/vue-app/documents/components/DocumentsAppReminder.vue";const u=d.exports;var p=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"switch-application VuetifyApp newAppSwitch"},[i("div",{staticClass:"v-application white v-application--is-ltr theme--light",attrs:{"data-app":"true"}},[i("div",{staticClass:"v-application--wrap"},[i("div",[i("div",{staticClass:"switchPosition d-flex align-center"},[i("v-label",{attrs:{for:"switch"}},[i("span",{staticClass:"text-color labelStyle body-2 pe-1"},[e._v("\n              "+e._s(e.$t("document.label.classicApp"))+"\n            ")])]),e._v(" "),i("v-switch",{staticClass:"mt-0 me-1",model:{value:e.classicApp,callback:function(t){e.classicApp=t},expression:"classicApp"}})],1)])])])])};p._withStripped=!0;var m=a({data:()=>({classicApp:!1}),watch:{classicApp(){this.switchApp()}},methods:{switchApp(){this.classicApp?(document.getElementById("UIJcrExplorerContainer").classList.contains("VuetifyApp")&&document.getElementById("UIJcrExplorerContainer").classList.remove("VuetifyApp"),$("#DocumentsApplication").hide(),$("#OldDocumentsApplication").show()):(document.getElementById("UIJcrExplorerContainer").classList.contains("VuetifyApp")||document.getElementById("UIJcrExplorerContainer").classList.add("VuetifyApp"),$("#OldDocumentsApplication").hide(),$("#DocumentsApplication").show()),document.dispatchEvent(new CustomEvent("document-change",{detail:{type:"Switch",category:"Switch App",spaceId:eXo.env.portal.spaceId,name:this.classicApp?"Switch classic App":"Switch new App"}}))}}},p,[],!1,null,null,null);m.options.__file="src/main/webapp/vue-app/documents/components/SwitchNewDocument.vue";const h=m.exports;var f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"d-flex flex-row"},[e.canAdd?i("documents-header-left",{attrs:{"selected-view":e.selectedView,"is-mobile":e.isMobile}}):e._e(),e._v(" "),i("v-spacer"),e._v(" "),e.canShowMobileFilter?e._e():i("documents-header-center",{attrs:{"selected-view":e.selectedView,"is-mobile":e.isMobile}}),e._v(" "),i("v-spacer"),e._v(" "),i("documents-header-right",{attrs:{query:e.query,"primary-filter":e.primaryFilter,"is-mobile":e.isMobile}})],1),e._v(" "),"folder"===e.selectedView?i("documents-breadcrumb",{directives:[{name:"show",rawName:"v-show",value:e.showBreadcrumb,expression:"showBreadcrumb"}],staticClass:"py-4 px-1",attrs:{"is-mobile":e.isMobile}}):e._e()],1)};f._withStripped=!0;var v=a({props:{canAdd:{type:Boolean,default:!1},filesSize:{type:Number,default:0},selectedView:{type:String,default:""},query:{type:String,default:""},primaryFilter:{type:String,default:"all"},isMobile:{type:Boolean,default:!1}},data:()=>({showMobileFilter:!1}),computed:{canShowMobileFilter(){return this.isMobile&&this.showMobileFilter},showBreadcrumb(){return!this.query}},created(){this.$root.$on("show-mobile-filter",(e=>{this.showMobileFilter=e}))}},f,[],!1,null,null,null);v.options.__file="src/main/webapp/vue-app/documents/components/header/DocumentsHeader.vue";const b=v.exports;var y=function(){var e=this,t=e.$createElement;return(e._self._c||t)("extension-registry-components",{staticClass:"d-flex flex-no-wrap documents-header-left-actions",attrs:{params:e.params,name:"DocumentsHeaderLeft",type:"documents-header-left","parent-element":"div",element:"div","element-class":"ma-lg-0 documents-header-left-action"}})};y._withStripped=!0;var w=a({props:{selectedView:{type:String,default:""},isMobile:{type:Boolean,default:!1}},computed:{params(){return{selectedView:this.selectedView,isMobile:this.isMobile}}}},y,[],!1,null,null,null);w.options.__file="src/main/webapp/vue-app/documents/components/header/DocumentsHeaderLeft.vue";const g=w.exports;var x=function(){var e=this,t=e.$createElement;return(e._self._c||t)("extension-registry-components",{staticClass:"d-flex flex-no-wrap documents-header-right-actions",attrs:{name:"DocumentsHeaderRight",type:"documents-header-right",params:e.params,"parent-element":"div",element:"div","element-class":"mx-auto ma-lg-0 documents-header-right-action"}})};x._withStripped=!0;var _=a({props:{query:{type:String,default:""},primaryFilter:{type:String,default:"all"},isMobile:{type:Boolean,default:!1}},computed:{params(){return{query:this.query,primaryFilter:this.primaryFilter,isMobile:this.isMobile}}}},x,[],!1,null,null,null);_.options.__file="src/main/webapp/vue-app/documents/components/header/DocumentsHeaderRight.vue";const C=_.exports;var D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex flex-row"},[i("v-tabs",{staticClass:"documentViewTabs",attrs:{value:e.tab}},e._l(e.tabsList,(function(t,s){return i("v-tab",{key:s,class:e.isMobile?e.tabClass(s)+" px-0":e.tabClass(s),on:{change:function(i){return e.changeDocumentView(t.viewName)}}},[i("v-icon",{class:e.isMobile?"tabIcon mobile":"tabIcon"},[e._v(e._s(t.icon))]),e._v("\n      "+e._s(e.isMobile?"":e.$t(t.labelKey))+"\n    ")],1)})),1)],1)};D._withStripped=!0;var S=a({props:{filesSize:{type:Number,default:0},selectedView:{type:String,default:""},isMobile:{type:Boolean,default:!1}},data:()=>({tabsExtensionApp:"DocumentTabs",tabsExtensionType:"documentsHeaderTab",tabsExtensions:{},mobileOnlyTabsExtensions:[],desktopOnlyTabsExtensions:[],tabsList:[],tab:0}),computed:{spaceId:()=>eXo.env.portal.spaceId},watch:{selectedView:{immediate:!0,handler(){const e=Object.values(this.tabsExtensions).map((e=>e.viewName));this.tab=e.includes(this.selectedView)?e.indexOf(this.selectedView):0}},tabsExtensions(){const e=Object.values(this.tabsExtensions).map((e=>e.viewName));this.tab=e.includes(this.selectedView)?e.indexOf(this.selectedView):0}},created(){document.addEventListener(`extension-${this.extensionApp}-${this.extensionType}-updated`,this.refreshTabExtensions),this.refreshTabExtensions()},methods:{refreshTabExtensions(){const e=extensionRegistry.loadExtensions(this.tabsExtensionApp,this.tabsExtensionType);let t=!1;e.forEach((e=>{!e.id||this.tabsExtensions[e.id]&&this.tabsExtensions[e.id]===e||(!this.isMobile&&!this.mobileOnlyTabsExtensions.includes(e.id)||this.isMobile&&!this.desktopOnlyTabsExtensions.includes(e.id))&&(this.tabsExtensions[e.id]=e,t=!0)})),t&&(this.tabsExtensions=Object.assign({},this.tabsExtensions),this.tabsList=Object.values(this.tabsExtensions))},changeDocumentView(e){this.$root.$emit("document-change-view",e);const t="folder"===e?"FOLDER":"RECENT";document.dispatchEvent(new CustomEvent("document-change",{detail:{type:"document",spaceId:this.spaceId,name:`Switch View ${t} Tab`}}))},tabClass(e){return 0===e?"firstTab":e===this.tabsList.length-1?"lastTab":"middleTab"}}},D,[],!1,null,null,null);S.options.__file="src/main/webapp/vue-app/documents/components/header/DocumentsHeaderCenter.vue";const M=S.exports;var F=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&!e.showMobileFilter||!e.isMobile,expression:"isMobile && !showMobileFilter || !isMobile"}]},[e.isFolderView?e._e():i("button",{staticClass:"btn btn-primary primary px-2 py-0",attrs:{id:e.isMobile?"addItemMenu mobile":"addItemMenu"},on:{click:function(t){return e.openDrawer()}}},[i("v-icon",{attrs:{size:"13",id:"addBtn",dark:""}},[e._v("\n        mdi-plus\n      ")]),e._v("\n      "+e._s(e.isMobile?"":e.$t("documents.button.addNew"))+"\n    ")],1),e._v(" "),e.isFolderView?i("button",{key:e.postKey,staticClass:"btn btn-primary primary px-2 py-0",attrs:{id:e.isMobile?"addItemMenu mobile":"addItemMenu",disabled:e.disableButton},on:{click:function(t){return e.openAddItemMenu()}}},[i("v-icon",{attrs:{size:"13",id:"addBtn",dark:""}},[e._v("\n        mdi-plus\n      ")]),e._v("\n      "+e._s(e.isMobile?"":e.$t("documents.button.addNew"))+"\n    ")],1):e._e(),e._v(" "),e.isFolderView?i("v-menu",{attrs:{attach:"#addItemMenu",transition:"scroll-y-transition","content-class":"add-menu-btn width-full","offset-y":"",down:""},model:{value:e.addMenu,callback:function(t){e.addMenu=t},expression:"addMenu"}},[i("v-list-item",{staticClass:"px-2 add-menu-list-item",on:{click:function(t){return e.addFolder()}}},[i("v-icon",{staticClass:"clickable pr-2",attrs:{size:"13"}},[e._v("\n          fa-folder\n        ")]),e._v(" "),e.isMobile?e._e():i("span",{staticClass:"body-2 text-color menu-text ps-1"},[e._v(e._s(e.$t("documents.button.addNewFolder")))])],1),e._v(" "),i("v-list-item",{staticClass:"px-2 add-menu-list-item",on:{click:function(t){return e.openDrawer()}}},[i("v-icon",{staticClass:"clickable pr-2",attrs:{size:"13"}},[e._v("\n          fa-file-alt\n        ")]),e._v(" "),e.isMobile?e._e():i("span",{staticClass:"body-2 text-color menu-text ps-1"},[e._v(e._s(e.$t("documents.button.addNewFile")))])],1)],1):e._e()],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&e.showMobileFilter||!e.isMobile,expression:"isMobile && showMobileFilter || !isMobile"}]},[i("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&e.showMobileFilter,expression:"isMobile && showMobileFilter"}],staticClass:"inputDocumentsFilter text-sub-title pa-1 my-auto ",attrs:{size:"20"},on:{click:function(t){return e.$root.$emit("mobile-filter")}}},[e._v("\n      fas fa-arrow-left\n    ")])],1),e._v(" "),i("documents-add-new-menu-mobile",{ref:"documentAddItemMenu",attrs:{"is-mobile":e.isMobile}})],1)};F._withStripped=!0;var E=a({props:{selectedView:{type:String,default:""},isMobile:{type:Boolean,default:!1}},data:()=>({showMobileFilter:!1,addMenu:!1,waitTimeUntilCloseMenu:200,currentFolder:null}),computed:{isFolderView(){return"folder"===this.selectedView},disableButton(){return this.currentFolder&&this.currentFolder.accessList&&!1===this.currentFolder.accessList.canEdit}},created(){$(document).on("mousedown",(()=>{this.addMenu&&window.setTimeout((()=>{this.addMenu=!1}),this.waitTimeUntilCloseMenu)})),this.$root.$on("show-mobile-filter",(e=>{this.showMobileFilter=e})),document.addEventListener("entity-attachments-updated",this.refreshFilesList),this.$root.$on("set-current-folder",this.setCurrentFolder)},destroyed(){document.removeEventListener("entity-attachments-updated",this.refreshFilesList)},methods:{refreshFilesList(){this.$root.$emit("documents-refresh-files")},openAddItemMenu(){this.isMobile?this.displayAddMenuMobile():this.addMenu=!this.addMenu},openDrawer(){this.$root.$emit("documents-open-drawer"),this.hideAddMenuMobile()},addFolder(){this.$root.$emit("documents-add-folder"),this.hideAddMenuMobile()},displayAddMenuMobile(){this.isMobile&&this.$refs.documentAddItemMenu.open()},hideAddMenuMobile(){this.$refs.documentAddItemMenu.close()},setCurrentFolder(e){this.currentFolder=e}}},F,[],!1,null,null,null);E.options.__file="src/main/webapp/vue-app/documents/components/header/actions/DocumentsAddNewFile.vue";const I=E.exports;var k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&!e.showMobileFilter,expression:"isMobile && !showMobileFilter"}],staticClass:"inputDocumentsFilter text-sub-title pa-1 my-auto mt-2",attrs:{size:"24"},on:{click:function(t){return e.mobileFilter()}}},[e._v("\n    "+e._s(e.filterIcon)+"\n  ")]),e._v(" "),i("v-text-field",{directives:[{name:"show",rawName:"v-show",value:e.isMobile&&e.showMobileFilter||!e.isMobile,expression:"isMobile && showMobileFilter || !isMobile"}],ref:"inputQuery",staticClass:"inputDocumentsFilter pa-1 my-auto width-full",attrs:{placeholder:e.$t("documents.label.filterDocuments"),"append-icon":e.appendIcon,"prepend-inner-icon":e.prependIcon},on:{"click:append":e.cancelSearch},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}})],1)};k._withStripped=!0;var A=a({props:{query:{type:String,default:null},primaryFilter:{type:String,default:"all"},isMobile:{type:Boolean,default:!1}},data:()=>({startSearchAfterInMilliseconds:300,showMobileFilter:!1,timeout:null}),computed:{appendIcon(){return this.query?"mdi-close primary--text":null},prependIcon(){return this.isMobile?null:"fa-filter"},filterIcon(){return null!=this.query&&this.query.length>0||"all"!==this.primaryFilter?"mdi-filter":"mdi-filter-outline"}},watch:{query(){if(!this.query)return this.timeout&&window.clearTimeout(this.timeout),void this.$root.$emit("document-search",this.query);this.$root.$emit("set-loading",!0),this.$root.$emit("set-loading",!0),this.timeout&&window.clearTimeout(this.timeout),this.waitForEndTyping()}},created(){this.$root.$on("resetSearch",this.cancelSearch),this.$root.$on("filer-query",this.filterQuery),this.$root.$on("mobile-filter",this.mobileFilter)},methods:{filterQuery(e){this.query!==e&&(this.query=e,this.$root.$emit("document-search",this.query))},mobileFilter(){this.showMobileFilter=!this.showMobileFilter,this.$root.$emit("show-mobile-filter",this.showMobileFilter)},cancelSearch(){this.query=null,this.$refs.inputQuery.blur()},waitForEndTyping(){this.timeout=window.setTimeout((()=>{this.$root.$emit("document-search",this.query)}),this.startSearchAfterInMilliseconds)}}},k,[],!1,null,null,null);A.options.__file="src/main/webapp/vue-app/documents/components/header/actions/DocumentsFilterInput.vue";const T=A.exports;var N=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"documents-body"},[e.viewExtension?i("extension-registry-component",{attrs:{component:e.viewExtension,params:e.params,element:e.div}}):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showExtend&&!this.isMobile,expression:"showExtend && !this.isMobile"}],staticClass:"extendFilterButton",on:{click:function(t){return e.extendFilter()}}},[i("v-icon",{staticClass:"extendIcon",attrs:{size:"24"}},[e._v("\n      mdi-file-search\n    ")]),e._v(" "),i("span",[e._v(" "+e._s(e.$t("documents.message.extendedSearch")))])],1)],1)};N._withStripped=!0;var V=a({props:{viewExtension:{type:Object,default:null},files:{type:Array,default:null},loading:{type:Boolean,default:!1},initialized:{type:Boolean,default:!1},offset:{type:Number,default:()=>0},limit:{type:Number,default:()=>50},pageSize:{type:Number,default:()=>50},hasMore:{type:Boolean,default:!1},ascending:{type:Boolean,default:!1},sortField:{type:String,default:null},query:{type:String,default:null},extendedSearch:{type:Boolean,default:!1},primaryFilter:{type:String,default:null},showExtendFilter:{type:Boolean,default:!1},isMobile:{type:Boolean,default:!1},selectedView:{type:String,default:null}},computed:{params(){return{files:this.files,hasMore:this.hasMore,ascending:this.ascending,pageSize:this.pageSize,sortField:this.sortField,initialized:this.initialized,loading:this.loading,offset:this.offset,limit:this.limit,query:this.query,extendedSearch:this.extendedSearch,isMobile:this.isMobile,selectedView:this.selectedView}},showExtend(){return this.showExtendFilter}},methods:{extendFilter(){this.$root.$emit("document-extended-search")}}},N,[],!1,null,null,null);V.options.__file="src/main/webapp/vue-app/documents/components/body/DocumentsBody.vue";const B=V.exports;var O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"documents-body"},[i("upload-overlay"),e._v(" "),i("div",{staticClass:"ma-4 d-flex flex-column justify-center text-center text-color"},[i("v-img",{staticClass:"mx-auto mb-4 overflow-visible",attrs:{src:e.emptyDocs,overflow:"visible","max-height":e.isMobile?46:55,"max-width":e.isMobile?51:61,contain:"",eager:""}},[i("v-icon",{staticClass:"closeIcon text-light-color white float-right",attrs:{size:e.isMobile?23:32}},[e._v("fas fa-times-circle")])],1),e._v(" "),i("div",[e.isMobile?e._e():i("p",{staticClass:"text-light-color"},[i("span",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.noContentLabel,expression:"noContentLabel"}]})]),e._v(" "),e.isMobile?i("div",{staticClass:"text-light-color"},[i("p",[e._v("\n          "+e._s(e.$t("documents.label.no-content").replace("{0}",""))+"\n        ")]),e._v(" "),i("p",[i("strong",[e._v(e._s(e.spaceDisplayName))])])]):e._e(),e._v(" "),i("a",{staticClass:"text-decoration-underline",on:{click:e.openDrawer}},[e._v(e._s(e.$t("documents.label.addNewFile")))])])],1)],1)};O._withStripped=!0;var P=a({props:{isMobile:{type:Boolean,default:!1},query:{type:String,default:null}},data:()=>({emptyDocs:"/documents-portlet/images/docs.png",spaceDisplayName:eXo.env.portal.spaceDisplayName}),computed:{noContentLabel(){return this.$t&&this.$t("documents.label.no-content",{0:`<strong>${this.spaceDisplayName}</strong>`})}},methods:{openDrawer(){this.$root.$emit("documents-open-attachments-drawer")}}},O,[],!1,null,null,null);P.options.__file="src/main/webapp/vue-app/documents/components/body/DocumentsNoBody.vue";const L=P.exports;var z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"documents-body"},[i("upload-overlay"),e._v(" "),i("div",{staticClass:"ma-4 d-flex documents-no-body flex-column justify-center text-center text-color"},[i("v-img",{staticClass:"mx-auto mb-4 overflow-visible",attrs:{src:e.emptyDocs,overflow:"visible","max-height":e.isMobile?46:55,"max-width":e.isMobile?51:61,contain:"",eager:""}},[i("v-icon",{staticClass:"closeIcon text-light-color white float-right",attrs:{size:e.isMobile?23:28}},[e._v("fas fa-times-circle")])],1),e._v(" "),i("div",[i("p",{staticClass:"text-light-color"},[i("span",[e._v(e._s(e.noContentFolderLabel))])]),e._v(" "),i("div",[i("span",{staticClass:"ps-1"},[e._v(e._s(e.addFolderLabel))]),e._v(" "),i("v-icon",{staticClass:"pe-1 text-sub-title",attrs:{size:"13"},on:{click:function(t){return e.addFolder()}}},[e._v("\n          fas fa-folder\n        ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.addDocumentLabel))]),e._v(" "),i("v-icon",{staticClass:"pe-1 text-sub-title",attrs:{size:"13"},on:{click:function(t){return e.openDrawer()}}},[e._v("\n          fas fa-file-alt\n        ")])],1)])],1)],1)};z._withStripped=!0;var U=a({props:{isMobile:{type:Boolean,default:!1},query:{type:String,default:null}},data:()=>({emptyDocs:"/documents-portlet/images/docs.png"}),computed:{noContentFolderLabel(){return this.$t&&this.$t("documents.label.no-content.folder")},addFolderLabel(){return this.$t&&this.$t("documents.label.no-content.addFolder")},addDocumentLabel(){return this.$t&&this.$t("documents.label.no-content.addDocument")}},methods:{addFolder(){this.$root.$emit("documents-add-folder")},openDrawer(){this.$root.$emit("documents-open-attachments-drawer")}}},z,[],!1,null,null,null);U.options.__file="src/main/webapp/vue-app/documents/components/body/DocumentsNoBodyFolder.vue";const X=U.exports;var R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"documents-body"},[i("div",{staticClass:"ma-4 d-flex flex-column justify-center text-center text-color"},[i("v-img",{staticClass:"mx-auto mb-4 overflow-visible",attrs:{src:e.emptyDocs,overflow:"visible","max-height":e.isMobile?46:55,"max-width":e.isMobile?51:61,contain:"",eager:""}},[i("v-icon",{staticClass:"searchIcon text-light-color float-right",attrs:{size:e.isMobile?32:48}},[e._v("\n        fas fa-search\n      ")])],1),e._v(" "),i("div",{staticClass:"text-light-color"},[i("p",[e._v("\n        "+e._s(e.$t("documents.label.no-result"))+"\n      ")])])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showExtend&&!this.isMobile,expression:"showExtend && !this.isMobile"}],staticClass:"extendFilterButton",on:{click:function(t){return e.extendFilter()}}},[i("v-icon",{staticClass:"extendIcon",attrs:{size:"24"}},[e._v("\n      mdi-file-search\n    ")]),e._v(" "),i("span",[e._v(" "+e._s(e.$t("documents.message.extendedSearch")))])],1)])};R._withStripped=!0;var q=a({props:{isMobile:{type:Boolean,default:!1},showExtendFilter:{type:Boolean,default:!1},query:{type:String,default:null}},params(){return{query:this.query,isMobile:this.isMobile}},data:()=>({emptyDocs:"/documents-portlet/images/docs.png"}),computed:{showExtend(){return this.showExtendFilter}},methods:{extendFilter(){this.$root.$emit("document-extended-search")}}},R,[],!1,null,null,null);q.options.__file="src/main/webapp/vue-app/documents/components/body/DocumentsNoResultBody.vue";const j=q.exports;var H=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("upload-overlay"),e._v(" "),i("v-data-table",{ref:"dataTable",staticClass:"documents-table border-box-sizing",class:e.loadingClass,attrs:{headers:e.headers,items:e.items,"items-per-page":e.pageSize,loading:e.loading,options:e.options,locale:e.lang,"group-by":e.groupBy,"group-desc":e.groupDesc,"disable-sort":e.isMobile,"loading-text":e.loadingLabel,"custom-sort":e.customSort,"mobile-breakpoint":"960","hide-default-footer":"","disable-pagination":"","disable-filtering":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([e._l(e.extendedCells,(function(t){return{key:"item."+t.value,fn:function(s){var o=s.item;return[i("documents-table-cell",{key:t.value,class:"name"===t.value&&"ms-8",attrs:{extension:t.cellExtension,file:o,query:e.query,"extended-search":e.extendedSearch,"is-mobile":e.isMobile,"selected-view":e.selectedView}})]}}})),e.grouping?{key:"group.header",fn:function(t){var s=t.group,o=t.items,n=t.isOpen,a=t.toggle;return[i("documents-timeline-group-header",{attrs:{group:s,headers:e.headers,files:o,open:n,"toggle-function":a,query:e.querySearch,"is-mobile":e.isMobile,"primary-filter":e.primaryFilterFavorite}})]}}:null],null,!0)},[e._v(" "),e._v(" "),e.hasMore?i("template",{slot:"footer"},[i("v-flex",{staticClass:"d-flex py-2 border-box-sizing mb-1"},[i("v-btn",{staticClass:"white mx-auto no-border primary--text no-box-shadow",attrs:{loading:e.loading,disabled:e.loading},on:{click:function(t){return e.$root.$emit("document-load-more")}}},[e._v("\n          "+e._s(e.$t("documents.loadMore"))+"\n        ")])],1)],1):e._e()],2)],1)};H._withStripped=!0;var K=a({props:{files:{type:Array,default:null},pageSize:{type:Number,default:20},offset:{type:Number,default:20},limit:{type:Number,default:20},sortField:{type:String,default:null},query:{type:String,default:null},extendedSearch:{type:Boolean,default:!1},initialized:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},ascending:{type:Boolean,default:!1},primaryFilter:{type:String,default:null},isMobile:{type:Boolean,default:!1},selectedView:{type:String,default:null}},data:()=>({lang:eXo.env.portal.language,options:{},headerExtensionApp:"Documents",headerExtensionType:"timelineViewHeader",headerExtensions:{},mobileUnfriendlyExtensions:["visibility","lastUpdated","size","lastActivity","favorite"],dayFirstDay:0,weekFirstDay:0,monthFirstDay:0,yearFirstDay:0}),computed:{loadingClass(){return this.loading&&!this.items.length?this.isMobile?"loadingClassMobile":"loadingClass":""},extendedCells(){return this.headers&&this.headers.filter((e=>e.cellExtension&&e.cellExtension.componentOptions))},grouping(){return!this.sortField||"lastUpdated"===this.sortField},querySearch(){return this.query&&this.query.length},primaryFilterFavorite(){return"favorites"===this.primaryFilter},groupBy(){return this.grouping?"groupValue":[]},groupDesc(){return"favorite"!==this.sortField&&this.ascending},items(){return this.grouping?this.files&&this.files.slice().map((e=>{const t=JSON.parse(JSON.stringify(e));return this.isToday(t.modifiedDate)?t.groupValue="1:thisDay":this.weekFirstDay<=t.modifiedDate?t.groupValue="2:thisWeek":this.monthFirstDay<=t.modifiedDate?t.groupValue="3:thisMonth":this.yearFirstDay<=t.modifiedDate?t.groupValue="4:thisYear":t.groupValue="5:beforeThisYear",t}))||[]:this.files&&this.files.slice()||[]},sortedHeaderExtensions(){return Object.values(this.headerExtensions||{}).filter((e=>!this.isMobile||this.isMobile&&!this.mobileUnfriendlyExtensions.includes(e.id))).sort(((e,t)=>e.rank-t.rank))},headers(){const e=[];return this.sortedHeaderExtensions.forEach((t=>{e.push({text:t.labelKey&&this.$t(t.labelKey)||"",align:t.align||"center",sortable:t.sortable||!1,value:t.id,class:t.cssClass||"",width:t.width||"auto",cellExtension:t})})),e},loadingLabel(){return`${this.$t("documents.label.loading")}...`}},watch:{options(){if(!this.initialized)return;const e=this.options.sortBy.length&&this.options.sortBy[0]||this.sortField,t=!this.options.sortDesc.length||!this.options.sortDesc[0];this.options.sortBy.length||this.setSortOptions(e,t),e===this.sortField&&this.ascending===t||this.$root.$emit("documents-sort",e,t)}},created(){this.dayFirstDay=this.getDayStart(),this.weekFirstDay=this.getWeekStart(),this.monthFirstDay=this.getMonthStart(),this.yearFirstDay=this.getYearStart(),document.addEventListener(`extension-${this.headerExtensionApp}-${this.headerExtensionType}-updated`,this.refreshHeaderExtensions),this.refreshHeaderExtensions(),this.setSortOptions(this.sortField,this.ascending),this.$root.$on("documents-filter",this.updateFilter)},beforeDestroy(){this.$root.$off("documents-filter",this.updateFilter)},mounted(){this.$documentsUtils.injectSortTooltip(this.$t("documents.sort.tooltip"),"tooltip-marker")},methods:{customSort:function(e,t,i){if("name"===t[0]){const t=new Intl.Collator(eXo.env.portal.language,{numeric:!0,sensitivity:"base"}),s=e.sort(((e,i)=>t.compare(e.name,i.name)));return i[0]?s.reverse():s}return e},updateFilter(e){this.primaryFilter=e},setSortOptions(e,t){this.options.sortBy=[e],this.options.sortDesc=[!t]},refreshHeaderExtensions(){extensionRegistry.loadExtensions(this.headerExtensionApp,this.headerExtensionType).forEach((e=>this.$set(this.headerExtensions,e.id,e)))},isToday(e){const t=new Date,i=new Date(e);return i.getDate()===t.getDate()&&i.getMonth()===t.getMonth()&&i.getFullYear()===t.getFullYear()},getDayStart:()=>(new Date).getTime(),getWeekStart(){const e=new Date,t=e.getDay(),i=e.getDate()-t+(t?1:-6);return new Date(1900+e.getYear(),e.getMonth(),i).getTime()},getMonthStart(){const e=new Date;return new Date(1900+e.getYear(),e.getMonth(),1).getTime()},getYearStart(){const e=new Date;return new Date(1900+e.getYear(),0,1).getTime()}}},H,[],!1,null,null,null);K.options.__file="src/main/webapp/vue-app/documents/components/body/views/DocumentsTimelineView.vue";const Y=K.exports;var G=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("upload-overlay"),e._v(" "),i("v-data-table",{ref:"dataTable",staticClass:"documents-folder-table border-box-sizing",class:e.loadingClass,attrs:{headers:e.headers,items:e.items,"items-per-page":e.pageSize,loading:e.loading,options:e.options,locale:e.lang,groupable:e.grouping,"group-by":e.groupBy,"group-desc":e.groupDesc,"loading-text":e.loadingLabel,"custom-sort":e.customSort,"mobile-breakpoint":"960","hide-default-footer":"","disable-pagination":"","disable-filtering":""},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([e._l(e.extendedCells,(function(t){return{key:"item."+t.value,fn:function(s){var o=s.item;return[i("documents-table-cell",{key:t.value,class:"name"===t.value&&"ms-8",attrs:{extension:t.cellExtension,file:o,query:e.query,"extended-search":e.extendedSearch,"is-mobile":e.isMobile,"selected-view":e.selectedView}})]}}}))],null,!0)},[i("template",{slot:"group.header"},[i("span")]),e._v(" "),e._v(" "),e.hasMore?i("template",{slot:"footer"},[i("v-flex",{staticClass:"d-flex py-2 border-box-sizing mb-1"},[i("v-btn",{staticClass:"white mx-auto no-border primary--text no-box-shadow",attrs:{loading:e.loading,disabled:e.loading},on:{click:function(t){return e.$root.$emit("document-load-more")}}},[e._v("\n          "+e._s(e.$t("documents.loadMore"))+"\n        ")])],1)],1):e._e()],2)],1)};G._withStripped=!0;var J=a({props:{files:{type:Array,default:null},pageSize:{type:Number,default:20},offset:{type:Number,default:20},limit:{type:Number,default:20},sortField:{type:String,default:null},query:{type:String,default:null},extendedSearch:{type:Boolean,default:!1},initialized:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},hasMore:{type:Boolean,default:!1},ascending:{type:Boolean,default:!1},primaryFilter:{type:String,default:null},isMobile:{type:Boolean,default:!1},selectedView:{type:String,default:null}},data:()=>({lang:eXo.env.portal.language,options:{},grouping:!0,groupBy:["folder"],groupDesc:[!0],headerExtensionApp:"Documents",headerExtensionType:"timelineViewHeader",headerExtensions:{},mobileUnfriendlyExtensions:["visibility","lastUpdated","size","lastActivity","favorite"]}),computed:{loadingClass(){return this.loading&&!this.items.length?this.isMobile?"loadingClassMobile":"loadingClass":""},extendedCells(){return this.headers&&this.headers.filter((e=>e.cellExtension&&e.cellExtension.componentOptions))},querySearch(){return this.query&&this.query.length},primaryFilterFavorite(){return"favorites"===this.primaryFilter},items(){return this.files&&this.files.slice()||[]},sortedHeaderExtensions(){return Object.values(this.headerExtensions||{}).filter((e=>!this.isMobile||this.isMobile&&!this.mobileUnfriendlyExtensions.includes(e.id))).sort(((e,t)=>e.rank-t.rank))},headers(){const e=[];return this.sortedHeaderExtensions.forEach((t=>{e.push({text:t.labelKey&&this.$t(t.labelKey)||"",align:t.align||"center",sortable:t.sortable||!1,value:t.id,class:t.cssClass||"",width:t.width||"auto",cellExtension:t})})),e},loadingLabel(){return`${this.$t("documents.label.loading")}...`}},watch:{options(){if(!this.initialized)return;const e=this.options.sortBy.length&&this.options.sortBy[0]||this.sortField,t=!this.options.sortDesc.length||!this.options.sortDesc[0];this.options.sortBy.length||this.setSortOptions(e,t),e===this.sortField&&this.ascending===t||this.$root.$emit("documents-sort",e,t)}},created(){document.addEventListener(`extension-${this.headerExtensionApp}-${this.headerExtensionType}-updated`,this.refreshHeaderExtensions),this.refreshHeaderExtensions(),this.setSortOptions(this.sortField,this.ascending),this.$root.$on("documents-filter",this.updateFilter)},mounted(){this.$documentsUtils.injectSortTooltip(this.$t("documents.sort.tooltip"),"tooltip-marker")},beforeDestroy(){this.$root.$off("documents-filter",this.updateFilter)},methods:{customSort:function(e,t,i){if("name"===t[1]){const t=new Intl.Collator(eXo.env.portal.language,{numeric:!0,sensitivity:"base"}),s=e.sort(((e,i)=>i.folder-e.folder||t.compare(e.name,i.name)));return i[1]?s.reverse():s}return e},updateFilter(e){this.primaryFilter=e},setSortOptions(e,t){this.options.sortBy=[e],this.options.sortDesc=[!t]},refreshHeaderExtensions(){extensionRegistry.loadExtensions(this.headerExtensionApp,this.headerExtensionType).forEach((e=>this.$set(this.headerExtensions,e.id,e)))}}},G,[],!1,null,null,null);J.options.__file="src/main/webapp/vue-app/documents/components/body/views/DocumentsFolderView.vue";const W=J.exports;var Q=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.query||e.primaryFilter?e._e():i("td",{staticClass:"white ps-1",attrs:{colspan:e.colspan}},[i("v-btn",{staticClass:"white no-border no-box-shadow ps-3",attrs:{text:""},on:{click:e.toggleFunction}},[i("v-icon",{staticClass:"text-light-color"},[e._v(e._s(e.icon))]),e._v(" "),i("v-divider",{staticClass:"mx-2",attrs:{vertical:""}}),e._v("\n    "+e._s(e.label)+"\n  ")],1)],1)};Q._withStripped=!0;var Z=a({props:{group:{type:String,default:null},query:{type:Boolean,default:!1},headers:{type:Array,default:null},files:{type:Array,default:null},open:{type:Boolean,default:!1},toggleFunction:{type:Object,default:null},primaryFilter:{type:Boolean,default:!1}},computed:{colspan(){return this.headers&&this.headers.length||0},icon(){return this.open?"mdi-chevron-down":"mdi-chevron-up"},filesCount(){return this.files&&this.files.length||0},label(){if(!this.group)return"";const e=this.group.split(":")[1];return this.$t(`documents.timeline.label.${e}`)}}},Q,[],!1,null,null,null);Z.options.__file="src/main/webapp/vue-app/documents/components/body/views/DocumentsTimelineGroupHeader.vue";const ee=Z.exports;var te=function(){var e=this,t=e.$createElement;return(e._self._c||t)("extension-registry-component",{attrs:{component:e.extension,params:e.params,element:e.div}})};te._withStripped=!0;var ie=a({props:{file:{type:Object,default:null},query:{type:String,default:null},extendedSearch:{type:Boolean,default:!1},extension:{type:Object,default:null},isMobile:{type:Boolean,default:!1},selectedView:{type:String,default:null}},computed:{params(){return{file:this.file,query:this.query,extendedSearch:this.extendedSearch,extension:this.extension,isMobile:this.isMobile,selectedView:this.selectedView}}}},te,[],!1,null,null,null);ie.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsTableCell.vue";const se=ie.exports;var oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isMobile?e._e():i("date-format",{staticClass:"document-time text-light-color text-no-wrap",attrs:{value:e.lastUpdated,format:e.fullDateFormat}})};oe._withStripped=!0;var ne=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1},extension:{type:Object,default:null}},data:()=>({fullDateFormat:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}}),computed:{lastUpdated(){return this.file&&(this.file.modifiedDate||this.file.createdDate)||""}}},oe,[],!1,null,null,null);ne.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsLastUpdatedCell.vue";const ae=ne.exports;var re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,o=t.attrs;return[i("v-btn",{staticClass:"visibility-btn",class:e.btnClass,attrs:{icon:""},on:{click:e.changeVisibility}},[i("v-icon",e._g(e._b({staticClass:"px-2 iconStyle",attrs:{color:"grey",dark:"",size:"13"}},"v-icon",o,!1),s),[e._v("\n        "+e._s(e.icon.icon)+"\n      ")])],1)]}}])},[e._v(" "),i("span",{staticClass:"center"},[e._v(e._s(e.$shareDocumentSuspended?e.shareDocumentSuspendedLabel:e.icon.title))])])};re._withStripped=!0;var le=a({props:{file:{type:Object,default:null},selectedView:{type:String,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({unit:"bytes"}),computed:{icon(){if(this.file.folder&&this.file.id<0)return{icon:"fas fa-layer-group",title:this.$t("documents.label.visibility.all")};if(this.isSharedWithCurrentSpaceOrDrive&&!this.file.acl.canEdit)return"read"===this.file.acl.collaborators.filter((e=>e.identity.id===eXo.env.portal.spaceIdentityId||eXo.env.portal.userName))[0].permission?{icon:"fas fa-eye",title:this.$t("documents.label.visibility.specific.manger")}:{icon:"fas fa-layer-group",title:this.$t("documents.label.visibility.all")};switch(this.file.acl.visibilityChoice){case"SPECIFIC_COLLABORATOR":return{icon:"fas fa-user-lock",title:this.$t("documents.label.visibility.specific.collaborator")};case"ALL_MEMBERS":return this.file.acl.allMembersCanEdit?{icon:"fas fa-layer-group",title:this.$t("documents.label.visibility.all")}:{icon:"fas fa-eye",title:this.$t("documents.label.visibility.specific.manger")};default:return{icon:"fas fa-layer-group",title:this.$t("documents.label.visibility.all")}}},isSharedWithCurrentSpaceOrDrive(){const e=eXo.env.portal.spaceIdentityId,t=eXo.env.portal.spaceName,i=this.file.acl.collaborators;if(e&&t&&i.length>0){for(const s of i)if(s.identity.id===e&&s.identity.remoteId===t)return!0}else if(i.length>0)for(const e of i)if(e.identity.remoteId===eXo.env.portal.userName)return!0;return!1},btnClass(){return this.isMobile?"ms-2":"me-4"},shareDocumentSuspendedLabel(){return this.$t("documents.label.share.document.suspend")}},methods:{changeVisibility(){this.file.acl.canEdit&&!this.$shareDocumentSuspended&&(this.$root.$emit("open-visibility-drawer",this.file),document.dispatchEvent(new CustomEvent("manage-access",{detail:{category:this.file.folder?"Folder":"Document",spaceId:eXo.env.portal.spaceId,view:"timeline"===this.selectedView?"recentView":"folderView"}})))}}},re,[],!1,null,null,null);le.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsVisibilityCell.vue";const ce=le.exports;var de=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"fileSize"},[e.fileSize?[e._v("\n    "+e._s(e.fileSize)+" "+e._s(e.$t("documents.label."+e.unit))+"\n  ")]:[e._v("\n    -\n  ")]],2)};de._withStripped=!0;var ue=a({props:{file:{type:Object,default:null},extension:{type:Object,default:null}},data:()=>({BYTES_IN_KB:1024,BYTES_IN_MB:1048576,BYTES_IN_GB:1073741824,MIN_GB_UNIT_DISPLAY_IN_MB:500,MIN_MB_UNIT_DISPLAY_IN_KB:500,MIN_KB_UNIT_DISPLAY_IN_BYTES:500,formattedSizePrecision:2,fileSize:0,unit:"bytes"}),watch:{file:{immediate:!0,handler(e){e&&e.size&&this.computeFileSize()}}},computed:{lastUpdated(){return this.file&&(this.file.modifiedDate||this.file.createdDate)||""}},methods:{computeFileSize(){const e=this.MIN_GB_UNIT_DISPLAY_IN_MB*this.BYTES_IN_MB,t=this.MIN_MB_UNIT_DISPLAY_IN_KB*this.BYTES_IN_KB,i=this.MIN_KB_UNIT_DISPLAY_IN_BYTES;let s=this.file.size;s<i?this.unit="bytes":s<t?(s/=this.BYTES_IN_KB,this.unit="kilo"):s<e?(s/=this.BYTES_IN_MB,this.unit="mega"):(s/=this.BYTES_IN_GB,this.unit="giga"),this.fileSize=(+s).toFixed(this.formattedSizePrecision)}}},de,[],!1,null,null,null);ue.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsFileSizeCell.vue";const pe=ue.exports;var me=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"documents-last-activity"},[e.activityLabel?[e._v("\n    "+e._s(e.activityLabel)+"\n  ")]:[e._v("\n    -\n  ")]],2)};me._withStripped=!0;var he=a({props:{file:{type:Object,default:null},extension:{type:Object,default:null}},computed:{activityLabel(){if(this.file&&this.file.auditTrails&&this.file.auditTrails.trails&&this.file.auditTrails.trails.length){const e=this.file.auditTrails.trails[0];if(e&&e.userIdentity&&e.userIdentity.profile&&e.userIdentity.profile.fullname)return this.$t(`documents.label.activity.${e.actionType}`,{0:e.userIdentity.profile.fullname})}return null}}},me,[],!1,null,null,null);he.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsLastActivityCell.vue";const fe=he.exports;var ve=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isFavorite&&!e.file.folder,expression:"isFavorite && !file.folder"}],attrs:{id:"favorite-cell-file-"+e.fileId}},[e.isMobile?e._e():i("div",[i("documents-favorite-action",{attrs:{file:e.file,"is-mobile":e.isMobile}})],1)])};ve._withStripped=!0;var be=a({props:{file:{type:Object,default:null},extension:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},computed:{fileId(){return this.file&&this.file.id},spaceId:()=>eXo.env.portal.spaceId||0,isFavorite(){return this.file&&this.file.metadatas&&this.file.metadatas.favorites&&this.file.metadatas.favorites.length}},created(){this.isFavorite=this.file&&this.file.metadatas&&this.file.metadatas.favorites&&this.file.metadatas.favorites.length},mounted(){if(!this.isMobile){const e=this;$(`#favorite-cell-file-${this.fileId}`).parent().parent().parent().hover((function(){e.isFavorite||e.file.folder||$(`#favorite-cell-file-${e.fileId}`).show()}),(function(){e.isFavorite||$(`#favorite-cell-file-${e.fileId}`).hide()}))}},methods:{hitFavoriteButton(){$(`#FavoriteLink_file_${this.fileId}`).click()}}},ve,[],!1,null,null,null);be.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsFavoriteCell.vue";const ye=be.exports;var we=function(){var e=this,t=e.$createElement;return(e._self._c||t)("favorite-button",{attrs:{id:e.fileId,"space-id":e.spaceId,favorite:e.isFavorite,type:"file","type-label":"Documents"},on:{removed:e.removed,"remove-error":e.removeError,added:e.added,"add-error":e.addError}})};we._withStripped=!0;var ge=a({props:{file:{type:Object,default:null}},data:()=>({isFavorite:!1}),computed:{fileId(){return this.file&&this.file.id},spaceId:()=>eXo.env.portal.spaceId||0},created(){this.isFavorite=this.file&&this.file.metadatas&&this.file.metadatas.favorites&&this.file.metadatas.favorites.length},methods:{removed(){this.isFavorite=!this.isFavorite,this.$root.$emit("documents-refresh-files"),this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyDeletedFavorite",{0:this.$t("file.label")})),this.$emit("removed")},removeError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorDeletingFavorite",{0:this.$t("file.label")}),"error")},added(){this.isFavorite=!this.isFavorite,this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyAddedAsFavorite",{0:this.$t("file.label")})),this.$emit("added"),this.$root.$emit("documents-refresh-files")},addError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorAddingAsFavorite",{0:this.$t("file.label")}),"error")},displayAlert(e,t){document.dispatchEvent(new CustomEvent("attachments-notification-alert",{detail:{messageObject:{message:e,type:t||"success"}}}))}}},we,[],!1,null,null,null);ge.options.__file="src/main/webapp/vue-app/documents/components/body/table/action/DocumentFavoriteAction.vue";const xe=ge.exports;var _e=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex flex-nowrap"},[i("a",{staticClass:"attachment d-flex flex-nowrap text-color not-clickable openPreviewDoc width-document-title"},[i("div",{staticClass:"mt-auto mb-auto"},[e.loading?i("v-progress-circular",{attrs:{indeterminate:"",size:"16"}}):e.file.cloudDriveFolder?i("i",{staticClass:"fas fa-folder driveFolderIcon"},[i("i",{staticClass:"fa-hdd driveFolderContentIcon"})]):i("v-icon",{attrs:{size:e.isMobile?32:22,color:e.icon.color}},[e._v(e._s(e.icon.class))])],1),e._v(" "),i("div",{staticClass:"mt-auto mb-auto width-document-title"},[e.editNameMode?e._e():i("div",{staticClass:"document-title clickable hover-underline d-inline-flex",attrs:{title:e.title},on:{click:function(t){return e.openPreview()}}},[i("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.title,expression:"title"}],staticClass:"document-name ms-4",class:e.title.includes("</b>")?"":"text-truncate"}),e._v(" "),i("div",{directives:[{name:"sanitized-html",rawName:"v-sanitized-html",value:e.fileType,expression:"fileType"}],staticClass:"document-type ms-0"}),e._v(" "),e.file.sourceID?i("v-icon",{staticClass:"pe-1 iconStyle ms-1",attrs:{size:"13"}},[e._v("\n          mdi-link-variant\n        ")]):e._e()],1),e._v(" "),e.editNameMode?i("documents-file-edit-name-cell",{attrs:{file:e.file,"file-name":e.fileName,"file-type":e.fileType,"is-mobile":e.isMobile,"edit-name-mode":e.editNameMode}}):e._e(),e._v(" "),e.isMobile?i("div",{staticClass:"d-flex"},[e.editNameMode?e._e():i("date-format",{staticClass:"document-time text-light-color text-no-wrap",attrs:{value:e.lastUpdated,format:e.fullDateFormat}}),e._v(" "),i("documents-visibility-cell",{attrs:{file:e.file,"is-mobile":e.isMobile,"selected-view":e.selectedView}})],1):e._e()],1)]),e._v(" "),i("v-spacer"),e._v(" "),e.isMobile?e._e():i("documents-info-details-cell",{class:e.editNameMode?"":"button-info-details",attrs:{file:e.file,"is-mobile":e.isMobile}}),e._v(" "),i("div",{staticClass:"ma-auto",attrs:{id:"document-action-menu-cel-"+e.file.id}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,o=t.attrs;return[i("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",o,!1),s),[i("v-icon",{directives:[{name:"show",rawName:"v-show",value:e.isMobile||e.menuDisplayed,expression:"isMobile || menuDisplayed"}],staticClass:"clickable text-sub-title",class:e.editNameMode?"":"button-document-action",attrs:{size:e.isMobile?14:18},on:{click:function(t){return e.displayActionMenu()}}},[e._v("\n            mdi-dots-vertical\n          ")])],1),e._v(" "),i("v-menu",{attrs:{attach:"#document-action-menu-cel-"+e.file.id,transition:"slide-x-reverse-transition","content-class":e.isMobile?"documentActionMenuMobile":"documentActionMenu","offset-y":"","offset-x":"","close-on-click":"",absolute:""},model:{value:e.menuDisplayed,callback:function(t){e.menuDisplayed=t},expression:"menuDisplayed"}},[i("documents-actions-menu",{attrs:{file:e.file,"is-mobile":e.isMobile}})],1)]}}])},[e._v(" "),i("span",[e._v("\n        "+e._s(e.menuActionTooltip)+"\n      ")])])],1)],1)};_e._withStripped=!0;const $e=JSON.parse('{"application/illustrator":".ai","audio/x-aiff":".aiff","text/any":".any","video/x-msvideo":".avi","application/x-bcpio":".bcpio","image/bmp":".bmp","application/x-bzip2":".bz2","application/x-netcdf":".cdf","application/x-cpio":".cpio","application/mac-compactpro":".cpt","application/cq-durboser":".cq","application/x-csh":".csh","text/css":".css","text/csv":".csv","font/dfont":".dfont","xapplication/x-director":".dms","application/msword":".doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document.form":".oform","application/vnd.ms-word.document.macroenabled.12":".docm","application/vnd.ms-word.template.macroEnabled.12":".dotm","application/x-dvi":".dvi","application/x-director":".dxr","application/ear-java-archive":".ear","font/eot":".eot","application/eps":".eps","text/x-setext":".etx","application/octet-stream":".exe","application/andrew-inset":".ez","video/x-f4v":".f4v","video/x-flv":".flv","application/vnd.google-apps.document":".gdoc","application/vnd.google-apps.drawing":".gdraw","image/gif":".gif","application/vnd.google-apps.spreadsheet":".gsheet","application/vnd.google-apps.presentation":".gslides","application/x-jaxrs+groovy":".grs","application/x-groovy":".groovy","application/x-gtar":".gtar","application/x-groovy+html":".gtmpl","application/x-gzip":".gz","application/x-hdf":".hdf","application/mac-binhex40":".hqx","text/html":".html","x-conference/x-cooltalk":".ice","image/x-icon":".icns","image/ief":".ief","model/iges":".iges","application/x-indesign":".indd","application/java-archive":".jar","image/jpeg":".jpeg","application/x-javascript":".js","application/json":".json","text/key":".key","application/x-latex":".latex","application/lwp":".lwp","audio/x-m4a":".m4a","audio/other":".m4b","video/x-m4v":".m4v","application/x-troff-man":".man","application/msaccess":".mdb","application/x-troff-me":".me","model/mesh":".mesh","audio/midi":".midi","application/vnd.mif":".mif","video/x-matroska":".mkv","video/x-sgi-movie":".movie","video/quicktime":".mov","audio/mp2":".mp2","audio/mp3":".mp3","video/mp4":".mp4","video/mpe":".mpe","video/mpeg":".mpg","audio/mpga":".mpga","application/x-troff-ms":".ms","application/vnd.ms-outlook":".msg","application/oda":".oda","application/vnd.oasis.opendocument.database":".odb","application/vnd.oasis.opendocument.formula":".odf","application/vnd.oasis.opendocument.graphics":".odg","application/vnd.oasis.opendocument.text":".odm","application/vnd.oasis.opendocument.spreadsheet":".ods","audio/ogg":".ogg","font/otf":".otf","application/vnd.oasis.opendocument.presentation":".otp","application/vnd.oasis.opendocument.spreadsheet-template":".ots","image/x-portable-bitmap":".pbm","chemical/x-pdb":".pdb","application/pdf":".pdf","image/x-portable-graymap":".pgm","application/x-chess-pgn":".pgn","application/php":".php","video/mpg":".pmeg","image/png":".png","image/x-png":".png","image/x-portable-anymap":".pnm","application/vnd.ms-powerpoint.template.macroenabled.12":".potm","application/vnd.ms-powerpoint.addin.macroEnabled.12":".ppam","image/x-portable-pixmap":".ppm","application/vnd.ms-powerpoint.slideshow.macroenabled.12":".ppsm","application/vnd.openxmlformats-officedocument.presentationml.slideshow":".ppsx","application/vnd.ms-powerpoint":".ppt","application/vnd.ms-powerpoint.presentation.macroenabled.12":".pptm","application/vnd.openxmlformats-officedocument.presentationml.presentation":".pptx","application/vnd.openxmlformats-officedocument.presentationml.template":".potx","application/freelance":".prz","application/postscript":".ps","image/psd":".psd","text/qhtml":".qhtml","audio/x-realaudio":".ra","application/rar":".rar","image/x-cmu-raster":".ras","application/raw":".raw","image/x-rgb":".rgb","audio/x-pn-realaudio":".rm","application/x-rpm":".rpm","application/rtf":".rtf","text/rtf":".rtf","text/richtext":".rtx","application/x-ruby":".ru","text/sgml":".sgml","application/x-sh":".sh","application/x-shar":".shar","application/x-stuffit":".sit","application/x-koan":".skm","application/smil":".smi","audio/basic":".snd","application/x-futuresplash":".spl","application/x-wais-source":".src","application/x-sv4cpio":".sv4cpio","application/x-sv4crc":".sv4crc","image/svg-xml":".svg","application/x-shockwave-flash":".swf","application/vnd.sun.xml.calc":".sxc","application/vnd.sun.xml.impress":".sxi","application/vnd.sun.xml.writer":".sxw","application/x-tar":".tar","application/other-zip":".tar.xz","application/x-tcl":".tcl","application/x-tex":".tex","application/x-texinfo":".texinfo","image/tiff":".tiff","application/x-troff":".tr","text/tab-separated-values":".tsv","font/ttc":".ttc","font/ttf":".ttf","text/plain":".txt","application/x-ustar":".ustar","application/x-cdlink":".vcd","model/vrml":".vrml","application/vsd":".vsd","application/visio":".vsd","application/vnd.visio":".vsd","application/x-vsd":".vsd","application/x-visio":".vsw","application/x-zip":".war","audio/x-wav":".wav","video/webm":".webm","text/x-wiki":".wiki","audio/x-ms-wma":".wma","video/x-ms-wmv":".wmv","font/woff":".woff","application/wordperfect":".wpd","image/x-xbitmap":".xbm","image/xcf":".xcf","image/pjpeg":".jpeg","apple/pages":".pages","application/vnd.ms-excel.addin.macroEnabled.12":".xlam","application/vnd.ms-excel":".xls","application/vnd.ms-excel.sheet.binary.macroEnabled.12":".xlsb","application/vnd.ms-excel.sheet.macroEnabled.12":".xlsm","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":".xlsx","application/vnd.ms-excel.template.macroEnabled.12":".xltm","application/vnd.openxmlformats-officedocument.spreadsheetml.template":".xltx","text/xml":".xml","image/x-xpixmap":".xpm","text/xsl":".xsl","text/xslt":".xslt","image/x-xwindowdump":".xwd","application/zip":".zip"}'),Ce={props:{file:{type:Object,default:null},query:{type:String,default:null},extension:{type:Object,default:null},isMobile:{type:Boolean,default:!1},selectedView:{type:String,default:null}},data:()=>({loading:!1,menuDisplayed:!1,waitTimeUntilCloseMenu:200,fileToEditId:-1,fullDateFormat:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},accentMap:{ae:"(ae|||)",a:"(a||||||||||||||||||||||||||||||||)",c:"(c|||||||||)",e:"(e||||||||||||||||||||||||||||)",i:"(i|||||||||||||||||)",n:"(n|||||||||||||||)",o:"(o||||||||||||||||||||||||||||||||||||)",u:"(u|||||||||||||||||||||||||||||||)"},icon:null}),computed:{title(){let e=this.fileName;try{e=decodeURI(this.fileName)}catch(e){}return this.query&&(e=this.highlightSearchResult(e,this.query)),e},lastUpdated(){return this.file&&(this.file.modifiedDate||this.file.createdDate)||""},fileName(){return this.file.name.lastIndexOf(".")>=0&&!this.file.folder?this.file.name.substring(0,this.file.name.lastIndexOf(".")):this.file.name},editNameMode(){return this.file.id===this.fileToEditId},fileType(){let e=this.file.name.lastIndexOf(".")>=0&&!this.file.folder?this.file.name.substring(this.file.name.lastIndexOf(".")):$e[this.file.mimeType]||"";return this.query&&!this.extendedSearch&&(e=this.highlightSearchResult(e,this.query)),e},menuActionTooltip(){return this.$t("documents.label.menu.action.tooltip")}},created(){$(document).on("mousedown",(()=>{this.menuDisplayed&&window.setTimeout((()=>{$(`#document-action-menu-cel-${this.file.id}`).parent().parent().parent().parent().css("background","#fff"),this.menuDisplayed=!1}),this.waitTimeUntilCloseMenu)})),this.$root.$on("update-file-name",this.editFileName),this.$root.$on("cancel-edit-mode",this.cancelEditMode),this.getFileIcon()},beforeDestroy(){this.$root.$off("update-file-name",this.editFileName),this.$root.$off("cancel-edit-mode",this.cancelEditMode)},methods:{getFileIcon(){const e=extensionRegistry.loadExtensions("documents","documents-icons-extension");if(this.file?.folder)this.icon=e[0].get("folder");else{let t=e[0].get(this.file?.mimeType);t||(t=e[0].get("file")),this.icon=t}},editFileName(e){this.file.id===e.id&&(this.fileToEditId=e.id)},cancelEditMode(e){this.file.id===e.id&&(this.fileToEditId=-1)},fileInfo(){return`${this.$t("documents.preview.updatedOn")} ${this.absoluteDateModified()} ${this.$t("documents.preview.updatedBy")} ${this.file.lastEditor} ${this.file.size}`},absoluteDateModified(e){const t=eXo&&eXo.env&&eXo.env.portal&&eXo.env.portal.language||"en";return new Date(this.file.date).toLocaleString(t,e).split("/").join("-")},openPreview(){if(this.loading=!0,this.file&&this.file.folder)this.$root.$emit("document-open-folder",this.file);else{const e=this.file.id;this.$attachmentService.getAttachmentById(e).then((t=>{documentPreview.init({doc:{id:e,repository:"repository",workspace:"collaboration",title:decodeURI(t.title).lastIndexOf(".")>=0?decodeURI(t.title):decodeURI(t.title).concat(this.fileType),downloadUrl:t.downloadUrl,openUrl:t.openUrl,breadCrumb:t.previewBreadcrumb,fileInfo:this.fileInfo(),size:t.size,isCloudDrive:t.cloudDrive},author:t.updater,version:{number:t.version},showComments:!1,showOpenInFolderButton:!1})})).catch((e=>console.error(e))).finally((()=>{window.history.pushState("","",`${window.location.pathname}?documentPreviewId=${this.file.id}`),this.loading=!1}))}},displayActionMenu(){this.isMobile?this.$root.$emit("open-file-action-menu",this.file):(this.menuDisplayed=!0,$(`#document-action-menu-cel-${this.file.id}`).parent().parent().parent().parent().css("background","#eee"))},escapeRegExp:e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),highlightSearchResult(e,t){t=t.split(" ");const i=new RegExp(Object.keys(this.accentMap).join("|"),"g"),s=new RegExp(t.map((e=>this.escapeRegExp(e).toLowerCase().replace(i,(e=>this.accentMap[e]||e)))).join("|"),"gi");return e.toString().replace(s,(function(e){return`<b>${e}</b>`}))}}};var De=a(Ce,_e,[],!1,null,null,null);De.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsFileNameCell.vue";const Se=De.exports;var Me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-text-field",{ref:"autoFocusInput1",staticClass:"documentEditName text-color font-weight-bold width-full pt-0 pl-1",attrs:{height:"35px",type:"text",rules:e.nameRules,required:"",autofocus:"",outlined:"",dense:""},on:{focus:function(t){return e.editTitle()},blur:function(t){return e.cancelEditNameMode()},keyup:function(t){return e.checkInput(t,e.fileName)}},model:{value:e.fileName,callback:function(t){e.fileName=t},expression:"fileName"}},[i("div",{staticClass:"d-flex",attrs:{slot:"append"},slot:"append"},[e.isMobile?e._e():i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-icon",{staticClass:"primary--text ma-1 px-1",attrs:{title:e.$t("documents.save"),small:""},on:{click:function(t){return e.checkInput(13,e.fileName)}}},[e._v("\n      fa-check\n    ")]),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-icon",{staticClass:"clickable ma-1 px-1",attrs:{title:e.$t("documents.close"),color:"red",small:""},on:{click:function(t){return e.cancelEditNameMode(e.fileName)}}},[e._v("\n      fa-times\n    ")])],1)])};Me._withStripped=!0;var Fe=a({props:{file:{type:Object,default:null},editNameMode:{type:Boolean,default:!1},fileName:{type:String,default:""},fileType:{type:String,default:""},isMobile:{type:Boolean,default:!1}},data:()=>({editName:!1,nameRules:[],workspace:"collaboration",oldPath:"",nameRegex:/[<\\>:"/|?*]/}),created(){this.nameRules=[e=>!!e.trim(),e=>!this.nameRegex.test(e)],this.$root.$on("document-renamed",(e=>{e.id===this.file.id&&(this.file.name=this.fileName.concat(this.fileType),this.$root.$emit("cancel-edit-mode",this.file))}))},methods:{editTitle(){this.editNameMode=!0,this.$root.$emit("update-file-name",this.file)},cancelEditNameMode(){-1===this.file.id&&this.$root.$emit("cancel-add-folder",this.file),this.editNameMode=!1,this.$root.$emit("cancel-edit-mode",this.file)},checkInput:function(e,t){if(13===e.keyCode||13===e)if(this.file.folder&&-1===this.file.id){if(this.nameRegex.test(t))return void this.$root.$emit("show-alert",{type:"warning",message:this.$t("document.valid.name.error.message")});this.$root.$emit("documents-create-folder",t)}else this.renameFile(t);27===e.keyCode&&this.cancelEditNameMode(t)},renameFile(e){this.nameRegex.test(e)?this.$root.$emit("show-alert",{type:"warning",message:this.$t("document.valid.name.error.message")}):this.$root.$emit("documents-rename",this.file,e.concat(this.fileType))}}},Me,[],!1,null,null,null);Fe.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsFileEditNameCell.vue";const Ee=Fe.exports;var Ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-scale-transition",[e.isMobile?e._e():i("select",{directives:[{name:"model",rawName:"v-model",value:e.filterDocumentsSelected,expression:"filterDocumentsSelected"}],staticClass:"selectPrimaryFilter input-block-level ignore-vuetify-classes  pa-0 my-auto ml-2",attrs:{id:"filterDocumentsSelect",name:"documentsFilter"},on:{change:[function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.filterDocumentsSelected=t.target.multiple?i:i[0]},e.changeDocumentsFilter]}},e._l(e.filterDocuments,(function(t){return i("option",{key:t.name,domProps:{value:t.name}},[e._v("\n      "+e._s(e.$t("documents.filter."+t.name.toLowerCase()))+"\n    ")])})),0),e._v(" "),e.canShowMobileFilter?i("button",{staticClass:"px-3 width-max-content",class:e.btnClass,on:{click:function(t){return e.openDrawer()}}},[i("v-icon",{staticClass:"filterIcon",attrs:{size:"16"}},[e._v(" fa-sliders-h ")]),e._v(" "),e.filterNumber>0?i("span",[e._v("("+e._s(e.filterNumber)+")")]):e._e()],1):e._e()])};Ie._withStripped=!0;var ke=a({props:{isMobile:{type:Boolean,default:!1}},data:()=>({filterDocumentsSelected:"All",filterDocuments:[{name:"All"},{name:"Favorites"}],showMobileFilter:!1,query:"",extended:!1}),created(){this.$root.$on("show-mobile-filter",(e=>{this.showMobileFilter=e})),this.$root.$on("set-documents-filter",(e=>{this.filterDocumentsSelected=e})),this.$root.$on("set-documents-search",(e=>{this.query=e.query,this.extended=e.extended}))},computed:{canShowMobileFilter(){return this.isMobile&&this.showMobileFilter},filterNumber(){let e=0;return"all"!==this.filterDocumentsSelected.toLowerCase()&&e++,this.extended&&this.query&&e++,e},btnClass(){return this.filterNumber>0||this.query?"mobile-filter-button":"btn py-3"}},methods:{changeDocumentsFilter(){this.$root.$emit("documents-filter",this.filterDocumentsSelected.toLowerCase()),this.$root.$emit("set-mobile-filter",this.filterDocumentsSelected)},openDrawer(){this.$root.$emit("open-mobile-filter-menu",!0)}}},Ie,[],!1,null,null,null);ke.options.__file="src/main/webapp/vue-app/documents/components/header/actions/DocumentsFilter.vue";const Ae=ke.exports;var Te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-list",{attrs:{dense:""}},e._l(e.menuExtensions,(function(t,s){return i("v-list-item",{key:s,staticClass:"menu-list px-2 text-left action-menu-item"},[i("extension-registry-component",{staticClass:"width-full",attrs:{component:t,params:e.params,element:e.div}})],1)})),1)};Te._withStripped=!0;var Ne=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({menuExtensionApp:"DocumentMenu",menuExtensionType:"menuActionMenu",menuExtensions:{},editExtensions:["edit"],sharedDocumentSuspended:!0,downloadDocumentSuspended:!0,supportedDocuments:null}),created(){document.addEventListener(`extension-${this.menuExtensionApp}-${this.menuExtensionType}-updated`,this.refreshMenuExtensions),document.addEventListener("documents-supported-document-types-updated",this.refreshSupportedDocumentExtensions),this.refreshSupportedDocumentExtensions(),this.refreshMenuExtensions()},computed:{params(){return{file:this.file,isMobile:this.isMobile}},fileCanEdit(){const e=this.file&&this.file.mimeType||"";return this.supportedDocuments&&this.supportedDocuments.filter((t=>t.edit&&t.mimeType===e&&!this.file.cloudDriveFile)).length>0}},methods:{refreshSupportedDocumentExtensions(){this.supportedDocuments=extensionRegistry.loadExtensions("documents","supported-document-types")},refreshMenuExtensions(){let e=extensionRegistry.loadExtensions(this.menuExtensionApp,this.menuExtensionType);this.fileCanEdit||(e=e.filter((e=>!this.editExtensions.includes(e.id)))),e=e.filter((e=>e.enabled(this.file))),this.menuExtensions=e}}},Te,[],!1,null,null,null);Ne.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentActionMenu.vue";const Ve=Ne.exports;var Be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"documentActionsMobileMenu",staticClass:"mobileDrawer",attrs:{bottom:!0}},[i("template",{slot:"content"},[i("v-list",{attrs:{dense:""}},e._l(e.menuExtensions,(function(t,s){return i("v-list-item",{key:s,staticClass:"px-2 text-left",class:e.isMobile&&"mobile-menu-item"},[i("extension-registry-component",{staticClass:"width-full",attrs:{component:t,params:e.params,element:e.div}})],1)})),1),e._v(" "),i("exo-drawer")],1)],2)};Be._withStripped=!0;var Oe=a({props:{isMobile:{type:Boolean,default:!1}},data:()=>({file:null,menuExtensionApp:"DocumentMenu",menuExtensionType:"menuActionMenu",menuExtensions:{}}),computed:{params(){return{file:this.file,isMobile:this.isMobile}}},created(){this.$root.$on("open-file-action-menu",this.open),this.$root.$on("close-file-action-menu",this.close)},methods:{open(e){this.file=e,this.refreshMenuExtensions(),this.$refs.documentActionsMobileMenu.open()},close(){this.$refs.documentActionsMobileMenu.close()},refreshMenuExtensions(){let e=extensionRegistry.loadExtensions(this.menuExtensionApp,this.menuExtensionType);e=e.filter((e=>e.enabled(this.file,!0))),this.menuExtensions=e}}},Be,[],!1,null,null,null);Oe.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentActionMenuMobile.vue";const Pe=Oe.exports;var Le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"documentInfoDrawer",staticClass:"documentInfoDrawer",attrs:{right:""},on:{closed:e.close}},[i("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("documents.drawer.details.title"))+"\n  ")]),e._v(" "),e.file?i("template",{slot:"content"},[i("v-list-item",[i("v-list-item-content",{staticClass:"ma-1"},[i("a",{staticClass:"text-center not-clickable d-flex align-center"},[i("v-spacer"),e._v(" "),i("v-icon",{attrs:{color:e.iconColor}},[e._v(e._s(e.iconClass))]),e._v(" "),i("span",{staticClass:"fileName font-weight-bold text-color ms-2 px-2"},[e._v("\n            "+e._s(e.file.name)+"\n          ")]),e._v(" "),i("div",{staticClass:"d-flex align-center pb-1"},[e.file.versionNumber?i("span",{staticClass:"item-version text-caption border-radius primary pa-0 px-1 clickable",on:{click:e.showVersionHistory}},[e._v("\n              V"+e._s(e.file.versionNumber)+"\n            ")]):e._e(),e._v(" "),e.file.folder?e._e():i("documents-favorite-action",{attrs:{file:e.file,"is-mobile":e.isMobile}})],1),e._v(" "),i("v-spacer")],1)])],1),e._v(" "),e.showNoDescription?i("div",[i("div",{staticClass:"d-flex flex-row justify-center text-center pt-8"},[i("v-icon",{staticClass:"descriptionIcon",attrs:{size:"40"}},[e._v(" mdi-message-text-outline ")])],1),e._v(" "),i("div",{staticClass:"d-flex flex-column justify-center text-center pb-8"},[i("span",{staticClass:"descriptionText"},[e._v(e._s(e.$t("documents.message.noDescription")))]),e._v(" "),i("a",{staticClass:"align-center",on:{click:e.openEditor}},[i("span",[e._v(e._s(e.$t("documents.message.addYourDescription")))])])])]):e._e(),e._v(" "),i("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.hover;return i("div",{},[i("v-row",{staticClass:"col-12 py-4 pl-8"},[i("v-col",{staticClass:"col-11 px-0 py-0"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showDescription,expression:"showDescription"},{name:"sanitized-html",rawName:"v-sanitized-html",value:e.file.description,expression:"file.description"}],staticClass:"infoDescriptionToShow",attrs:{"data-text":e.placeholder,hover:s}},[e._v("\n              "+e._s(e.placeholder)+"\n            ")])]),e._v(" "),i("v-col",{staticClass:"col-1 px-0 py-0"},[i("v-tooltip",{attrs:{disabled:e.isMobile,bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on,n=t.attrs;return[i("v-icon",e._g(e._b({directives:[{name:"show",rawName:"v-show",value:e.showDescription&&(s||e.isMobile),expression:"showDescription && (hover || isMobile)"}],staticClass:"primary--text",attrs:{size:"16"},on:{click:e.openEditor}},"v-icon",n,!1),o),[e._v("\n                  "+e._s("fa fa-edit")+"\n                ")])]}}],null,!0)},[e._v(" "),i("span",[e._v(" "+e._s(e.$t("documents.drawer.details.description.edit"))+" ")])])],1)],1)],1)}}],null,!1,2011860497)}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.displayEditor,expression:"displayEditor"}],staticClass:"py-4 px-8"},[i("exo-activity-rich-editor",{ref:"activityShareMessage",staticClass:"flex",attrs:{"max-length":"1300",placeholder:e.$t("documents.alert.descriptionLimit")},model:{value:e.file.description,callback:function(t){e.$set(e.file,"description",t)},expression:"file.description"}})],1),e._v(" "),i("v-divider",{attrs:{dark:""}}),e._v(" "),[i("v-list-item",[i("v-list-item-content",{staticClass:"mt-4 mx-4"},[i("v-list-item-title",[i("span",{staticClass:"fileDetails text-color d-flex"},[i("span",{staticClass:"text-center not-clickable font-weight-bold"},[e._v(e._s(e.$t("documents.drawer.details.modified"))+":")]),e._v(" "),i("date-format",{staticClass:"document-date not-clickable text-no-wrap mx-1",attrs:{value:e.lastUpdated,format:e.fullDateFormat}}),e._v("\n              "+e._s(e.$t("documents.drawer.details.by"))+"\n              "),e.identityModifier&&!e.isCurrentUserModifier?i("exo-user-avatar",{staticClass:"text-decoration-underline text-truncate font-weight-bold mx-1",attrs:{identity:e.identityModifier,"avatar-class":"me-2",size:"42",fullname:"",popover:"","bold-title":"","link-style":"","username-class":""}}):i("p",{staticClass:"text-decoration-underline primary--text not-clickable font-weight-bold mx-1"},[e._v("\n                "+e._s(e.infoDrawerModifierLabel)+"\n              ")])],1)])],1)],1),e._v(" "),i("v-list-item",[i("v-list-item-content",{staticClass:"mx-4"},[i("v-list-item-title",[i("span",{staticClass:"fileDetails text-color d-flex "},[i("span",{staticClass:"text-center not-clickable font-weight-bold"},[e._v("\n                "+e._s(e.$t("documents.drawer.details.created"))+":")]),e._v(" "),i("date-format",{staticClass:"document-date not-clickable text-no-wrap mx-1",attrs:{value:e.fileCreated,format:e.fullDateFormat}}),e._v("\n              "+e._s(e.$t("documents.drawer.details.by"))+"\n\n              "),e.identityCreated&&!e.isCurrentUserCreator?i("exo-user-avatar",{staticClass:"text-decoration-underline text-truncate font-weight-bold mx-1",attrs:{identity:e.identityCreated,"avatar-class":"me-2",size:"42",fullname:"",popover:"","bold-title":"","link-style":"","extra-class":"text-decoration-underline","username-class":""}}):i("p",{staticClass:"text-decoration-underline not-clickable primary--text font-weight-bold mx-1"},[e._v("\n                "+e._s(e.infoDrawerCreatorLabel)+"\n              ")])],1)])],1)],1),e._v(" "),i("v-list-item",[i("v-list-item-content",{staticClass:"mx-4"},[i("v-list-item-title",[i("span",{staticClass:"fileDetails not-clickable text-color d-flex"},[i("span",{staticClass:"text-center font-weight-bold"},[e._v(e._s(e.$t("documents.drawer.details.size"))+":")]),e._v(" "),i("documents-file-size-cell",{staticClass:"mx-1 text-color",attrs:{file:e.file,"is-mobile":e.isMobile}})],1)])],1)],1)]],2):e._e(),e._v(" "),i("template",{slot:"footer"},[i("div",{staticClass:"d-flex"},[i("v-spacer"),e._v(" "),i("v-btn",{directives:[{name:"show",rawName:"v-show",value:e.displayEditor,expression:"displayEditor"}],staticClass:"primary btn no-box-shadow ms-auto",attrs:{id:"saveDescriptionButton",loading:e.savingDescription,disabled:e.disableButton,depressed:""},on:{click:e.updateDescription}},[e._v("\n        "+e._s(e.$t("documents.label.apply"))+"\n      ")])],1)])],2)};Le._withStripped=!0;var ze=a({props:{selectedView:{type:String,default:""},isMobile:{type:Boolean,default:!1}},data:()=>({fullDateFormat:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},currentUser:eXo.env.portal.userName,file:null,fileName:null,fileType:null,icon:null,displayEditor:!1,showNoDescription:!1,showDescription:!1,firstCreateDescription:!1,fileInitialDescription:""}),computed:{iconColor(){return this.icon&&this.icon.color},iconClass(){return this.icon&&this.icon.class},lastUpdated(){return this.file&&(this.file.modifiedDate||this.file.createdDate)||""},fileCreated(){return this.file&&this.file.createdDate||""},infoDrawerCreatorLabel(){return this.currentUser===this.file?.creatorIdentity?.remoteId?this.$t("documents.drawer.details.me"):this.$t("documents.drawer.details.system")},infoDrawerModifierLabel(){return this.currentUser===this.file?.modifierIdentity?.remoteId?this.$t("documents.drawer.details.me"):this.$t("documents.drawer.details.system")},isCurrentUserModifier(){return this.currentUser===this.file?.modifierIdentity?.remoteId},isCurrentUserCreator(){return this.currentUser===this.file?.creatorIdentity?.remoteId},identityModifier(){return this.file?.modifierIdentity},identityCreated(){return this.file?.creatorIdentity},disableButton(){return this.file.description&&this.file.description.replace(/(<([^>]+)>)/gi,"").length>1300||this.file.description===this.fileInitialDescription||!this.file.description&&!this.fileInitialDescription}},created(){this.$root.$on("open-info-drawer",this.open),this.$root.$on("close-info-drawer",this.close),this.$root.$on("version-number-updated",(e=>{this.file&&this.file.id===e&&this.file.versionNumber++})),document.addEventListener("search-metadata-tag",this.close)},methods:{showVersionHistory(){this.$root.$emit("show-version-history",this.file)},updateDescription(){this.firstCreateDescription?this.addDescriptionStatistics(this.file):this.updateDescriptionStatistics(this.file);const e=eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId;this.$documentFileService.updateDescription(e,this.file).then((()=>{this.isMobile?this.displayAlert(this.$t("documents.alert.success.description.updated")):this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.alert.success.description.updated")}),this.showDescription=this.file.description&&this.file.description.length,this.showNoDescription=!this.file.description,this.displayEditor=!1,this.fileInitialDescription=this.file.description}))},open(e,t,i,s){this.file=e,this.fileName=t,this.fileType=i,this.icon=s,this.displayEditor=!1,this.showNoDescription=!this.file.description&&!this.displayEditor,this.showDescription=this.file.description&&this.file.description.length&&!this.displayEditor,this.fileInitialDescription=this.file.description,this.$nextTick((()=>{this.$refs.documentInfoDrawer.open()}))},openEditor(){this.firstCreateDescription=this.showNoDescription,this.showNoDescription=!1,this.showDescription=!1,this.displayEditor=!0,this.originDescription=this.file.description},close(){this.file.description=this.fileInitialDescription,this.displayEditor=!1,this.showNoDescription=!1,this.showDescription=!0,this.$refs.documentInfoDrawer.close()},displayAlert(e,t){document.dispatchEvent(new CustomEvent("attachments-notification-alert",{detail:{messageObject:{message:e,type:t||"success"}}}))},addDescriptionStatistics(e){document.dispatchEvent(new CustomEvent("exo-statistic-message",{detail:{module:"Drive",subModule:"Documents",userId:eXo.env.portal.userIdentityId,userName:eXo.env.portal.userName,name:"actionCreateDescription",operation:"createDescription",parameters:{documentName:e.name,category:this.file.folder?"folderCategory":"documentCategory",spaceId:eXo.env.portal.spaceId,view:"timeline"===this.selectedView?"recentView":"folderView"},timestamp:Date.now()}}))},updateDescriptionStatistics(e){document.dispatchEvent(new CustomEvent("exo-statistic-message",{detail:{module:"Drive",subModule:"Documents",userId:eXo.env.portal.userIdentityId,userName:eXo.env.portal.userName,name:"actionUpdateDescription",operation:"updateDescription",parameters:{documentName:e.name,category:this.file.folder?"folderCategory":"documentCategory",spaceId:eXo.env.portal.spaceId,view:"timeline"===this.selectedView?"recentView":"folderView"},timestamp:Date.now()}}))}}},Le,[],!1,null,null,null);ze.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentInfoDrawer.vue";const Ue=ze.exports;var Xe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"documentsTreeSelectorDrawer",staticClass:"documentsTreeSelectorDrawer",attrs:{right:""},on:{closed:e.cancel},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[i("template",{slot:"title"},[i("span",{staticClass:"text-truncate",attrs:{title:e.drawerTitle}},[e._v(e._s(e.drawerTitle))])]),e._v(" "),e.file&&e.drawer?i("template",{slot:"content"},[i("v-layout",{staticClass:"mt-2",attrs:{column:""}},[i("v-list-item",[i("div",{staticClass:"d-flex align-center flex-grow-1"},[i("div",{staticClass:"pr-4 d-flex flex-grow-1"},[i("span",{staticClass:"font-weight-bold text-color text-no-wrap"},[e._v(e._s(e.$t("documents.move.drawer.space")))]),e._v(" "),i("div",{staticClass:"flex-grow-1"},[i("documents-move-spaces",{attrs:{space:e.space,"is-mobile":e.isMobile}})],1)])])]),e._v(" "),i("v-list-item",[i("div",{staticClass:"py-2 width-full"},[i("span",{staticClass:"font-weight-bold text-color text-no-wrap pb-2"},[e._v(e._s(e.$t("documents.move.drawer.currentPosition")))]),e._v(" "),i("documents-breadcrumb",{attrs:{"show-icon":!1,"documents-breadcrumb":e.documentsBreadcrumbSource,"disabled-icon-tree":!0,"is-mobile":e.isMobile,move:""}})],1)]),e._v(" "),i("v-list-item",[i("div",{staticClass:"py-2  width-full"},[i("span",{staticClass:"font-weight-bold text-color text-no-wrap pb-2"},[e._v(e._s(e.$t("documents.move.drawer.destination")))]),e._v(" "),i("documents-breadcrumb",{attrs:{"show-icon":!1,"documents-breadcrumb":e.documentsBreadcrumbDestination,"disabled-icon-tree":!0,"is-mobile":e.isMobile,move:""}})],1)]),e._v(" "),i("v-list-item",{staticClass:"position-title"},[i("div",{staticClass:"py-2"},[i("span",{staticClass:"font-weight-bold text-no-wrap text-color"},[e._v(e._s(e.$t("documents.move.drawer.position")))])])])],1),e._v(" "),[i("span",{staticClass:"text-color body-2 text-no-wrap px-4"},[e._v("\n        "+e._s(e.$t("documents.move.drawer.folder"))+"\n      ")]),e._v(" "),i("v-treeview",{staticClass:"treeView-item my-2",attrs:{open:e.openLevel,items:e.items,"item-key":"name",hoverable:"",activatable:"",transition:""},on:{"update:open":function(t){e.openLevel=t}},scopedSlots:e._u([{key:"label",fn:function(t){var s=t.item;return[i("div",{staticClass:"d-flex clickable",on:{click:function(t){return e.getDestination(s)}}},[i("v-icon",{staticClass:"primary--text",attrs:{size:"24"}},[e._v("\n              "+e._s("fas fa-folder")+"\n            ")]),e._v(" "),i("v-list-item-title",{staticClass:"body-2 mx-2 mt-1"},[e._v("\n              "+e._s(s.name)+"\n            ")])],1)]}}],null,!1,209958117)})]],2):e._e(),e._v(" "),i("template",{slot:"footer"},[i("div",{staticClass:"d-flex"},[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"btn ml-2",on:{click:function(t){return e.cancel()}}},[e._v("\n        "+e._s(e.$t("documents.move.drawer.button.cancel"))+"\n      ")]),e._v(" "),i("v-btn",{staticClass:"btn btn-primary ml-2",attrs:{disabled:e.disableButton,loading:e.isLoading},on:{click:function(t){return e.changeLocationDocument()}}},[e._v("\n        "+e._s(e.submitButton)+"\n      ")])],1)])],2)};Xe._withStripped=!0;var Re=a({props:{isMobile:{type:Boolean,default:!1}},data:()=>({ownerId:eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId,drawer:!1,items:[],documentsBreadcrumbDestination:[],documentsBreadcrumbSource:[],destinationFolderPath:"",currentFolderPath:"",spaceDisplayName:eXo.env.portal.spaceDisplayName,spaceName:eXo.env.portal.spaceName,userName:eXo.env.portal.userName,groupId:"",space:[],file:{},actionType:"",isLoading:!1}),computed:{openLevel(){return this.items&&this.items.length&&[this.items[0].name]||[]},disableButton(){return!this.space||this.space.displayName===this.spaceDisplayName&&this.destinationFolderPath&&this.destinationFolderPath===this.currentFolderPath},drawerTitle(){return"move"===this.actionType?this.$t("documents.move.drawer.title",{0:this.file?.name}):this.$t("documents.shortcut.drawer.title")},submitButton(){return"move"===this.actionType?this.$t("documents.move.drawer.button.move"):this.$t("documents.shortcut.drawer.button.create")}},created(){this.$root.$on("current-space",(e=>{const t=e?e.identity.id:null;this.items=[],this.space=e,this.groupId=e.groupId,this.documentsBreadcrumbDestination=[{name:"Documents"}],this.retrieveDocumentTree(t)})),this.$root.$on("open-document-tree-selector-drawer",((e,t)=>{this.actionType=t,e&&this.open(e)})),this.$root.$on("document-moved",(()=>{this.close()})),this.$root.$on("shortcut-created",(()=>{this.close()})),this.$root.$on("cancel-action",(()=>{this.cancel()}))},watch:{isLoading(){this.isLoading?this.$refs.documentsTreeSelectorDrawer.startLoading():this.$refs.documentsTreeSelectorDrawer.endLoading()}},methods:{open(e){this.file=e;const t=eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId;this.retrieveDocumentTree(t),this.space={displayName:this.spaceDisplayName?this.spaceDisplayName:this.userName,avatarUrl:this.spaceDisplayName?`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/spaces/${this.spaceName}/avatar`:`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/users/${this.userName}/avatar`};const i=this.file.path.lastIndexOf("/");this.currentFolderPath=this.file.path.substring(0,i);const s=eXo.env.portal.spaceName?"/Documents/":"/Private/",o=this.currentFolderPath.indexOf(s),n=o>=0?this.currentFolderPath.substring(o+s.length):"";this.getDestination(null,n).then((e=>this.documentsBreadcrumbSource=e.slice())),this.$refs.documentsTreeSelectorDrawer.open()},cancel(){this.close(),this.$root.$emit("cancel-alert-actions")},close(){this.isLoading=!1,this.$refs.documentsTreeSelectorDrawer.close()},getDestination(e,t){return this.folder=e,this.destinationFolderId=e?.id,this.$documentFileService.getBreadCrumbs(this.destinationFolderId,this.ownerId,!this.destinationFolderId&&t||null).then((e=>(this.documentsBreadcrumbDestination=e,this.destinationFolderId=this.documentsBreadcrumbDestination[this.documentsBreadcrumbDestination.length-1].id,this.destinationFolderPath=this.documentsBreadcrumbDestination[this.documentsBreadcrumbDestination.length-1].path,e)))},retrieveDocumentTree(e){this.$documentFileService.getFullTreeData(e).then((e=>{e&&(this.items=[],this.items=e,this.items.length>0&&(this.folder=this.items[0]))}))},changeLocationDocument(){this.isLoading=!0;const e=this.folder&&this.folder.path?this.folder.path:`/Groups${this.groupId}/Documents`;"move"===this.actionType&&this.$root.$emit("documents-move",this.ownerId,this.file,e,this.folder,this.space),"shortcut"===this.actionType&&this.$root.$emit("create-shortcut",this.file,e,this.folder,this.space)}}},Xe,[],!1,null,null,null);Re.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsTreeSelectorDrawer.vue";const qe=Re.exports;var je=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("v-container",{attrs:{"pa-0":"",fluid:"","d-flex":""}},[i("v-combobox",{ref:"select",staticClass:"pt-0 ps-2 mb-0 inputSpaceName",attrs:{items:e.spaces,filter:e.filterSpaces,attach:"",solo:""},on:{change:function(t){return e.deleteSpace()}},scopedSlots:e._u([{key:"selection",fn:function(t){var s=t.attrs,o=t.item,n=t.parent,a=t.selected;return[i("div",{staticClass:"identitySuggester no-border mt-0"},[o===Object(o)?i("v-chip",e._b({staticClass:"identitySuggesterItem me-2 mt-2",attrs:{"input-value":a,close:""},on:{"click:close":e.deleteSpace}},"v-chip",s,!1),[i("v-avatar",{attrs:{left:""}},[i("v-img",{attrs:{src:o.avatarUrl}})],1),e._v(" "),i("span",{staticClass:"body-2 text-truncate",on:{click:function(e){return n.selectItem(o)}}},[e._v("\n              "+e._s(o.displayName)+"\n            ")])],1):e._e()],1)]}},{key:"item",fn:function(t){var s=t.item;return[i("v-list-item",{on:{click:function(t){return e.updateSpace(s)}}},[i("div",{staticClass:"identitySuggester width-fit-content no-border mt-0"},[i("v-chip",{staticClass:"identitySuggesterItem me-2 mt-2",attrs:{close:""}},[i("v-avatar",{attrs:{left:""}},[i("v-img",{attrs:{src:s.avatarUrl}})],1),e._v(" "),i("span",{staticClass:"text-truncate"},[e._v("\n                "+e._s(s.displayName)+"\n              ")])],1)],1)])]}}]),model:{value:e.spaceModel,callback:function(t){e.spaceModel=t},expression:"spaceModel"}})],1)],1)};je._withStripped=!0;var He=a({props:{space:{type:Object,default:()=>({})}},data:()=>({spaces:[],spaceModel:null,search:null,offset:0,limit:20,spacesSize:0,loadingSpaces:!1}),watch:{spacesSize(){this.loadingSpaces&&this.spacesSize>=this.limit&&(this.limit+=this.spacesSize,this.getSpaces())}},created(){this.getSpaces(),this.spaceModel=this.space,$(document).on("mousedown",(()=>{this.$refs?.select?.isMenuActive&&window.setTimeout((()=>{this.$refs?.select?.isMenuActive&&(this.$refs.select.isMenuActive=!1)}),200)}))},methods:{getSpaces(){this.loadingSpaces=!0,this.$spaceService.getSpaces(this.query,0,this.limit,"member","identity").then((e=>{this.spaces=e.spaces,this.spacesSize=e&&e.size||0})).finally((()=>this.loadingSpaces=!1))},filterSpaces:(e,t)=>e.displayName.toLocaleLowerCase().indexOf(t.toLocaleLowerCase())>-1,updateSpace(e){this.$root.$emit("current-space",e),this.spaceModel=e},deleteSpace(){this.spaceModel=null,this.$root.$emit("current-space",null)}}},je,[],!1,null,null,null);He.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsMoveSpaces.vue";const Ke=He.exports;var Ye=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("exo-drawer",{ref:"documentVisibilityDrawer",staticClass:"documentVisibilityDrawer",attrs:{right:""},on:{closed:e.close}},[i("template",{slot:"title"},[i("span",{staticClass:"text-truncate",attrs:{title:e.visibilityTitle}},[e._v(e._s(e.visibilityTitle))])]),e._v(" "),i("template",{slot:"content"},[i("v-list-item",[i("v-list-item-content",{staticClass:"my-1"},[i("exo-user-avatar",{attrs:{identity:e.ownerIdentity,"avatar-class":"me-2",size:"42","bold-title":""}},[i("template",{slot:"subTitle"},[i("span",{staticClass:"caption font-italic"},[e._v("\n                "+e._s(e.$t("documents.label.owner"))+"\n              ")])])],2)],1)],1),e._v(" "),i("v-divider",{staticClass:"mx-4",attrs:{dark:""}}),e._v(" "),i("v-list-item",[i("v-list-item-content",{staticClass:"my-1"},[i("div",{staticClass:"my-4"},[i("v-label",{attrs:{for:"choice"}},[e.file.folder?i("span",{staticClass:"font-weight-bold text-start text-color body-2"},[e._v(e._s(e.$t("documents.label.folders.visibility.choice")+" :"))]):i("span",{staticClass:"font-weight-bold text-start text-color body-2"},[e._v(e._s(e.$t("documents.label.visibility.choice")+" :"))])]),e._v(" "),i("v-select",{staticClass:"caption",attrs:{items:e.visibilityLabel,"item-text":"text","item-value":"value",dense:"",outlined:""},model:{value:e.file.acl.visibilityChoice,callback:function(t){e.$set(e.file.acl,"visibilityChoice",t)},expression:"file.acl.visibilityChoice"}})],1),e._v(" "),e.showSwitch?i("div",{staticClass:"d-flex flex-row my-4"},[i("v-label",{attrs:{for:"visibility"}},[i("span",{staticClass:"text-color body-2 mr-6"},[e._v("\n                "+e._s(e.$t("documents.label.visibility.allowEveryone"))+"\n              ")]),e._v(" "),i("p",{staticClass:"caption"},[e._v(" "+e._s(e.infoMessage)+" ")])]),e._v(" "),i("v-spacer"),e._v(" "),i("v-switch",{staticClass:"mt-0 me-1",model:{value:e.file.acl.allMembersCanEdit,callback:function(t){e.$set(e.file.acl,"allMembersCanEdit",t)},expression:"file.acl.allMembersCanEdit"}})],1):e._e()])],1),e._v(" "),i("v-divider",{staticClass:"mx-4",attrs:{dark:""}}),e._v(" "),i("v-list-item",{staticClass:"d-block"},[i("v-list-item-content",{staticClass:"my-1"},[i("div",{staticClass:"d-flex"},[i("v-label",{attrs:{for:"collaborator"}},[i("span",{staticClass:"font-weight-bold text-start text-color body-2"},[e._v(e._s(e.$t("documents.label.visibility.collaborator")))])]),e._v(" "),e.isMobile?e._e():i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,o=t.attrs;return[i("v-icon",e._g(e._b({staticClass:"px-2 iconStyle",attrs:{color:"grey lighten-1",dark:"",size:"16"},on:{mouseenter:function(t){return e.applyItemClass()}}},"v-icon",o,!1),s),[e._v("\n                  fa-info-circle\n                ")])]}}],null,!1,3142392449)},[e._v(" "),e.file.folder?i("span",{staticClass:"center lotfi"},[e._v(e._s(e.$t("documents.label.folders.visibility.collaborator.info")))]):i("span",{staticClass:"center lotfi"},[e._v(e._s(e.$t("documents.label.visibility.collaborator.info")))])])],1)]),e._v(" "),i("exo-identity-suggester",{ref:"invitedCollaborators",attrs:{labels:e.suggesterLabels,"search-options":e.searchOptions,"ignore-items":e.ignoreItems,name:"collaborator","type-of-relations":"user_to_invite",height:"40","group-member":e.userGroup,"group-type":e.groupType,"all-groups-for-admin":e.allGroupsForAdmin,"include-users":"","include-spaces":"","include-groups":""},model:{value:e.collaborators,callback:function(t){e.collaborators=t},expression:"collaborators"}})],1),e._v(" "),e.users.length?i("div",[e._l(e.usersToDisplay,(function(t){return i("documents-visibility-collaborators",{key:t,attrs:{user:t,"is-mobile":e.isMobile},on:{"remove-user":e.removeUser,"set-visibility":e.setUserVisibility}})})),e._v(" "),i("div",{staticClass:"seeMoreUsers"},[e.users.length>e.maxUsersToShow?i("div",{staticClass:"seeMoreItem  clickable center ",on:{click:function(t){return e.displayAllListUsers()}}},[i("span",{staticClass:"seeMoreUsersList text-sub-title clickable"},[e._v("+"+e._s(e.showMoreUsersNumber))])]):e._e()])],2):e._e()],1),e._v(" "),i("template",{slot:"footer"},[i("div",{staticClass:"d-flex"},[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"btn me-2",on:{click:function(t){return e.close()}}},[e._v("\n          "+e._s(e.$t("documents.label.visibility.cancel"))+"\n        ")]),e._v(" "),i("v-btn",{staticClass:"btn btn-primary",attrs:{loading:e.loading},on:{click:function(t){return e.saveVisibility()}}},[e._v("\n          "+e._s(e.$t("documents.label.visibility.save"))+"\n        ")])],1)])],2),e._v(" "),i("documents-visibility-all-users-drawer",{ref:"documentAllUsersVisibilityDrawer",attrs:{users:e.users,"is-mobile":e.isMobile}})],1)};Ye._withStripped=!0;var Ge=a({props:{isMobile:{type:Boolean,default:!1}},data:()=>({loading:!1,allGroupsForAdmin:!0,userGroup:"/platform/users",groupType:"GROUP",ownerIdentity:{id:"system",providerId:"system",remoteId:"system",name:"system",fullname:"System",avatar:"/portal/rest/v1/social/users/default-image/avatar"},file:{acl:{visibilityChoice:"ALL_MEMBERS"}},collaborators:[],searchOptions:{currentUser:""},users:[]}),computed:{ignoreItems:()=>eXo.env.portal.spaceName&&[`space:${eXo.env.portal.spaceName}`]||[],visibilityTitle(){return this.$t("documents.label.visibilityTitle",{0:this.file?.name})},visibilityLabel(){return[{text:this.$t("documents.label.visibility.allMembers"),value:"ALL_MEMBERS"},{text:this.$t("documents.label.visibility.specific"),value:"SPECIFIC_COLLABORATOR"}]},infoMessage(){switch(this.file.acl.visibilityChoice){case"SPECIFIC_COLLABORATOR":return this.file.folder?this.$t("documents.label.folders.visibility.user.info"):this.$t("documents.label.visibility.user.info");case"ALL_MEMBERS":return this.file.acl.allMembersCanEdit?this.$t("documents.label.visibility.allMembers.info"):this.$t("documents.label.visibility.specific.info");default:return this.$t("documents.label.visibility.allMembers.info")}},showSwitch(){return"ALL_MEMBERS"===this.file.acl.visibilityChoice},suggesterLabels(){return{searchPlaceholder:this.$t("documents.label.visibility.searchPlaceholder"),placeholder:this.$t("documents.label.visibility.placeholder"),noDataLabel:this.$t("documents.label.visibility.noDataLabel")}},maxUsersToShow(){return this.$vuetify.breakpoint.width<1600?2:4},usersToDisplay(){return this.users.length>this.maxUsersToShow?this.users.slice(0,this.maxUsersToShow):this.users},showMoreUsersNumber(){return`${this.users.length-this.maxUsersToShow} ${this.$t("documents.label.visibility.others")}`}},watch:{collaborators(){this.collaborators?(this.users.find((e=>e.remoteId===this.collaborators.remoteId&&e.providerId===this.collaborators.providerId))||this.collaborators.id===this.ignoreItems[0]||this.users.push(this.mapCollaborator(this.collaborators)),this.collaborators=null):this.$nextTick(this.$refs.invitedCollaborators.$refs.selectAutoComplete.deleteCurrentItem)}},created(){this.$root.$on("open-visibility-drawer",(e=>{this.open(e)})),this.$root.$on("visibility-saved",(()=>{this.loading=!1,this.$refs.documentVisibilityDrawer.endLoading(),this.close()}))},methods:{mapCollaborator(e){const t=e.profile&&e.profile.fullName&&e.profile.fullName.substring(0,e.profile.fullName.lastIndexOf(" ("));return{permission:e.permission||"read",id:e.id,profile:{fullName:t},name:e.displayName||t,remoteId:e.remoteId,providerId:e.providerId,avatar:e.profile.avatarUrl}},applyItemClass(){window.setTimeout((()=>{const e=document.getElementsByClassName("v-tooltip__content");for(let t=0;t<e.length;t++)e[t].innerText.includes(this.$t("documents.label.visibility.collaborator.info"))&&(e[t].style.left="880px")}),100)},open(e){this.file=e,this.file?.creatorIdentity?.remoteId&&this.$userService.getUser(this.file.creatorIdentity.remoteId).then((e=>{this.ownerIdentity=e})),this.users=[];for(const t of e.acl.collaborators){const e=t.identity;e.permission=t.permission,this.users.push(e)}this.$refs.documentVisibilityDrawer.open()},close(){this.$refs.documentVisibilityDrawer.close()},displayAllListUsers(){this.$refs.documentAllUsersVisibilityDrawer.open()},saveVisibility(){this.loading=!0,this.$refs.documentVisibilityDrawer.startLoading();const e=[];for(const t of this.users){const i={permission:t.permission||"read",identity:{id:t.id,name:t.name,profile:{fullName:t.fullName},remoteId:t.remoteId,avatar:t.avatar,providerId:t.providerId}};e.push(i)}this.file.acl.collaborators=e,"SPECIFIC_COLLABORATOR"===this.file.acl.visibilityChoice&&(this.file.acl.allMembersCanEdit=!1),this.$root.$emit("save-visibility",this.file)},removeUser(e){const t=this.users.findIndex((t=>e.remoteId===t.remoteId));t>=0&&this.users.splice(t,1)},setUserVisibility(e){const t=this.users.findIndex((t=>e.remoteId===t.remoteId));t>=0&&(this.users[t].permission=e.permission)}}},Ye,[],!1,null,null,null);Ge.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsVisibilityDrawer.vue";const Je=Ge.exports;var We=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"documentAllUsersVisibilityDrawer",staticClass:"documentAllUsersVisibilityDrawer",attrs:{right:""},on:{closed:e.close}},[i("template",{slot:"title"},[i("div",{staticClass:"d-flex"},[i("v-icon",{staticClass:"clickable",attrs:{size:"16",color:"grey lighten-1"},on:{click:function(t){return e.close()}}},[e._v("\n        fas fa-arrow-left\n      ")]),e._v(" "),i("span",{staticClass:"ps-2"},[e._v(e._s(e.specificCollaborators))])],1)]),e._v(" "),i("template",{slot:"content"},[e.users.length?i("div",{staticClass:"my-4"},e._l(e.users,(function(t){return i("documents-visibility-collaborators",{key:t,attrs:{user:t,"is-mobile":e.isMobile},on:{"remove-user":e.removeUser,"set-visibility":e.setUserVisibility}})})),1):e._e()]),e._v(" "),i("template",{slot:"footer"},[i("div",{staticClass:"d-flex"},[i("v-spacer"),e._v(" "),i("v-btn",{staticClass:"btn me-2",on:{click:function(t){return e.close()}}},[e._v("\n        "+e._s(e.$t("documents.label.visibility.cancel"))+"\n      ")]),e._v(" "),i("v-btn",{staticClass:"btn btn-primary",on:{click:function(t){return e.saveVisibility()}}},[e._v("\n        "+e._s(e.$t("documents.label.visibility.save"))+"\n      ")])],1)])],2)};We._withStripped=!0;var Qe=a({props:{users:{type:Array,default:()=>[]},isMobile:{type:Boolean,default:!1}},data:()=>({ownerIdentity:[],file:{acl:{visibilityChoice:"ALL_MEMBERS"}}}),computed:{specificCollaborators(){return this.$t("documents.label.visibility.specificCollaborator")}},methods:{open(){this.$refs.documentAllUsersVisibilityDrawer.open()},close(){this.$refs.documentAllUsersVisibilityDrawer.close()},saveVisibility(){const e=[];for(const t of this.users){const i={permission:t.permission||"read",identity:{id:t.id,name:t.displayName||t.fullName,remoteId:t.remoteId,providerId:t.providerId}};e.push(i)}this.file.acl.collaborators=e,"SPECIFIC_COLLABORATOR"===this.file.acl.visibilityChoice&&(this.file.acl.allMembersCanEdit=!1),this.$root.$emit("save-visibility",this.file),this.close()},removeUser(e){const t=this.users.findIndex((t=>e.remoteId===t.remoteId));t>=0&&this.users.splice(t,1)},setUserVisibility(e){const t=this.users.findIndex((t=>e.remoteId===t.remoteId));t>=0&&(this.users[t].permission=e.permission)}}},We,[],!1,null,null,null);Qe.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsAllUsersVisibilityDrawer.vue";const Ze=Qe.exports;var et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"d-flex"},[i("div",{staticClass:"profile-popover user-wrapper pl-4 pt-2 pb-1"},[i("a",{staticClass:"d-flex not-clickable flex-nowrap flex-grow-1 text-truncate container--fluid align-center"},["group"===e.user.providerId?i("v-icon",{staticClass:"fas fa-users",attrs:{size:"19"}}):i("v-avatar",{staticClass:"ma-0",attrs:{size:"32"}},[i("img",{staticClass:"object-fit-cover ma-auto",attrs:{src:e.avatarUrl,alt:e.displayName,loading:"lazy",role:"presentation"}})]),e._v(" "),e.displayName||e.$slots.subTitle?i("div",{staticClass:"ms-2 overflow-hidden"},[e.displayName?i("p",{staticClass:"text-truncate subtitle-2 text-color text-left mb-0 font-weight-bold"},[e._v("\n          "+e._s(e.displayName)+"\n        ")]):e._e()]):e._e()],1)]),e._v(" "),i("v-spacer"),e._v(" "),i("div",{staticClass:"my-auto d-flex pe-2"},[e.userVisibility&&"edit"===e.userVisibility||"edit"===e.user.permission?i("v-icon",{staticClass:"pb-2",attrs:{color:"grey lighten-1",size:16}},[e._v("\n      fas fa-edit\n    ")]):i("v-icon",{staticClass:"pb-2",attrs:{color:"grey lighten-1",size:16}},[e._v("\n      fas fa-eye\n    ")]),e._v(" "),i("documents-visibility-menu",{attrs:{"is-mobile":e.isMobile},on:{"visibility-user":e.visibilityUser}}),e._v(" "),i("v-divider",{attrs:{vertical:""}}),e._v(" "),i("v-icon",{staticClass:"pe-5 iconStyle",attrs:{title:e.$t("documents.label.visibility.remove"),size:16,color:"grey lighten-1"},on:{click:function(t){return e.$emit("remove-user",e.user)}}},[e._v("\n      fas fa-trash\n    ")])],1)],1)};et._withStripped=!0;var tt=a({props:{user:{type:Object,default:()=>({})},isMobile:{type:Boolean,default:!1}},data:()=>({userVisibility:null}),computed:{avatarUrl(){const e=this.user&&(this.user.profile||this.user.space);return e&&(e.avatarUrl||e.avatar)||this.user&&this.user.avatar},displayName(){const e=this.user&&(this.user.profile||this.user.space);return e&&(e.displayName||e.fullName&&e.fullName.substring(0,e.fullName.lastIndexOf(" (")))||this.user&&(this.user.name||this.user.displayName)}},methods:{visibilityUser(e){this.userVisibility=e,this.user.permission=e,this.$emit("set-visibility",this.user)}}},et,[],!1,null,null,null);tt.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsVisibilityCollaborators.vue";const it=tt.exports;var st=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"text-center pe-1"},[i("v-menu",{attrs:{transition:"slide-x-reverse-transition",bottom:"","offset-y":"",left:"","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,o=t.attrs;return[i("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",o,!1),s),[i("v-icon",{staticClass:"pb-2",attrs:{size:16}},[e._v("\n          mdi-chevron-down\n        ")])],1)]}}]),model:{value:e.showMenu,callback:function(t){e.showMenu=t},expression:"showMenu"}},[e._v(" "),i("v-list",{staticClass:"pa-0"},e._l(e.accessibilityLabel,(function(t,s){return i("v-list-item",{key:s,staticClass:"custom-list-item-min-height"},[i("v-list-item-title",{staticClass:"clickable",on:{click:function(i){return e.$emit("visibility-user",t.value)}}},[i("v-icon",{staticClass:"pb-1",attrs:{size:13}},[e._v("\n            "+e._s(t.icon)+"\n          ")]),e._v(" "),i("span",{staticClass:"text-font-size"},[e._v("\n            "+e._s(t.title)+"\n          ")])],1)],1)})),1)],1)],1)};st._withStripped=!0;var ot=a({data:()=>({showMenu:!1,items:[{title:"edit"},{title:"read"}]}),created(){$(document).on("mousedown",(()=>{this.showMenu&&window.setTimeout((()=>{this.showMenu=!1}),200)}))},computed:{accessibilityLabel(){return[{icon:"fas fa-edit",title:this.$t("documents.label.accessibility.edit"),value:"edit"},{icon:"fas fa-eye",title:this.$t("documents.label.accessibility.view"),value:"read"}]}}},st,[],!1,null,null,null);ot.options.__file="src/main/webapp/vue-app/documents/components/body/table/DocumentsVisibilityMenu.vue";const nt=ot.exports;var at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable mx-2",on:{click:function(t){return e.editFile()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13",dark:""}},[e._v("\n    fas fa-edit\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("document.label.edit")))])],1)};at._withStripped=!0;var rt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},computed:{fileId(){return this.file&&this.file.sourceID||this.file.id}},methods:{editFile(){this.fileId&&window.open(`${eXo.env.portal.context}/${eXo.env.portal.portalName}/oeditor?docId=${this.fileId}&source=peview`,"_blank")}}},at,[],!1,null,null,null);rt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/EditMenuAction.vue";const lt=rt.exports;var ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"downloadDocumentNewApp clickable mx-2",on:{click:function(t){return e.download()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fas fa-download\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.download")))])],1)};ct._withStripped=!0;var dt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},computed:{spaceId:()=>eXo.env.portal.spaceId},methods:{download(){this.$attachmentService.getAttachmentById(this.file.id).then((e=>{this.downloadUrl=e.downloadUrl})).catch((e=>console.error(e))).finally((()=>{const e=this.downloadUrl,t=this.file.name;if(e.indexOf("/")>0&&!e.includes(window.location.hostname))return;const i=document.createElement("a");i.href=e,i.download=t.replace(/\[[0-9]*\]$/g,""),document.body.appendChild(i),i.click(),i.remove(),document.dispatchEvent(new CustomEvent("download-file",{detail:{type:"file",id:this.file.id,spaceId:this.spaceId}}))})),this.isMobile&&this.$root.$emit("close-file-action-menu")}}},ct,[],!1,null,null,null);dt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/DownloadMenuAction.vue";const ut=dt.exports;var pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable pt-1 mx-2",on:{click:function(t){return e.moveDocument()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fa-arrows-alt\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("document.label.move")))])],1)};pt._withStripped=!0;var mt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},methods:{moveDocument(){this.$root.$emit("open-document-tree-selector-drawer",this.file,"move"),this.isMobile&&this.$root.$emit("close-file-action-menu")}}},pt,[],!1,null,null,null);mt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/MoveMenuAction.vue";const ht=mt.exports;var ft=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable pt-1 mx-2",on:{click:function(t){return e.duplicate()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fas fa-clone\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.duplicate")))])],1)};ft._withStripped=!0;var vt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({workspace:"collaboration"}),methods:{duplicate(){this.$root.$emit("duplicate-document",this.file),this.isMobile&&this.$root.$emit("close-file-action-menu")}}},ft,[],!1,null,null,null);vt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/DuplicateMenuAction.vue";const bt=vt.exports;var yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable ma-auto pt-1 mx-2",on:{click:function(t){return e.changeVisibility()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fas fa-eye\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.visibility")))])],1)};yt._withStripped=!0;var wt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({viewTab:"RECENT",spaceId:eXo.env.portal.spaceId}),methods:{changeVisibility(){this.$root.$emit("open-visibility-drawer",this.file),this.getDocumentView(),document.dispatchEvent(new CustomEvent("manage-access",{detail:{category:this.file.folder?"Folder":"Document",spaceId:this.spaceId,view:this.viewTab}})),this.isMobile&&this.$root.$emit("close-file-action-menu")},getDocumentView(){const e=window.location.search,t=new URLSearchParams(e);if(t.has("view")){const e=t.get("view");this.viewTab="folder"===e.toLowerCase()?"Folder":"RECENT"}}}},yt,[],!1,null,null,null);wt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/VisibilityMenuAction.vue";const gt=wt.exports;var xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable mx-2",on:{click:function(t){return t.preventDefault(),e.hitFavoriteButton.apply(null,arguments)}}},[i("favorite-button",{staticClass:"favoriteDoc",attrs:{id:e.fileId,"space-id":e.spaceId,favorite:e.isFavorite,type:"file","type-label":"Documents"},on:{removed:e.removed,"remove-error":e.removeError,added:e.added,"add-error":e.addError}}),e._v(" "),i("span",{staticClass:"pt-1"},[e._v(e._s(e.favoriteLabel))]),e._v(" "),i("v-divider",{staticClass:"mt-1 dividerStyle"})],1)};xt._withStripped=!0;var _t=a({props:{file:{type:Object,default:null},extension:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({isFavorite:!1,displayActionMenu:!1}),computed:{fileId(){return this.file&&this.file.id},spaceId:()=>eXo.env.portal.spaceId||0,favoriteLabel(){return this.isFavorite?this.$t("documents.label.remove.favorite"):this.$t("documents.label.add.favorite")}},created(){$(document).on("mousedown",(()=>{this.displayActionMenu&&window.setTimeout((()=>{this.displayActionMenu=!1}),200)})),this.isFavorite=this.file&&this.file.metadatas&&this.file.metadatas.favorites&&this.file.metadatas.favorites.length},methods:{removed(){this.isFavorite=!this.isFavorite,this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyDeletedFavorite",{0:this.$t("file.label")})),this.$emit("removed"),this.isMobile&&this.$root.$emit("close-file-action-menu")},removeError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorDeletingFavorite",{0:this.$t("file.label")}),"error")},added(){this.isFavorite=!this.isFavorite,this.displayAlert(this.$t("Favorite.tooltip.SuccessfullyAddedAsFavorite",{0:this.$t("file.label")})),this.$emit("added"),this.isMobile&&this.$root.$emit("close-file-action-menu")},addError(){this.displayAlert(this.$t("Favorite.tooltip.ErrorAddingAsFavorite",{0:this.$t("file.label")}),"error")},hitFavoriteButton(){$(`#FavoriteLink_file_${this.fileId}`).click()},displayAlert(e,t){document.dispatchEvent(new CustomEvent("attachments-notification-alert",{detail:{messageObject:{message:e,type:t||"success"}}}))}}},xt,[],!1,null,null,null);_t.options.__file="src/main/webapp/vue-app/documents/components/body/actions/FavoriteMenuAction.vue";const $t=_t.exports;var Ct=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable pt-1 mx-2",on:{click:function(t){return e.editNameMode()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    mdi-form-textbox\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("document.label.rename")))]),e._v(" "),e.isMobile?e._e():i("v-divider",{staticClass:"mt-1 dividerStyle"})],1)};Ct._withStripped=!0;var Dt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({editName:!1}),methods:{editNameMode(){this.$root.$emit("update-file-name",this.file),this.isMobile&&this.$root.$emit("close-file-action-menu")}}},Ct,[],!1,null,null,null);Dt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/RenameMenuAction.vue";const St=Dt.exports;var Mt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable pt-1 mx-2",on:{click:function(t){return e.copyLink()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    mdi-link-variant\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.copy.link")))]),e._v(" "),e.file.cloudDriveFolder?e._e():i("v-divider",{staticClass:"mt-1 dividerStyle"})],1)};Mt._withStripped=!0;var Ft=a({props:{file:{type:Object,default:null}},data:()=>({viewTab:"RECENT",spaceId:eXo.env.portal.spaceId}),methods:{copyLink(){const e=$("<input>");let t=`${window.location.href.toLowerCase().split(eXo.env.portal.selectedNodeUri.toLowerCase())[0]}${eXo.env.portal.selectedNodeUri}`;t=this.file.folder?`${t}?folderId=${this.file.id}`:`${t}?documentPreviewId=${this.file.id}`,$("body").append(e),e.val(t).select(),document.execCommand("copy"),e.remove(),this.$root.$emit("show-alert",{type:"success",message:this.$t("documents.alert.success.label.linkCopied")}),this.getDocumentView(),document.dispatchEvent(new CustomEvent("document-change",{detail:{category:this.file.folder?"Folder":"Document",spaceId:this.spaceId,name:"Action copy link",view:this.viewTab}})),this.$root.$emit("close-file-action-menu")},getDocumentView(){const e=window.location.search,t=new URLSearchParams(e);if(t.has("view")){const e=t.get("view");this.viewTab="folder"===e.toLowerCase()?"Folder":"RECENT"}}}},Mt,[],!1,null,null,null);Ft.options.__file="src/main/webapp/vue-app/documents/components/body/actions/CopyLinkMenuAction.vue";const Et=Ft.exports;var It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.documentsBreadcrumbToDisplay.length?i("div",{staticClass:"documents-breadcrumb-wrapper"},[i("div",{staticClass:"documents-tree-items d-flex align-center"},[i("v-btn",{staticClass:"me-2",attrs:{icon:"",small:"",disabled:e.disabledIconTree},on:{click:function(t){return e.openTreeFolderDrawer()}}},[i("v-icon",{staticClass:"text-sub-title",attrs:{size:"16"}},[e._v("\n        fas fa-sitemap\n      ")])],1),e._v(" "),e._l(e.documentsBreadcrumbToDisplay,(function(t,s){return i("div",{key:s,staticClass:"documents-tree-item d-flex text-truncate",class:1===e.documentsBreadcrumbToDisplay.length?"single-path-element":""},[i("v-tooltip",{attrs:{"max-width":"300",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(o){var n=o.on,a=o.attrs;return[i("v-btn",e._g(e._b({staticClass:"pa-0 flex-shrink-1 text-truncate documents-breadcrumb-element",class:e.documentsBreadcrumbToDisplay[e.documentsBreadcrumbToDisplay.length-1].id===e.actualFolderId?"clickable":"",attrs:{height:"20px","min-width":"45px",text:"",disabled:e.disabledIconTree},on:{click:function(i){return e.openFolder(t)}}},"v-btn",a,!1),n),[i("a",{staticClass:"caption text-truncate",class:s<e.documentsBreadcrumbToDisplay.length-1?"path-clickable text-sub-title":"text-color not-clickable",attrs:{id:e.move?"breadCrumb-link-move":"breadCrumb-link"}},[e._v(e._s(e.getName(t.name)))]),e._v(" "),t.symlink?i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"10"}},[e._v("\n              mdi-link-variant\n            ")]):e._e()],1)]}}],null,!0)},[e._v(" "),i("span",{staticClass:"caption breadcrumbName"},[e._v("\n          "+e._s(e.getName(t.name))+"\n          "),t.symlink?i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"10"}},[e._v("\n            mdi-link-variant\n          ")]):e._e()],1)]),e._v(" "),s<e.documentsBreadcrumbToDisplay.length-1?i("v-icon",{class:e.move?"px-1":"px-3",attrs:{size:e.move?12:14}},[e._v("\n        fa-chevron-right\n      ")]):e._e()],1)}))],2)]):e._e()};It._withStripped=!0;var kt=a({props:{documentsBreadcrumb:{type:Array,default:()=>[]},showIcon:{type:Boolean,default:!0},move:{type:Boolean,default:!1},disabledIconTree:{type:Boolean,default:!1}},data:()=>({id:Math.random().toString(16),actualFolderId:"",folderPath:"",currentFolderPath:"",ownerId:eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId}),computed:{documentsBreadcrumbToDisplay(){if(this.$root.$emit("documentsBreadcrumb",this.documentsBreadcrumb),!this.documentsBreadcrumb||this.documentsBreadcrumb.length<=4)return this.documentsBreadcrumb||[];{const e=this.documentsBreadcrumb.length,t=[this.documentsBreadcrumb[0],...this.documentsBreadcrumb.slice(e-3,e)];return t[1]=Object.assign({},t[1],{name:"..."}),t}}},created(){this.$root.$on("set-breadcrumb",this.setBreadcrumb),this.$root.$on("update-breadcrumb",this.updateBreadcrumb),this.$root.$on("open-folder",this.openFolder)},beforeDestroy(){this.$root.$off("set-breadcrumb",this.setBreadcrumb),this.$root.$off("update-breadcrumb",this.updateBreadcrumb),this.$root.$off("open-folder",this.openFolder)},methods:{setBreadcrumb(e){this.folderPath="",e&&(this.actualFolderId=e.id,this.getBreadCrumbs())},openFolder(e){"Private"===e.name?(this.$root.$emit("document-open-home"),this.folderPath="",this.actualFolderId="",this.getBreadCrumbs()):e.id!==this.actualFolderId&&(this.folderPath="",this.actualFolderId=e.id,this.getBreadCrumbs(),this.$root.$emit("document-open-folder",e))},openTreeFolderDrawer(){this.$root.$emit("documentsBreadcrumb",this.documentsBreadcrumb),this.$root.$emit("openTreeFolderDrawer")},getName(e){return"Private"===e?this.$t("documents.label.userHomeDocuments"):e},getDocumentDataFromUrl(){const e=window.location.search,t=new URLSearchParams(e);if(t.has("path")){const e=eXo.env.portal.spaceName?"/Documents/":"/Private/",i=t.get("path")||"",s=i.substring(i.indexOf(e)+e.length).split("/");this.getFolderPath(s.join("/"))}else t.has("folderId")?(this.actualFolderId=t.get("folderId"),this.getBreadCrumbs()):this.getFolderPath()},getFolderPath(e){if(e)this.folderPath=e;else{const t=(e=window.location.pathname).split(`${eXo.env.portal.selectedNodeUri.toLowerCase()}/`);if(t.length>1?this.folderPath=t[1]:this.folderPath="",!eXo.env.portal.spaceName){if(e.includes("/Private/")){const t=e.split("/Private");t.length>1&&(this.folderPath=`Private${t[1]}`)}if(e.includes("/Public")){const t=e.split("/Public");t.length>1&&(this.folderPath=`Public${t[1]}`)}}}this.actualFolderId="",this.currentFolderPath="",this.getBreadCrumbs()},getBreadCrumbs(){return this.$documentFileService.getBreadCrumbs(this.actualFolderId,this.ownerId,this.folderPath).then((e=>{this.documentsBreadcrumb=e,this.actualFolderId=this.documentsBreadcrumb[this.documentsBreadcrumb.length-1].id,this.currentFolderPath=this.documentsBreadcrumb[this.documentsBreadcrumb.length-1].path,this.$root.$emit("set-current-folder",this.documentsBreadcrumb[this.documentsBreadcrumb.length-1])})).finally((()=>this.loading=!1))},updateBreadcrumb(e){e?this.getFolderPath(e):this.getDocumentDataFromUrl()}}},It,[],!1,null,null,null);kt.options.__file="src/main/webapp/vue-app/documents/components/body/views/DocumentsBreadcrumb.vue";const At=kt.exports;var Tt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"folderBreadcrumb",staticClass:"folderBreadcrumb",attrs:{right:""},on:{closed:e.close}},[i("template",{slot:"title"},[e._v("\n    "+e._s(e.$t("documents.drawer.tree"))+"\n  ")]),e._v(" "),i("template",{slot:"content"},[i("v-treeview",{staticClass:"treeView-item my-2",attrs:{open:e.openLevel,items:e.items,"item-key":"id",hoverable:"",activatable:"","open-on-click":"",transition:""},on:{"update:open":function(t){e.openLevel=t}},scopedSlots:e._u([{key:"label",fn:function(t){var s=t.item;return[i("div",{staticClass:"d-flex clickable",on:{click:function(t){return e.openFolder(s)}}},[i("v-icon",{staticClass:"primary--text",attrs:{size:"24"}},[e._v("\n            "+e._s("fas fa-folder")+"\n          ")]),e._v(" "),i("v-list-item-title",{staticClass:"body-2 mx-2 mt-1",class:e.idItemActive===s.id?"primary--text font-weight-bold":""},[e._v("\n            "+e._s(s.name)+"\n          ")])],1)]}}])})],1)],2)};Tt._withStripped=!0;var Nt=a({data:()=>({ownerId:eXo.env.portal.spaceIdentityId||eXo.env.portal.userIdentityId,items:[],currentFolderPathTab:[]}),computed:{openLevel(){return this.items&&this.items.length?this.currentFolderPathTab:[]},idItemActive(){return this.currentFolderPathTab&&this.currentFolderPathTab.length?this.currentFolderPathTab[this.currentFolderPathTab.length-1]:[]}},created(){this.$root.$on("documentsBreadcrumb",(e=>{const t=[];e.forEach((e=>t.push(e.id))),this.currentFolderPathTab=t}))},methods:{sortItems(e){const t=new Intl.Collator(eXo.env.portal.language,{numeric:!0,sensitivity:"base"});return e.sort(((e,i)=>t.compare(e.name,i.name)))},sortNestedItems(e){return this.sortItems(e),e.forEach((e=>{e.children.length&&this.sortNestedItems(e.children)})),e},open(){this.retrieveDocumentTree(),this.$refs.folderBreadcrumb?.open()},close(){this.$refs.folderBreadcrumb?.close()},openFolder(e){this.$root.$emit("open-folder",e)},retrieveDocumentTree(){this.items=[],this.$refs.folderBreadcrumb?.startLoading(),this.$documentFileService.getFullTreeData(this.ownerId).then((e=>{this.items=e&&this.sortNestedItems(e)||[]})).finally((()=>this.$refs.folderBreadcrumb?.endLoading()))}}},Tt,[],!1,null,null,null);Nt.options.__file="src/main/webapp/vue-app/documents/components/body/views/FolderTreeViewDrawer.vue";const Vt=Nt.exports;var Bt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable mx-2",on:{click:function(t){return e.displayDetails()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fa-info-circle\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.drawer.details.title")))])],1)};Bt._withStripped=!0;var Ot=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},data:()=>({editName:!1}),methods:{displayDetails(){this.$root.$emit("open-info-drawer",this.file),this.isMobile&&this.$root.$emit("close-file-action-menu")}}},Bt,[],!1,null,null,null);Ot.options.__file="src/main/webapp/vue-app/documents/components/body/actions/DetailsMenuAction.vue";const Pt=Ot.exports;var Lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable mx-2",on:{click:function(t){return e.deleteAction()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fas fa-trash\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.delete")))])],1)};Lt._withStripped=!0;var zt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},methods:{deleteAction(){this.$root.$emit("confirm-document-deletion",this.file),this.$root.$emit("close-file-action-menu"),this.$documentFileService.deleteDocument(this.file.path,this.file.id,this.file.favorite,6)}}},Lt,[],!1,null,null,null);zt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/DeleteMenuAction.vue";const Ut=zt.exports;var Xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable mx-2",on:{click:function(t){return e.addShortcut()}}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fas fa-share-square\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.shortcut")))]),e._v(" "),i("v-divider",{staticClass:"mt-1 dividerStyle"})],1)};Xt._withStripped=!0;var Rt=a({props:{file:{type:Object,default:null},isMobile:{type:Boolean,default:!1}},methods:{addShortcut(){this.$root.$emit("open-document-tree-selector-drawer",this.file,"shortcut"),this.isMobile&&this.$root.$emit("close-file-action-menu")}}},Xt,[],!1,null,null,null);Rt.options.__file="src/main/webapp/vue-app/documents/components/body/actions/ShortcutMenuAction.vue";const qt=Rt.exports;var jt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"info-cell-file-"+e.fileId}},[i("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,o=t.attrs;return[i("v-btn",e._g(e._b({attrs:{icon:"",small:""}},"v-btn",o,!1),s),[i("v-icon",e._g(e._b({staticClass:"text-sub-title d-none mx-0 px-0",attrs:{size:"16"},on:{click:function(t){return e.$root.$emit("open-info-drawer",e.file)}}},"v-icon",o,!1),s),[e._v("\n          fa-info-circle\n        ")])],1)]}}])},[e._v(" "),i("span",[e._v("\n      "+e._s(e.documentInfoActionTooltip)+"\n    ")])])],1)};jt._withStripped=!0;var Ht=a({props:{file:{type:Object,default:null},extension:{type:Object,default:null}},computed:{fileId(){return this.file&&this.file.id},documentInfoActionTooltip(){return this.$t("documents.label.show.details")}}},jt,[],!1,null,null,null);Ht.options.__file="src/main/webapp/vue-app/documents/components/body/table/cells/DocumentsInfoDetailsCell.vue";const Kt=Ht.exports;var Yt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"documentAddNewMobileMenu",attrs:{bottom:!0}},[i("template",{slot:"content"},[i("v-list",{attrs:{dense:""}},[i("v-list-item",{staticClass:"px-2",on:{click:function(t){return e.addFolder()}}},[i("v-icon",{staticClass:"clickable pr-2",attrs:{size:"19"}},[e._v("\n          fa-folder\n        ")]),e._v(" "),e.isMobile?e._e():i("span",{staticClass:"body-2 text-color"},[e._v(e._s(e.$t("documents.button.addNewFolder")))])],1),e._v(" "),i("v-list-item",{staticClass:"px-2",on:{click:function(t){return e.openDrawer()}}},[i("v-icon",{staticClass:"clickable pr-2",attrs:{size:"19"}},[e._v("\n          fa-file-alt\n        ")]),e._v(" "),e.isMobile?e._e():i("span",{staticClass:"body-2 text-color"},[e._v(e._s(e.$t("documents.button.addNewFile")))])],1)],1),e._v(" "),i("exo-drawer")],1)],2)};Yt._withStripped=!0;var Gt=a({props:{isMobile:{type:Boolean,default:!1}},methods:{open(){this.$refs.documentAddNewMobileMenu.open()},close(){this.$refs.documentAddNewMobileMenu.close()},openDrawer(){this.$root.$emit("documents-open-drawer"),this.close()},addFolder(){this.$root.$emit("documents-add-folder"),this.close()}}},Yt,[],!1,null,null,null);Gt.options.__file="src/main/webapp/vue-app/documents/components/header/actions/DocumentAddNewMobile.vue";const Jt=Gt.exports;var Wt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("exo-drawer",{ref:"documentActionsMobileMenu",staticClass:"mobileDrawer",attrs:{bottom:!0}},[i("template",{slot:"content"},[i("v-list",{attrs:{dense:""}},e._l(e.menuExtensions,(function(t,s){return i("v-list-item",{key:s,staticClass:"px-2 text-left",class:e.isMobile&&"mobile-menu-item"},[i("extension-registry-component",{staticClass:"width-full",attrs:{component:t,params:e.params,element:"div"}})],1)})),1),e._v(" "),i("exo-drawer")],1)],2)};Wt._withStripped=!0;var Qt=a({props:{primaryFilter:{type:String,default:"all"},isMobile:{type:Boolean,default:!1},query:{type:String,default:null},extendedSearch:{type:Boolean,default:!1}},data:()=>({quickFilter:!1,menuExtensionApp:"DocumentMobileFilterMenu",menuExtensionType:"menuMobileFilterMenu",menuExtensions:{}}),computed:{params(){return{quickFilter:this.quickFilter,quickFilterValue:this.primaryFilter,isMobile:this.isMobile,query:this.query,extendedSearch:this.extendedSearch}}},watch:{isMobile(){this.isMobile||this.close()}},created(){this.$root.$on("open-mobile-filter-menu",this.open),this.$root.$on("close-mobile-filter-menu",this.close),this.$root.$on("set-search-type",this.setFilterType)},methods:{open(){this.refreshMenuExtensions(),this.$refs.documentActionsMobileMenu.open()},close(){this.$refs.documentActionsMobileMenu.close(),this.quickFilter=!1},setFilterType(){this.quickFilter=!0,this.refreshMenuExtensions()},refreshMenuExtensions(){this.menuExtensions={};let e=extensionRegistry.loadExtensions(this.menuExtensionApp,this.menuExtensionType);this.quickFilter&&(e=e.filter((e=>"filterOptions"===e.menuType))),this.quickFilter||(e=e.filter((e=>"searchType"===e.menuType)));let t=!1;e.forEach((e=>{!e.id||this.menuExtensions[e.id]&&this.menuExtensions[e.id]===e||(this.menuExtensions[e.id]=e,t=!0)})),t&&(this.menuExtensions=Object.assign({},this.menuExtensions))}}},Wt,[],!1,null,null,null);Qt.options.__file="src/main/webapp/vue-app/documents/components/header/actions/DocumentFilterMenuMobile.vue";const Zt=Qt.exports;var ei=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pt-1 mx-2 clickable",on:{click:function(t){return e.changeFilterOption()}}},[e.activated?i("v-icon",{staticClass:"pe-1 pb-1 iconStyle",attrs:{size:"21"}},[e._v("\n    mdi-check-bold\n  ")]):e._e(),e._v(" "),i("span",{class:e.activated?"ps-1":"ps-8"},[e._v(e._s(e.$t("documents.filter.favorites")))])],1)};ei._withStripped=!0;var ti=a({props:{quickFilter:{type:Boolean,default:!1},quickFilterValue:{type:String,default:"all"}},computed:{activated(){return"favorites"===this.quickFilterValue},filterOption(){return this.quickFilterValue}},created(){this.$root.$on("set-mobile-filter",this.setFilterOption)},methods:{setFilterOption(e){this.filterOption=e},changeFilterOption(){this.activated||(this.filterOption="Favorites",this.$root.$emit("documents-filter","favorites"),this.$root.$emit("set-documents-filter","Favorites")),this.$root.$emit("close-mobile-filter-menu",!1)}}},ei,[],!1,null,null,null);ti.options.__file="src/main/webapp/vue-app/documents/components/header/actions/FavoriteFilterActionMobile.vue";const ii=ti.exports;var si=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"pt-1 mx-2 clickable",on:{click:function(t){return e.changeFilterOption()}}},[e.activated?i("v-icon",{staticClass:"pe-1 pb-1 iconStyle",attrs:{size:"21"}},[e._v("\n    mdi-check-bold\n  ")]):e._e(),e._v(" "),i("span",{class:e.activated?"ps-1":"ps-8"},[e._v(e._s(e.$t("documents.filter.all")))])],1)};si._withStripped=!0;var oi=a({props:{quickFilter:{type:Boolean,default:!1},quickFilterValue:{type:String,default:"all"}},computed:{activated(){return"all"===this.quickFilterValue},filterOption(){return this.quickFilterValue}},created(){this.$root.$on("set-mobile-filter",this.setFilterOption)},methods:{setFilterOption(e){this.filterOption=e},changeFilterOption(){this.activated||(this.filterOption="All",this.$root.$emit("documents-filter","all"),this.$root.$emit("set-documents-filter","All")),this.$root.$emit("close-mobile-filter-menu",!1)}}},si,[],!1,null,null,null);oi.options.__file="src/main/webapp/vue-app/documents/components/header/actions/AllFilterActionMobile.vue";const ni=oi.exports;var ai=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable pt-1 mx-2",on:{click:function(t){return e.quickFilter()}}},[i("v-icon",{staticClass:"pe-1 pb-1 iconStyle",attrs:{size:"21"}},[e._v("\n    mdi-filter\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.quickFilter")))])],1)};ai._withStripped=!0;var ri=a({data:()=>({viewTab:"RECENT",spaceId:eXo.env.portal.spaceId}),methods:{quickFilter(){this.$root.$emit("set-search-type","All")}}},ai,[],!1,null,null,null);ri.options.__file="src/main/webapp/vue-app/documents/components/header/actions/QuickFilterActionMobile.vue";const li=ri.exports;var ci=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.query?i("div",{staticClass:"clickable pt-1 mx-2",on:{click:function(t){return e.extendSearch()}}},[i("v-icon",{staticClass:"pe-1 pb-1 iconStyle",attrs:{size:"21"}},[e._v("\n    "+e._s(e.icon)+"\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.extendSearch")))])],1):e._e()};ci._withStripped=!0;var di=a({props:{query:{type:String,default:null},extendedSearch:{type:Boolean,default:!1}},computed:{icon(){return this.extendedSearch?"mdi-check-bold":"mdi-file-search"}},methods:{extendSearch(){this.extendedSearch||(this.$root.$emit("document-extended-search"),this.$root.$emit("close-mobile-filter-menu",!1))}}},ci,[],!1,null,null,null);di.options.__file="src/main/webapp/vue-app/documents/components/header/actions/ExtendFilterActionMobile.vue";const ui=di.exports;var pi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.showOverlay,expression:"showOverlay"}],staticClass:"uploadOverlay"},[i("div",{staticClass:"ma-4 d-flex documents-upload-body flex-column justify-center text-center text-color"},[i("v-icon",{staticClass:"uploadIcon",attrs:{size:"60"}},[e._v(" fa-file-upload ")]),e._v(" "),i("span",{staticClass:"uploadText"},[e._v(e._s(e.$t("documents.upload.DropMessage")))]),e._v(" "),i("span",{staticClass:"uploadText"},[e._v("("+e._s(e.$t("documents.upload.maxFileSize").replace("{0}",e.maxFileSize))+")")])],1)])};pi._withStripped=!0;var mi=a({props:{maxFileSize:{type:Number,default:parseInt(`${eXo.env.portal.maxFileSize}`)}},data:()=>({showOverlay:!1}),created(){this.$root.$on("show-upload-overlay",this.show),this.$root.$on("hide-upload-overlay",this.hide)},methods:{show(){this.showOverlay=!0;const e=this.getDropZoneE3lement();e&&e.classList.add("tableOverlayed")},hide(){this.showOverlay=!1;const e=this.getDropZoneE3lement();e&&e.classList.remove("tableOverlayed")},getDropZoneE3lement(){let e=document.querySelector(".documents-table");return e||(e=document.querySelector(".documents-folder-table")),e||(e=document.querySelector(".documents-no-body")),e}}},pi,[],!1,null,null,null);mi.options.__file="src/main/webapp/vue-app/documents/components/body/UploadOverlay.vue";const hi=mi.exports;var fi=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"clickable ma-auto pt-1 mx-2",on:{click:e.showVersionHistory}},[i("v-icon",{staticClass:"pe-1 iconStyle",attrs:{size:"13"}},[e._v("\n    fa fa-history\n  ")]),e._v(" "),i("span",{staticClass:"ps-1"},[e._v(e._s(e.$t("documents.label.showVersionHistory")))]),e._v(" "),i("v-divider",{staticClass:"mt-1 dividerStyle"})],1)};fi._withStripped=!0;var vi=a({props:{file:{type:Object,default:null}},methods:{showVersionHistory(){this.$root.$emit("show-version-history",this.file)}}},fi,[],!1,null,null,null);vi.options.__file="src/main/webapp/vue-app/documents/components/body/actions/VersionHistoryMenuAction.vue";const bi={"documents-main":l,"documents-header":b,"documents-header-left":g,"documents-header-right":C,"documents-header-center":M,"documents-add-new-file":I,"documents-filter-input":T,"documents-filter":Ae,"documents-body":B,"documents-no-body":L,"documents-no-body-folder":X,"documents-no-result-body":j,"documents-folder-view":W,"documents-timeline-view":Y,"documents-timeline-group-header":ee,"documents-table-cell":se,"documents-last-updated-cell":ae,"documents-visibility-cell":ce,"documents-file-size-cell":pe,"documents-last-activity-cell":fe,"documents-favorite-cell":ye,"documents-favorite-action":xe,"documents-file-name-cell":Se,"documents-file-edit-name-cell":Ee,"documents-actions-menu":Ve,"documents-actions-menu-mobile":Pe,"documents-add-new-menu-mobile":Jt,"documents-filter-menu-mobile":Zt,"documents-info-drawer":Ue,"document-tree-selector-drawer":qe,"documents-move-spaces":Ke,"documents-visibility-drawer":Je,"documents-visibility-all-users-drawer":Ze,"documents-visibility-collaborators":it,"documents-visibility-menu":nt,"edit-menu-action":lt,"rename-menu-action":St,"download-menu-action":ut,"move-menu-action":ht,"duplicate-menu-action":bt,"visibility-menu-action":gt,"copy-link-menu-action":Et,"favorite-menu-action":$t,"delete-menu-action":Ut,"shortcut-menu-action":qt,"documents-breadcrumb":At,"folder-treeview-drawer":Vt,"details-menu-action":Pt,"documents-info-details-cell":Kt,"switch-new-document":h,"documents-app-reminder":u,"upload-overlay":hi,"versionHistory-menu-action":vi.exports,"favorite-filter-action":ii,"all-filter-action":ni,"quick-filter-action":li,"extend-filter-action":ui};for(const e in bi)Vue.component(e,bi[e]);function yi(e,t,i,s){const o=new FormData;e&&Object.keys(e).forEach((t=>{const i=e[t];i&&o.append(t,i)})),s&&o.append("expand",s),t&&o.append("offset",t),i&&o.append("limit",i);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents?${n}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function wi(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/canAddDocument?spaceId=${e}`,{headers:{"Content-Type":"text/plain"},method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Server indicates an error while sending request")}))}function gi(e,t,i){const s=new FormData;e&&s.append("folderId",e),i&&s.append("folderPath",i),t&&s.append("ownerId",t);const o=new URLSearchParams(s).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/breadcrumb?${o}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function xi(e,t){const i=new FormData;t&&i.append("folderId",t),e&&i.append("ownerId",e);const s=new URLSearchParams(i).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/fullTree?${s}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function _i(e,t,i){const s=new FormData;e&&s.append("fileId",e),t&&s.append("ownerId",t),i&&s.append("prefixClone",i);const o=new URLSearchParams(s).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/duplicate?${o}`,{method:"post",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function $i(e){const t={id:e.id,path:e.path,ownerId:e.ownerId,creatorId:e.creatorId,acl:e.acl};return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/permissions`,{method:"post",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>{if(e&&e.ok)return e.ok;throw new Error("Response code indicates a server error",e)}))}function Ci(e,t,i){const s=new FormData;e&&s.append("ownerId",e),t&&s.append("documentID",t),i&&s.append("newName",i);const o=new URLSearchParams(s).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/rename?${o}`,{credentials:"include",method:"PUT"}).then((e=>{if(e&&e.ok)return e.ok;throw e}))}function Di(e,t,i,s){const o=new FormData;e&&o.append("ownerId",e),t&&o.append("documentID",t),i&&o.append("destPath",i),s&&o.append("conflictAction",s);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/move?${n}`,{credentials:"include",method:"PUT"}).then((e=>{if(e&&e.ok)return e.ok;throw e}))}function Si(e,t,i,s){const o=new FormData;e&&o.append("ownerId",e),t&&o.append("parentid",t),i&&o.append("folderPath",i),s&&o.append("name",s);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/folder?${n}`,{credentials:"include",method:"POST"}).then((e=>{if(e&&e.ok)return e.json();throw e}))}function Mi(e,t,i,s){const o=new FormData;e&&o.append("ownerId",e),t&&o.append("parentid",t),i&&o.append("folderPath",i),s&&o.append("name",s);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/newname?${n}`,{credentials:"include",method:"GET"}).then((e=>{if(e&&e.ok)return e.text();throw new Error("Response code indicates a server error",e)}))}function Fi(e,t,i,s){s>0&&localStorage.setItem("deletedDocument",t);const o=new FormData;s&&o.append("delay",s),e&&o.append("documentPath",e.replaceAll("/",":")),i&&o.append("favorite",i),t&&o.append("documentId",t);const n=new URLSearchParams(o).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/${t}?${n}`,{credentials:"include",method:"DELETE"}).then((e=>{if(e&&!e.ok)throw new Error("Error when deleting document")}))}function Ei(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/${e}/undoDelete`,{method:"POST",credentials:"include"}).then((e=>{if(!e||!e.ok)throw new Error("Error when undoing deleting document");localStorage.removeItem("deletedDocument")}))}function Ii(e,t){const i=new FormData;e&&i.append("ownerId",e),t.id&&i.append("documentId",t.id),t.description&&i.append("description",t.description);const s=new URLSearchParams(i).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/description?${s}`,{credentials:"include",method:"PUT"}).then((e=>{if(e&&e.ok)return e.ok})).catch((e=>{throw new Error(`Error when trying to update document description ${e}`)}))}function ki(e,t,i){const s=new FormData;e&&s.append("documentID",e),t&&s.append("destPath",t),i&&s.append("conflictAction",i);const o=new URLSearchParams(s).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/shortcut?${o}`,{credentials:"include",method:"POST"}).then((e=>{if(e&&e.ok)return e.ok;throw e}))}function Ai(e){const t=new FormData;t.append("fileId",e);const i=new URLSearchParams(t).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/versions?${i}`,{method:"GET",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error")}))}function Ti(e,t,i){const s=new FormData;s.append("versionId",t),s.append("originFileId",e);const o=new URLSearchParams(s).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/versions?${o}`,{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:i})}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error while updating version summary")}))}function Ni(e){const t=new FormData;t.append("versionId",e);const i=new URLSearchParams(t).toString();return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/documents/versions?${i}`,{method:"PUT",credentials:"include"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error while restoring version")}))}function Vi(e,t){document.getElementsByClassName(t).forEach((t=>{t.getElementsByTagName("i").item(0),t.title=e}))}if(i(742),Vue.prototype.$documentFileService||window.Object.defineProperty(Vue.prototype,"$documentFileService",{value:e}),Vue.prototype.$documentsUtils||window.Object.defineProperty(Vue.prototype,"$documentsUtils",{value:t}),extensionRegistry){const e=extensionRegistry.loadComponents("Documents");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}Vue.use(Vuetify);const Bi=new Vuetify(eXo.env.portal.vuetifyPreset),Oi="DocumentsApplication",Pi=eXo&&eXo.env.portal.language||"en",Li=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.Documents-${Pi}.json`;function zi(){exoi18n.loadLanguageAsync(Pi,Li).then((e=>{Vue.createApp({template:`<documents-main id="${Oi}" />`,vuetify:Bi,i18n:e},`#${Oi}`,"Documents")})),document.getElementById("UIJcrExplorerContainer").classList.contains("VuetifyApp")||document.getElementById("UIJcrExplorerContainer").classList.add("VuetifyApp")}function Ui(){exoi18n.loadLanguageAsync(Pi,Li).then((e=>{Vue.createApp({template:'<switch-new-document id="#newAppSwitch" />',vuetify:Bi,i18n:e},"#newAppSwitch","SwitchDocuments")}))}Vue.prototype.$nextTick((()=>{Vue.prototype.$transferRulesService.getDocumentsTransferRules().then((e=>{Vue.prototype.$shareDocumentSuspended="true"===e.sharedDocumentStatus,Vue.prototype.$downloadDocumentSuspended="true"===e.downloadDocumentStatus}))}))})(),s})()));