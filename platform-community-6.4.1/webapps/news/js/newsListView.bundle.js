define((()=>(()=>{var e={826:()=>{extensionRegistry.registerComponent("NewsList","views",{id:"NewsEmptyTemplate",vueComponent:Vue.options.components["news-empty-template"],rank:10}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsSlider",vueComponent:Vue.options.components["news-slider-view"],rank:20}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsLatest",vueComponent:Vue.options.components["news-latest-view"],rank:30}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsSliderEmptyTemplate",vueComponent:Vue.options.components["news-empty-slider-view"],rank:40}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsLatestEmptyTemplate",vueComponent:Vue.options.components["news-empty-latest-view"],rank:50}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsAlert",vueComponent:Vue.options.components["news-alert-view"],rank:60}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsList",vueComponent:Vue.options.components["news-list-template-view"],rank:70}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsMosaic",vueComponent:Vue.options.components["news-mosaic-view"],rank:80}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsStories",vueComponent:Vue.options.components["news-stories-view"],rank:90}),extensionRegistry.registerComponent("NewsList","views",{id:"NewsCards",vueComponent:Vue.options.components["news-cards-view"],rank:100})}},t={};function s(i){var l=t[i];if(void 0!==l)return l.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var i={};return(()=>{"use strict";s.r(i),s.d(i,{init:()=>Ee});var e={};s.r(e),s.d(e,{getNewsList:()=>le,saveSettings:()=>re});var t={};s.r(t),s.d(t,{canPublishNews:()=>Ne,canScheduleNews:()=>Ce,canUserCreateNews:()=>Te,clickOnEditButton:()=>pe,deleteDraft:()=>Ae,deleteNews:()=>xe,escapeHTML:()=>$e,fetchFoldersAndFiles:()=>_e,findUserSpaces:()=>ve,getDrivers:()=>ye,getNews:()=>ce,getNewsByActivityId:()=>oe,getNewsById:()=>ae,getNewsSpaces:()=>ne,getSpaceById:()=>ge,getUserSpaces:()=>fe,importFileFromUrl:()=>me,markNewsAsRead:()=>he,saveNews:()=>we,scheduleNews:()=>de,searchSpaces:()=>Se,undoDeleteNews:()=>be,updateNews:()=>ue});var l={};s.r(l),s.d(l,{createTarget:()=>Re,deleteTargetByName:()=>Ie,getAllTargets:()=>De,getAllowedTargets:()=>Le,undoDeleteTarget:()=>ke,updateTarget:()=>Ue});var r=function(){var e=this,t=e._self._c;return t("v-app",{staticClass:"news-list-view-app position-relative"},[t("v-card",{staticClass:"list-view-card rounded-0",class:"NewsStories"===e.viewTemplate?"background-transparent":"",attrs:{height:"100%",flat:""}},[t("v-card-text",{staticClass:"pa-0"},[e.displayHeader?t("news-settings"):e._e(),e._v(" "),e.selectedViewExtension?t("extension-registry-component",{attrs:{"element-class":"news-list-view",component:e.selectedViewComponent,params:e.viewComponentParams}}):e._e()],1)],1),e._v(" "),e.canPublishNews?t("news-settings-drawer"):e._e()],1)};r._withStripped=!0;const a={props:{viewTemplate:{type:String,default:null},newsTarget:{type:Array,default:null},header:{type:String,default:null},limit:{type:String,default:null},showHeader:{type:Boolean,default:!1},showSeeAll:{type:Boolean,default:!1},showArticleTitle:{type:Boolean,default:!1},showArticleSummary:{type:Boolean,default:!1},showArticleImage:{type:Boolean,default:!1},showArticleAuthor:{type:Boolean,default:!1},showArticleReactions:{type:Boolean,default:!1},showArticleSpace:{type:Boolean,default:!1},showArticleDate:{type:Boolean,default:!1},seeAllUrl:{type:String,default:null}},data:()=>({extensionApp:"NewsList",extensionType:"views",newsList:[null],viewExtensions:{},loading:!1,hasMore:!1,offset:0,canPublishNews:!1}),computed:{displayHeader(){return this.viewTemplate&&"NewsSlider"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate&&("NewsMosaic"!==this.viewTemplate||this.isMobile)},selectedViewExtension(){return this.viewTemplate?"NewsSlider"===this.viewTemplate&&0===this.newsList.length?Object.values(this.viewExtensions).sort()[3]:"NewsLatest"!==this.viewTemplate&&"NewsList"!==this.viewTemplate&&"NewsMosaic"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate&&"NewsCards"!==this.viewTemplate||0!==this.newsList.length?this.viewExtensions[this.viewTemplate]:Object.values(this.viewExtensions).sort()[4]:Object.keys(this.viewExtensions).length&&this.newsList.length>0?Object.values(this.viewExtensions).sort()[0]:null},selectedViewComponent(){return this.selectedViewExtension&&{componentName:this.selectedViewExtension.id,componentOptions:this.selectedViewExtension}},isMobile(){return this.$vuetify.breakpoint.width<651},viewComponentParams(){return{viewExtension:this.selectedViewExtension,newsTarget:this.newsTarget,newsList:this.newsList,header:this.header,limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleImage:this.showArticleImage,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleReactions:this.showArticleReactions,showArticleDate:this.showArticleDate,seeAllUrl:this.seeAllUrl,hasMore:this.hasMore,loading:this.loading}}},watch:{viewExtensions(){this.$root.viewExtensions=this.viewExtensions}},created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.$root.$on("saved-news-settings",((e,t)=>{this.seeAllUrl=t.seeAllUrl,this.showSeeAll=t.showSeeAll,this.showHeader=t.showHeader,this.newsTarget=e,this.limit=this.$root.limit,this.retrieveNewsList()})),this.seeAllUrl=this.$root.seeAllUrl,this.showSeeAll=this.$root.showSeeAll,this.showHeader=this.$root.showHeader,this.newsTarget=this.$root.newsTarget,this.limit=this.$root.limit,this.retrieveNewsList().finally((()=>this.$root.$applicationLoaded())),document.addEventListener(`component-${this.extensionApp}-${this.extensionType}-updated`,this.refreshViewExtensions),this.refreshViewExtensions()},methods:{retrieveNewsList(){return this.loading=!0,this.$newsListService.getNewsList(this.newsTarget,this.offset,this.limit,!0).then((e=>{this.newsList=e.news.filter((e=>!!e))||[],this.hasMore=this.newsList.length>this.limit})).finally((()=>this.loading=!1))},refreshViewExtensions(){extensionRegistry.loadComponents(this.extensionApp).filter((e=>e.componentName===this.extensionType)).map((e=>e.componentOptions)).forEach((e=>{!e.id||this.viewExtensions[e.id]&&this.viewExtensions[e.id]===e||this.$set(this.viewExtensions,e.id,e)}))}}};function o(e,t,s,i,l,r,a,o){var n,h="function"==typeof e?e.options:e;if(t&&(h.render=t,h.staticRenderFns=s,h._compiled=!0),i&&(h.functional=!0),r&&(h._scopeId="data-v-"+r),a?(n=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},h._ssrRegister=n):l&&(n=o?function(){l.call(this,(h.functional?this.parent:this).$root.$options.shadowRoot)}:l),n)if(h.functional){h._injectStyles=n;var c=h.render;h.render=function(e,t){return n.call(t),c(e,t)}}else{var w=h.beforeCreate;h.beforeCreate=w?[].concat(w,n):[n]}return{exports:e,options:h}}const n=o(a,r,[],!1,null,null,null).exports;var h=function(){var e=this,t=e._self._c;return t("div",{ref:"news-latest-view",staticClass:"px-2 py-2",class:e.extraClass,attrs:{id:"news-latest-view"}},[t("div",{class:e.hasSmallWidthContainer?"article-small-container":"article-container"},[e.loading?t("v-progress-circular",{staticClass:"loader",attrs:{size:50,color:"primary",indeterminate:""}}):e._e(),e._v(" "),e._l(e.newsInfo,(function(s,i){return t("div",{key:s,class:e.hasSmallWidthContainer?"smallWidthContainer":"article",attrs:{id:`articleItem-${i}`}},[t("news-latest-view-item",{key:i,attrs:{news:e.newsInfo,item:s,"selected-option":e.selectedOption,index:i}})],1)}))],2)])};h._withStripped=!0;const c={props:{newsTarget:{type:Object,required:!1,default:null},newsList:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},data:()=>({initialized:!1,limit:4,offset:0,space:null,isHovered:!1,commentsSize:0,likeSize:0,fullDateFormat:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},seeAllUrl:"",selectedOption:null,showHeader:!1,showSeeAll:!1,showArticleTitle:!1,showArticleSummary:!1,showArticleImage:!1,showArticleAuthor:!1,showArticleSpace:!1,showArticleDate:!1,showArticleReactions:!1,hasSmallWidthContainer:!1,canPublishNews:!1}),computed:{newsInfo(){return this.newsList&&this.newsList.filter((e=>!!e))},extraClass(){return this.showHeader||this.showSeeAll||this.canPublishNews?" ":"mt-5"}},created(){this.reset(),this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.$root.$on("saved-news-settings",this.refreshNewsViews)},mounted(){this.$nextTick().then((()=>this.$root.$emit("application-loaded"))),this.hasSmallWidthContainer=100*this.$refs["news-latest-view"]?.clientWidth/window.screen.width<33},methods:{refreshNewsViews(e,t){this.selectedOption=t,this.newsHeader=t.header,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.newsHeader=this.$root.header,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}}}},w=o(c,h,[],!1,null,null,null).exports;var d=function(){var e=this,t=e._self._c;return t("div",{staticClass:"newsSlider"},[t("v-carousel",{staticClass:"sliderNewsItems fill-height",attrs:{cycle:"","show-arrows-on-hover":"",interval:"10000",height:"220","hide-delimiter-background":""}},e._l(e.news,(function(s,i){return t("v-carousel-item",{key:i,staticClass:"carouselItem",attrs:{eager:"",dark:""}},[t("v-img",{staticClass:"articleImage fill-height",attrs:{src:e.showArticleImage&&null!==s.illustrationURL?s.illustrationURL.concat("&size=1420x222").toString():"/news/images/news.png",eager:""}}),e._v(" "),t("v-container",{staticClass:"slide-text-container d-flex text-center body-2"},[t("div",{staticClass:"flex flex-column carouselNewsInfo"},[t("div",{staticClass:"flex flex-row"},[e.canPublishNews?t("v-btn",{staticClass:"float-right settingNewsButton",attrs:{icon:""},on:{click:e.openDrawer}},[t("v-icon",[e._v("mdi-cog")])],1):e._e()],1),e._v(" "),e.showArticleTitle?t("a",{staticClass:"flex flex-row flex-grow-1 align-center justify-center headLinesTruncate",class:e.extraClass,attrs:{href:s.url}},[t("span",{staticClass:"text-h4 font-weight-medium white--text text-truncate-2"},[e._v("\n              "+e._s(s.title)+"\n            ")])]):e._e(),e._v(" "),t("div",{staticClass:"flex flex-row flex-grow-1 align-center mx-4 my-2"},[e.showArticleSummary?t("span",{staticClass:"white--text articleSummary"},[e._v(" "+e._s(s.summary))]):e._e(),e._v(" "),t("news-slider-view-item",{staticClass:"d-flex flex-row newsSliderItem align-center justify-center pa-2 ms-2",attrs:{author:s.author,"author-display-name":s.authorDisplayName,"space-display-name":s.spaceDisplayName,"space-url":s.spaceUrl,"space-avatar-url":s.spaceAvatarUrl,"publish-date":s.publishDate,"author-avatar-url":s.authorAvatarUrl,"activity-id":s.activityId,"likes-count":s.likesCount,"comments-count":s.commentsCount,"views-count":s.viewsCount,"hidden-space":s.hiddenSpace,"space-member":s.spaceMember,"selected-option":e.selectedOption}})],1)])])],1)})),1)],1)};d._withStripped=!0;const m={props:{newsTarget:{type:String,required:!1,default:"snapshotSliderNews"},newsList:{type:Array,default:()=>[]}},data:()=>({limit:4,offset:0,fullDateFormat:{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},showHeader:!1,showSeeAll:!1,showArticleTitle:!0,showArticleSummary:!0,showArticleImage:!0,showArticleAuthor:!0,showArticleSpace:!0,showArticleDate:!0,showArticleReactions:!0,seeAllUrl:"",selectedOption:null,canPublishNews:!1}),computed:{news(){return this.newsList&&this.newsList.filter((e=>!!e))},extraClass(){return this.$vuetify.breakpoint.width>550&&(this.canPublishNews?" ":"mt-7")}},created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.reset(),this.$root.$on("saved-news-settings",this.refreshNewsViews)},methods:{openDrawer(){this.$root.$emit("news-settings-drawer-open")},refreshNewsViews(e,t){this.showArticleSummary=t.showArticleSummary,this.showArticleTitle=t.showArticleTitle,this.showArticleImage=t.showArticleImage,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.selectedOption=t,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}}}},u=o(m,d,[],!1,null,null,null).exports;var p=function(){var e=this,t=e._self._c;return e.showSettingsContainer?t("div",{staticClass:"settings-container d-flex flex-row px-2 pt-2 pb-1"},[t("div",{staticClass:"d-flex latestNewsTitleContainer flex-column flex-grow-1 my-1"},[e.showHeader?t("span",{staticClass:"headerLatestNews body-1 text-uppercase text-sub-title text-truncate text-center",attrs:{title:e.newsHeader}},[e._v(e._s(e.newsHeader))]):e._e()]),e._v(" "),t("div",{staticClass:"d-flex flex-column me-2"},[e.canPublishNews?t("v-icon",{staticClass:"button-open-settings",attrs:{size:"24",icon:""},on:{click:e.openDrawer}},[e._v("\n      mdi-cog\n    ")]):e._e()],1),e._v(" "),e.showSeeAll?t("div",{staticClass:"d-flex flex-column my-auto me-2"},[t("v-btn",{staticClass:"button-see-all-news caption text-uppercase grey--text my-auto me-2",attrs:{depressed:"",small:""},on:{click:e.seeAllNews}},[e._v("\n      "+e._s(e.$t("news.published.seeAll"))+"\n    ")])],1):e._e()]):e._e()};p._withStripped=!0;const v={data:()=>({newsHeader:"",seeAllUrl:"news?filter=pinned",showHeader:!1,showSeeAll:!1,canPublishNews:!1}),computed:{showSettingsContainer(){return this.showHeader||this.showSeeAll||this.canPublishNews}},created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.$root.$on("saved-news-settings",((e,t)=>{this.newsHeader=t.header,this.seeAllUrl=t.seeAllUrl,this.showSeeAll=t.showSeeAll,this.showHeader=t.showHeader})),this.newsHeader=this.$root.header,this.seeAllUrl=this.$root.seeAllUrl,this.showSeeAll=this.$root.showSeeAll,this.showHeader=this.$root.showHeader},methods:{openDrawer(){this.$root.$emit("news-settings-drawer-open")},seeAllNews(){window.location.href=`${eXo.env.portal.context}/${eXo.env.portal.portalName}${this.seeAllUrl}`}}},A=o(v,p,[],!1,null,null,null).exports;var g=function(){var e=this,t=e._self._c;return e.showDrawer?t("exo-drawer",{ref:"newsSettingsDrawer",attrs:{id:"newsSettingsDrawer",right:"",fixed:""},on:{closed:e.close}},[t("template",{slot:"title"},[t("div",{staticClass:"flex flex-row"},[e.showAdvancedSettings?t("v-btn",{staticClass:"flex flex-column me-1",attrs:{icon:"",text:""}},[t("v-icon",{on:{click:e.switchSettingsDrawer}},[e._v("\n          mdi-keyboard-backspace\n        ")])],1):t("div",{staticClass:"flex flex-column"},[e._v(e._s(e.$t("news.list.settings.title")))])],1)]),e._v(" "),t("template",{slot:"titleIcons"},[t("v-tooltip",{attrs:{"max-width":"350px",color:"grey darken-4",bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:s,attrs:i}){return[t("v-btn",e._g(e._b({attrs:{icon:""}},"v-btn",i,!1),s),[t("v-icon",{staticClass:"iconInfo"},[e._v("mdi-information")])],1)]}}],null,!1,888372202),model:{value:e.showTooltip,callback:function(t){e.showTooltip=t},expression:"showTooltip"}},[e._v(" "),t("span",[e._v(e._s(e.$t("news.list.settings.information")))])])],1),e._v(" "),t("template",{slot:"content"},[t("form",{ref:"form1",staticClass:"pa-2 ms-2"},[e.showAdvancedSettings?t("news-advanced-settings",{attrs:{"show-article-summary":e.showArticleSummary,"show-see-all":e.showSeeAll,"show-header":e.showHeader,"show-article-author":e.showArticleAuthor,"view-template":e.viewTemplate},on:{"limit-value":function(t){e.limit=t},"see-all-url":function(t){e.seeAllUrl=t},"selected-option":e.selectedOption}}):t("div",{staticClass:"d-flex flex-column flex-grow-1"},[t("div",{staticClass:"d-flex flex-row mt-6"},[t("label",{staticClass:"listViewLabel text-subtitle-1 me-1 my-auto",attrs:{for:"name"}},[e._v("\n            "+e._s(e.$t("news.list.settings.header"))+":\n          ")]),e._v(" "),t("v-text-field",{staticClass:"input-block-level ignore-vuetify-classes pa-0",attrs:{type:"string",name:"newsHeader",placeholder:e.$t("news.list.settings.placeHolderName"),"error-messages":e.checkAlphanumeric,maxlength:"100",counter:"",required:"",outlined:"",dense:""},model:{value:e.newsHeader,callback:function(t){e.newsHeader=t},expression:"newsHeader"}})],1),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("label",{staticClass:"listViewLabel text-subtitle-1 mt-6",attrs:{for:"newsTarget"}},[e._v("\n            "+e._s(e.$t("news.list.settings.newsTarget"))+":\n          ")])]),e._v(" "),t("div",{staticClass:"d-flex flex-row infosLabel font-italic"},[e._v(e._s(e.$t("news.list.settings.newsTargets.description")))]),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("v-select",{ref:"newsTargetRefs",staticClass:"pa-0",attrs:{id:"newsTargetRefs",items:e.newsTargets,"menu-props":{bottom:!0,offsetY:!0},disabled:!e.newsTargets.length,"background-color":e.backgroundColor,"item-text":"label","item-value":"name",dense:"",outlined:""},on:{blur:e.blurSelection},scopedSlots:e._u([{key:"selection",fn:function({item:s}){return[t("span",{attrs:{title:s.toolTipInfo}},[e._v("\n                "+e._s(s.label)+"\n              ")])]}}],null,!1,131625285),model:{value:e.newsTarget,callback:function(t){e.newsTarget=t},expression:"newsTarget"}})],1),e._v(" "),0===e.newsTargets.length?t("div",{staticClass:"d-flex flex-row grey--text"},[t("i",{staticClass:"fas fa-exclamation-triangle mt-3"}),e._v(" "),t("span",{staticClass:"mx-2"},[e._v(" "+e._s(e.$t("news.composer.stepper.selectedTarget.noTargetAllowed")))])]):e._e(),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("label",{staticClass:"listViewLabel text-subtitle-1 mt-2",attrs:{for:"viewTemplate"}},[e._v("\n            "+e._s(e.$t("news.list.settings.viewTemplate"))+":\n          ")])]),e._v(" "),t("div",{staticClass:"d-flex flex-row infosLabel font-italic"},[e._v(e._s(e.$t("news.list.settings.viewTemplate.description")))]),e._v(" "),t("div",{staticClass:"d-flex flex-row"},[t("v-select",{ref:"viewTemplateRefs",staticClass:"pa-0",attrs:{id:"viewTemplateRefs",items:e.displayedViewTemplates,"menu-props":{bottom:!0,offsetY:!0},"item-text":"label","item-value":"name",dense:"",outlined:""},on:{change:e.initDefaultValue,blur:e.blurSelection},model:{value:e.viewTemplate,callback:function(t){e.viewTemplate=t},expression:"viewTemplate"}})],1),e._v(" "),t("div",{staticClass:"d-flex flex-row mt-4 mx-8"},[t("v-img",{staticClass:"previewTemplate",attrs:{src:e.previewTemplate}})],1)])],1),e._v(" "),t("div",{staticClass:"d-flex flex-row mt-4 mx-8 justify-end advancedSettings"},[e.showAdvancedSettings?e._e():t("span",{on:{click:function(t){e.showAdvancedSettings=!e.showAdvancedSettings}}},[e._v(e._s(e.$t("news.list.settings.drawer.advancedSettings")))])])]),e._v(" "),t("template",{slot:"footer"},[t("div",{staticClass:"d-flex"},[t("v-spacer"),e._v(" "),t("v-btn",{staticClass:"btn me-2",on:{click:e.close}},[[e._v("\n          "+e._s(e.$t("news.button.cancel"))+"\n        ")]],2),e._v(" "),t("v-btn",{staticClass:"btn btn-primary",attrs:{disabled:e.saving||e.disabled,loading:e.saving},on:{click:e.save}},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.save"))+"\n      ")])],1)])],2):e._e()};g._withStripped=!0;const f={data:()=>({showDrawer:!1,initialized:!1,initializing:!1,saving:!1,viewTemplate:null,newsTargets:[],viewExtensions:{},newsTarget:null,limit:5,newsHeader:"",showAdvancedSettings:!1,showHeader:!1,showSeeAll:!1,showArticleTitle:!1,showArticleSummary:!1,showArticleImage:!1,showArticleAuthor:!1,showArticleSpace:!1,showArticleDate:!1,showArticleReactions:!1,showTooltip:!1,seeAllUrl:`${eXo.env.portal.context}/${eXo.env.portal.portalName}/news?filter=pinned`,saveSettingsURL:""}),computed:{backgroundColor(){return 0===this.newsTargets.length?"#E1E8EE":""},viewTemplates(){return this.viewExtensions?Object.keys(this.viewExtensions).map((e=>({name:e,label:this.getLabel(`news.list.settings.viewTemplate.${e}`,e)}))):[]},displayedViewTemplates(){return this.viewTemplates.filter((e=>!e.name.includes("EmptyTemplate")))},checkAlphanumeric(){return this.newsHeader&&!this.newsHeader.trim().match(/^[a-zA-Z\u00C0-\u00FF ]*$/)&&this.newsHeader.length>0?this.$t("news.list.settings.name.errorMessage"):""},disabled(){return""!==this.checkAlphanumeric||this.newsHeader&&0===this.newsHeader.length||this.showSeeAll&&this.seeAllUrl&&0===this.seeAllUrl.length},previewTemplate(){return"NewsLatest"===this.viewTemplate?"/news/images/latestNews.png":"NewsSlider"===this.viewTemplate?"/news/images/sliderNews.png":"NewsAlert"===this.viewTemplate?"/news/images/alertNews.png":"NewsList"===this.viewTemplate?"/news/images/listNews.png":"NewsMosaic"===this.viewTemplate?"/news/images/mosaicNews.png":"NewsStories"===this.viewTemplate?"/news/images/storiesNews.png":"NewsCards"===this.viewTemplate?"/news/images/cardsNews.png":""}},watch:{saving(){this.saving?this.$refs.newsSettingsDrawer.startLoading():this.$refs.newsSettingsDrawer.endLoading()},initializing(){this.initializing?this.$refs&&this.$refs.newsSettingsDrawer&&this.$refs.newsSettingsDrawer.startLoading():this.$refs.newsSettingsDrawer.endLoading()}},created(){this.disabled=!0,this.$root.$on("news-settings-drawer-open",(()=>{this.showDrawer=!0,this.init(),setTimeout((()=>this.open()),100)})),this.$newsServices.canPublishNews().then((e=>{this.saveSettingsURL=e?this.$root.saveSettingsURL:null}))},methods:{open(){this.reset(),this.$refs.newsSettingsDrawer.open()},close(){this.$refs.newsSettingsDrawer.close(),window.setTimeout((()=>{this.showAdvancedSettings=!1,this.showDrawer=!1}),200)},reset(){this.viewTemplate=this.$root.viewTemplate,this.viewExtensions=this.$root.viewExtensions,this.newsTarget=this.$root.newsTarget,this.newsHeader=this.$root.header,this.limit=this.$root.limit,this.showHeader="NewsSlider"!==this.viewTemplate&&"NewsMosaic"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate&&this.$root.showHeader,this.showSeeAll="NewsSlider"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage="NewsAlert"!==this.viewTemplate&&this.$root.showArticleImage,this.showArticleSummary="NewsLatest"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&"NewsMosaic"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate&&this.$root.showArticleSummary,this.showArticleAuthor="NewsLatest"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&this.$root.showArticleAuthor,this.showArticleSpace="NewsStories"!==this.viewTemplate&&this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions="NewsAlert"!==this.viewTemplate&&this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl||`${eXo.env.portal.context}/${eXo.env.portal.portalName}/news?filter=pinned`},init(){this.initialized||(this.initializing=!0,this.$newsTargetingService.getAllowedTargets().then((e=>{this.newsTargets=e.map((e=>({name:e.name,label:e.properties&&e.properties.label&&e.properties.label.length>35?e.properties.label.substring(0,35).concat("..."):e.properties.label,toolTipInfo:e.properties&&e.properties.label,description:e.properties&&e.properties.description}))),this.initialized=!0})).finally((()=>this.initializing=!1)))},save(){this.saving=!0;let e=null;this.$newsListService.saveSettings(this.saveSettingsURL,{viewTemplate:this.viewTemplate,newsTarget:this.newsTarget,header:this.newsHeader,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleImage:this.showArticleImage,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleReactions:this.showArticleReactions,showArticleDate:this.showArticleDate,seeAllUrl:this.seeAllUrl,limit:this.limit}).then((()=>{this.$root.viewTemplate=this.viewTemplate,this.$root.newsTarget=this.newsTarget,this.$root.header=this.newsHeader,this.$root.limit=this.limit,this.$root.showHeader=this.showHeader,this.$root.showSeeAll=this.showSeeAll,this.$root.showArticleTitle=this.showArticleTitle,this.$root.showArticleSummary=this.showArticleSummary,this.$root.showArticleAuthor=this.showArticleAuthor,this.$root.showArticleSpace=this.showArticleSpace,this.$root.showArticleImage=this.showArticleImage,this.$root.showArticleDate=this.showArticleDate,this.$root.showArticleReactions=this.showArticleReactions,this.$root.seeAllUrl=this.seeAllUrl,e={limit:this.limit,showHeader:this.showHeader,header:this.newsHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl},this.$root.$emit("saved-news-settings",this.newsTarget,e),this.close()})).finally((()=>{this.saving=!1}))},getLabel(e,t){return e===this.$t(e)?t||e:this.$t(e)},selectedOption(e,t){switch(e){case"showArticleSpace":this.showArticleSpace=t;break;case"showArticleDate":this.showArticleDate=t;break;case"showArticleReactions":this.showArticleReactions=t;break;case"showArticleAuthor":this.showArticleAuthor=t;break;case"showArticleImage":this.showArticleImage=t;break;case"showArticleSummary":this.showArticleSummary=t;break;case"showArticleTitle":this.showArticleTitle=t;break;case"showSeeAll":this.showSeeAll=t;break;case"showHeader":this.showHeader=t;break;case"seeAllUrl":this.seeAllUrl=t}},initDefaultValue(){this.showHeader=!0,this.showSeeAll=!0,this.showArticleTitle=!0,this.showArticleSummary=!0,this.showArticleImage=!0,this.showArticleAuthor=!0,this.showArticleSpace=!0,this.showArticleDate=!0,this.showArticleReactions=!0,"NewsLatest"===this.viewTemplate||"NewsAlert"===this.viewTemplate?(this.showArticleAuthor=!1,this.showArticleSummary=!1,"NewsAlert"===this.viewTemplate&&(this.showArticleImage=!1,this.showArticleReactions=!1,this.showSeeAll=!1)):"NewsSlider"===this.viewTemplate?(this.showSeeAll=!1,this.showHeader=!1):"NewsMosaic"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate||(this.showArticleSummary=!1,this.showHeader=!1,"NewsStories"===this.viewTemplate&&(this.showArticleSpace=!1))},blurSelection(){this.$refs&&this.$refs.newsTargetRefs&&this.$refs.newsTargetRefs.isFocused?(this.$refs.newsTargetRefs.isFocused=!1,this.$refs.newsTargetRefs.isMenuActive=!1):this.$refs&&this.$refs.viewTemplateRefs&&this.$refs.viewTemplateRefs.isFocused&&(this.$refs.viewTemplateRefs.isFocused=!1,this.$refs.viewTemplateRefs.isMenuActive=!1)},switchSettingsDrawer(){this.showAdvancedSettings=!this.showAdvancedSettings,this.reset()}}},S=o(f,g,[],!1,null,null,null).exports;var _=function(){var e=this,t=e._self._c;return t("v-flex",{staticClass:"d-flex news-empty-listView"},[t("div",{staticClass:"ma-auto py-5 d-flex flex-column align-center"},[t("i",{staticClass:"uiNoNewsIcon"}),e._v(" "),t("span",{staticClass:"title listViewTitle mt-5"},[e._v("\n      "+e._s(e.$t("news.latest.noNews"))+"\n    ")])])])};_._withStripped=!0;const y=o({},_,[],!1,null,null,null).exports;var $=function(){var e=this,t=e._self._c;return t("div",{staticClass:"noNewsSlideContent"},[e.canPublishNews?t("v-btn",{staticClass:"mt-2 me-4 float-right",attrs:{icon:""},on:{click:e.openDrawer}},[t("v-icon",[e._v("mdi-cog")])],1):e._e(),e._v(" "),e._m(0),e._v(" "),t("div",{staticClass:"NewsSliderText"},[t("div",{staticClass:"noNewsMsg"},[e._v(e._s(e.$t("news.slider.yourArticleTitleGoesHere")))])])],1)};$._withStripped=!0;const T={data:()=>({canPublishNews:!1}),created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e}))},methods:{openDrawer(){this.$root.$emit("news-settings-drawer-open")}}},C=o(T,$,[function(){var e=this._self._c;return e("div",{staticClass:"noNewsImage"},[e("div",{staticClass:"bookImage"})])}],!1,null,null,null).exports;var x=function(){var e=this,t=e._self._c;return t("v-row",{staticClass:"d-flex justify-center"},[e.showArticleAuthor?t("div",{staticClass:"newsSliderOwner"},[t("v-avatar",{attrs:{size:"24"}},[t("v-img",{staticClass:"author-image",attrs:{src:e.authorAvatarUrl,alt:"Author image"}})],1),e._v(" "),t("span",{staticClass:"text-capitalize text--white my-auto ml-2"},[e._v(e._s(e.authorDisplayName))])],1):e._e(),e._v(" "),!e.isHiddenSpace&&e.showArticleSpace&&e.showArticleAuthor?t("v-icon",{staticClass:"mx-1",attrs:{small:""}},[e._v("\n    mdi-chevron-right\n  ")]):e._e(),e._v(" "),!e.isHiddenSpace&&e.showArticleSpace?t("div",{staticClass:"newsSpaceInfos me-2 my-auto"},[t("v-avatar",{attrs:{size:"23",rounded:""}},[t("v-img",{staticClass:"spaceImage",attrs:{src:e.spaceAvatarUrl,alt:"Space icon"}})],1),e._v(" "),t("a",{staticClass:"my-auto",attrs:{href:e.spaceUrl}},[t("span",{staticClass:"my-auto spaceName ml-2"},[e._v(e._s(e.spaceDisplayName))])])],1):e._e(),e._v(" "),e.showArticleDate?t("div",{staticClass:"date-container d-flex"},[t("v-icon",{staticClass:"me-1 ms-2",attrs:{size:"15"}},[e._v("mdi-clock")]),e._v(" "),t("div",{staticClass:"postDate flex-column me-1 my-auto"},[t("date-format",{attrs:{value:e.displayDate,format:e.dateFormat}})],1)],1):e._e(),e._v(" "),e.showArticleReactions?t("div",{staticClass:"reactions-container d-flex ml-4"},[t("div",{staticClass:"likes-container mb-1"},[t("v-icon",{staticClass:"likeIconStyle",attrs:{size:"14"}},[e._v("mdi-thumb-up")]),e._v(" "),t("span",{staticClass:"counterStyle ml-1"},[e._v(e._s(e.likesCount))])],1),e._v(" "),t("div",{staticClass:"comments-container ml-2"},[t("v-icon",{staticClass:"commentIconStyle mt-1",attrs:{size:"14"}},[e._v("\n        mdi-comment\n      ")]),e._v(" "),t("span",{staticClass:"counterStyle ml-1"},[e._v(e._s(e.commentsCount))])],1),e._v(" "),t("div",{staticClass:"views-container ml-2"},[t("v-icon",{staticClass:"views-icon",attrs:{size:"16"}},[e._v("mdi-eye")]),e._v(" "),t("span",{staticClass:"counterStyle"},[e._v(e._s(e.viewsCount))])],1)]):e._e()],1)};x._withStripped=!0;const b=o({props:{author:{type:String,default:""},authorDisplayName:{type:String,default:""},spaceDisplayName:{type:String,default:""},spaceUrl:{type:String,default:""},spaceAvatarUrl:{type:String,default:""},authorAvatarUrl:{type:String,default:""},publishDate:{type:String,default:""},activityId:{type:String,default:""},viewsCount:{type:Number,default:0},likesCount:{type:Number,default:0},commentsCount:{type:Number,default:0},spaceMember:{type:Boolean,default:!1},hiddenSpace:{type:Boolean,default:!1},selectedOption:{type:Object,required:!1,default:null}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric"}}),computed:{displayDate(){return this.publishDate&&this.publishDate.time&&new Date(this.publishDate.time)},isHiddenSpace(){return!this.spaceMember&&this.hiddenSpace},showArticleImage(){return this.selectedOption&&this.selectedOption.showArticleImage},showArticleAuthor(){return this.selectedOption&&this.selectedOption.showArticleAuthor},showArticleSpace(){return this.selectedOption&&this.selectedOption.showArticleSpace},showArticleDate(){return this.selectedOption&&this.selectedOption.showArticleDate},showArticleReactions(){return this.selectedOption&&this.selectedOption.showArticleReactions}}},x,[],!1,null,null,null).exports;var N=function(){var e=this,t=e._self._c;return t("v-app",{staticClass:"newsEmptyTemplate border-box-sizing",attrs:{flat:""}},[t("v-main",{staticClass:"white"},[t("v-flex",{staticClass:"news-empty-header d-flex mx-3 my-2"},[t("v-spacer"),e._v(" "),t("div",{staticClass:"d-flex flex-row newsSettingButton justify-end"},[e.canPublishNews?t("v-btn",{attrs:{icon:""},on:{click:e.openDrawer}},[t("v-icon",[e._v("mdi-cog")])],1):e._e()],1)],1),e._v(" "),t("v-flex",{staticClass:"d-flex news-empty-template noNews"},[t("div",{staticClass:"ma-auto py-5 d-flex flex-column align-center noNewsContent"},[t("i",{staticClass:"uiNoNewsIcon"}),e._v(" "),t("span",{staticClass:"title mt-5"},[e._v("\n          "+e._s(e.$t("news.latest.noNews"))+"\n        ")])])])],1)],1)};N._withStripped=!0;const D={data:()=>({canPublishNews:!1}),created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e}))},methods:{openDrawer(){this.$root.$emit("news-settings-drawer-open")}}},L=o(D,N,[],!1,null,null,null).exports;var I=function(){var e=this,t=e._self._c;return t("a",{staticClass:"articleLink",attrs:{target:"_self",href:e.item.url}},[e.showImage?t("div",{staticClass:"articleImage"},[t("img",{attrs:{src:e.articleImg,alt:e.$t("news.latest.alt.articleImage")}})]):e._e(),e._v(" "),t("div",{staticClass:"articleInfos"},[!e.isHiddenSpace&&e.showArticleSpace?t("div",{staticClass:"articleSpace"},[t("img",{staticClass:"spaceImage",attrs:{src:e.item.spaceAvatarUrl,alt:e.$t("news.latest.alt.spaceImage")}}),e._v(" "),t("span",{staticClass:"spaceName"},[e._v(e._s(e.item.spaceDisplayName))])]):e._e(),e._v(" "),e.showArticleTitle?t("span",{staticClass:"articleTitle text-color text-body-1"},[e._v(e._s(e.item.title))]):e._e(),e._v(" "),t("div",{staticClass:"articlePostTitle"},[t("div",{staticClass:"reactions"},[e.showArticleDate?t("v-icon",{staticClass:"reactionIconStyle me-1",attrs:{size:"12"}},[e._v("mdi-clock")]):e._e(),e._v(" "),e.showArticleDate?t("div",{staticClass:"postDate flex-column me-2 my-auto"},[t("date-format",{attrs:{value:e.displayDate,format:e.dateFormat}})],1):e._e(),e._v(" "),e.showArticleReactions?t("div",{staticClass:"d-flex"},[t("v-icon",{staticClass:"reactionIconStyle me-1",attrs:{size:"12"}},[e._v("\n            mdi-thumb-up\n          ")]),e._v(" "),t("div",{staticClass:"likesCount me-2"},[e._v(e._s(e.item.likesCount))]),e._v(" "),t("v-icon",{staticClass:"reactionIconStyle commentStyle me-1",attrs:{size:"12"}},[e._v("\n            mdi-comment\n          ")]),e._v(" "),t("div",{staticClass:"commentsCount me-2"},[e._v(e._s(e.item.commentsCount))]),e._v(" "),t("v-icon",{staticClass:"reactionIconStyle me-1",attrs:{size:"12"}},[e._v("\n            mdi-eye\n          ")]),e._v(" "),t("div",{staticClass:"viewCount"},[e._v(e._s(e.item.viewsCount))])],1):e._e()],1)])])])};I._withStripped=!0;const k=o({props:{news:{type:Object,required:!1,default:null},item:{type:Object,required:!1,default:null},selectedOption:{type:Object,required:!1,default:null},index:{type:Number,required:!1,default:null}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric"},showArticleTitle:!0,showArticleSummary:!1,showArticleImage:!0,showArticleAuthor:!1,showArticleSpace:!0,showArticleDate:!0,showArticleReactions:!0}),computed:{articleImg(){return this.showImage&&this.img},showImage(){return this.showArticleImage||!this.showArticleImage&&!this.index},img(){return this.illustrationURL()||"/news/images/news.png"},displayDate(){return this.item.publishDate&&this.item.publishDate.time&&new Date(this.item.publishDate.time)},isHiddenSpace(){return this.item&&!this.item.spaceMember&&this.item.hiddenSpace}},created(){this.reset()},methods:{reset(){this.viewTemplate=this.$root.viewTemplate,this.viewExtensions=this.$root.viewExtensions,this.newsTarget=this.$root.newsTarget,this.newsHeader=this.$root.header,this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl},illustrationURL(){return this.news.length>1?0===this.index?this.item.illustrationURL?.concat("&size=700x344").toString():this.item.illustrationURL?.concat("&size=107x107").toString():this.item.illustrationURL?.concat("&size=1410x344").toString()}}},I,[],!1,null,null,null).exports;var R=function(){var e=this,t=e._self._c;return t("v-list",{staticClass:"newsAdvancedSettings",attrs:{subheader:"","two-line":""}},[t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.maxArticle"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.limit,expression:"limit"}],staticClass:"maxArticle input-block-level ignore-vuetify-classes",attrs:{type:"number",id:"maxArticle",name:"maxArticle"},domProps:{value:e.limit},on:{change:function(t){return e.$emit("limit-value",e.limit)},input:function(t){t.target.composing||(e.limit=t.target.value)}}})])],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showListHeader"))+"\n      ")]),e._v(" "),t("v-list-item-subtitle",{staticClass:"advancedSettingsLabel"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.displayTextHeader"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"displaySeeAllButton my-auto",attrs:{dense:"",disabled:e.displaySliderButton||e.displayMosaicButtons||e.displayStoriesButtons},on:{change:function(t){return e.selectedOption("showHeader",e.showHeader)}},model:{value:e.showHeader,callback:function(t){e.showHeader=t},expression:"showHeader"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showSeeAll"))+"\n      ")]),e._v(" "),t("v-list-item-subtitle",{staticClass:"advancedSettingsLabel"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.displaySeeAll"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"displayHeaderTitle my-auto",attrs:{dense:"",disabled:e.displaySliderButton||e.displayAlertsButtons},on:{change:function(t){return e.selectedOption("showSeeAll",e.showSeeAll)}},model:{value:e.showSeeAll,callback:function(t){e.showSeeAll=t},expression:"showSeeAll"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.seeAllButton"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.seeAllUrl,expression:"seeAllUrl"}],staticClass:"seeLink input-block-level ignore-vuetify-classes",attrs:{disabled:e.disableSeeAllLink,type:"url",id:"seeLink",name:"seeLink",required:""},domProps:{value:e.seeAllUrl},on:{keyup:function(t){return e.$emit("see-all-url",e.seeAllUrl)},change:function(t){return e.$emit("see-all-url",e.seeAllUrl)},input:function(t){t.target.composing||(e.seeAllUrl=t.target.value)}}})])],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleTitle"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{dense:""},on:{change:function(t){return e.selectedOption("showArticleTitle",e.showArticleTitle)}},model:{value:e.showArticleTitle,callback:function(t){e.showArticleTitle=t},expression:"showArticleTitle"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleSummary"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{dense:"",disabled:e.displayLatestButton||e.displayAlertsButtons||e.displayMosaicButtons||e.displayStoriesButtons},on:{change:function(t){return e.selectedOption("showArticleSummary",e.showArticleSummary)}},model:{value:e.showArticleSummary,callback:function(t){e.showArticleSummary=t},expression:"showArticleSummary"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleImage"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{disabled:e.displayAlertsButtons,dense:""},on:{change:function(t){return e.selectedOption("showArticleImage",e.showArticleImage)}},model:{value:e.showArticleImage,callback:function(t){e.showArticleImage=t},expression:"showArticleImage"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleAuthor"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{dense:"",disabled:e.displayLatestButton||e.displayAlertsButtons},on:{change:function(t){return e.selectedOption("showArticleAuthor",e.showArticleAuthor)}},model:{value:e.showArticleAuthor,callback:function(t){e.showArticleAuthor=t},expression:"showArticleAuthor"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleDate"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{dense:""},on:{change:function(t){return e.selectedOption("showArticleDate",e.showArticleDate)}},model:{value:e.showArticleDate,callback:function(t){e.showArticleDate=t},expression:"showArticleDate"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleSpace"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{dense:"",disabled:e.displayStoriesButtons},on:{change:function(t){return e.selectedOption("showArticleSpace",e.showArticleSpace)}},model:{value:e.showArticleSpace,callback:function(t){e.showArticleSpace=t},expression:"showArticleSpace"}})],1)],1),e._v(" "),t("v-list-item",[t("v-list-item-content",[t("v-list-item-title",{staticClass:"advancedSettingsLabel font-weight-regular"},[e._v("\n        "+e._s(e.$t("news.list.settings.drawer.advancedSettings.showArticleReactionsCounter"))+"\n      ")])],1),e._v(" "),t("v-list-item-action",[t("v-switch",{staticClass:"my-auto",attrs:{disabled:e.displayAlertsButtons,dense:""},on:{change:function(t){return e.selectedOption("showArticleReactions",e.showArticleReactions)}},model:{value:e.showArticleReactions,callback:function(t){e.showArticleReactions=t},expression:"showArticleReactions"}})],1)],1)],1)};R._withStripped=!0;const U=o({props:{showArticleSummary:{type:Boolean,default:!1},showArticleAuthor:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!1},showSeeAll:{type:Boolean,default:!1},viewTemplate:{type:String,default:""},seeAllUrl:{type:String,default:""}},data:()=>({showArticleTitle:!1,showArticleImage:!1,showArticleSpace:!1,showArticleDate:!1,showArticleReactions:!1,limit:null}),computed:{displaySliderButton(){return"NewsSlider"===this.viewTemplate},disableSeeAllLink(){return"NewsSlider"===this.viewTemplate||"NewsAlert"===this.viewTemplate||"NewsLatest"===this.viewTemplate&&!this.showSeeAll},displayLatestButton(){return"NewsLatest"===this.viewTemplate},displayAlertsButtons(){return"NewsAlert"===this.viewTemplate},displayMosaicButtons(){return"NewsMosaic"===this.viewTemplate},displayStoriesButtons(){return"NewsStories"===this.viewTemplate}},created(){this.reset()},methods:{selectedOption(e,t){this.$emit("selected-option",e,t)},reset(){this.viewExtensions=this.$root.viewExtensions,this.newsTarget=this.$root.newsTarget,this.newsHeader=this.$root.header,this.limit=this.$root.limit,this.showHeader="NewsSlider"!==this.viewTemplate&&"NewsMosaic"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate&&this.$root.showHeader,this.showSeeAll="NewsSlider"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage="NewsAlert"!==this.viewTemplate&&this.$root.showArticleImage,this.showArticleSummary="NewsLatest"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&"NewsMosaic"!==this.viewTemplate&&"NewsStories"!==this.viewTemplate&&this.$root.showArticleSummary,this.showArticleAuthor="NewsLatest"!==this.viewTemplate&&"NewsAlert"!==this.viewTemplate&&this.$root.showArticleAuthor,this.showArticleSpace="NewsStories"!==this.viewTemplate&&this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions="NewsAlert"!==this.viewTemplate&&this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl||`${eXo.env.portal.context}/${eXo.env.portal.portalName}/news?filter=pinned`}}},R,[],!1,null,null,null).exports;var O=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:!e.emptyTemplate,expression:"!emptyTemplate"}],attrs:{id:"critical-alerts-slider"}},[t("div",{staticClass:"alerts-header"},[t("div",{staticClass:"alerts-icon"},[t("v-icon",[e._v("warning")])],1),e._v(" "),e.showHeader?t("span",{staticClass:"d-none d-md-block"},[e._v(e._s(e.newsHeader))]):e._e()]),e._v(" "),t("div",{staticClass:"alerts-viewer ps-5 flex-grow-1"},[t("v-carousel",{attrs:{"hide-delimiters":"",cycle:"","show-arrows":!1,interval:"10000",height:"20"},model:{value:e.slider,callback:function(t){e.slider=t},expression:"slider"}},e._l(e.news,(function(s,i){return t("v-carousel-item",{key:i},[t("a",{staticClass:"article-link flex-grow-1",attrs:{href:s.url}},[t("div",{staticClass:"alerts-article"},[e.showArticleDate?t("span",{staticClass:"alerts-article-date"},[t("date-format",{attrs:{value:new Date(s.publishDate.time),format:e.dateFormat}})],1):e._e(),e._v(" "),e.showArticleDate&&e.showArticleTitle?t("span",{staticClass:"alerts-article-seperator"},[e._v("|")]):e._e(),e._v(" "),e.showArticleTitle?t("span",{staticClass:"alerts-article-title"},[e._v(e._s(s.title))]):e._e()])])])})),1)],1),e._v(" "),t("div",{staticClass:"slider-buttons d-flex pe-2"},[t("v-btn",{attrs:{icon:""},on:{click:function(t){e.slider--}}},[t("v-icon",[e._v("chevron_left")])],1),e._v(" "),t("v-btn",{attrs:{icon:""},on:{click:function(t){e.slider++}}},[t("v-icon",[e._v("chevron_right")])],1),e._v(" "),e.canPublishNews?t("v-btn",{attrs:{icon:""},on:{click:e.openDrawer}},[t("v-icon",[e._v("mdi-cog")])],1):e._e()],1)])};O._withStripped=!0;const H={props:{newsTarget:{type:String,required:!1,default:null}},data:()=>({containerNewsAlertView:[],slider:0,news:[],initialized:!1,limit:4,offset:0,showHeader:!0,showSeeAll:!1,showArticleTitle:!0,showArticleSummary:!1,showArticleImage:!1,showArticleAuthor:!1,showArticleSpace:!0,showArticleDate:!0,showArticleReactions:!1,seeAllUrl:"",newsHeader:"",selectedOption:null,dateFormat:{year:"numeric",month:"long",day:"numeric"},canPublishNews:!1}),computed:{emptyTemplate(){return!(this.news&&this.news.length)}},created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.reset(),this.$root.$on("saved-news-settings",this.refreshNewsViews),this.getNewsList()},methods:{disabledContainerNewsAlertView(e,t){e.querySelector("#critical-alerts-slider")&&(this.containerNewsAlertView[t].style.display="none")},openDrawer(){this.$root.$emit("news-settings-drawer-open")},getNewsList(){this.initialized||this.$newsListService.getNewsList(this.newsTarget,this.offset,this.limit,!0).then((e=>{this.news=e.news.filter((e=>!!e)),this.initialized=!0})).finally((()=>{this.emptyTemplate&&(this.containerNewsAlertView=document.getElementsByClassName("UIWindow DefaultTheme UIDragObject UIResizeObject"),this.containerNewsAlertView.forEach(((e,t)=>this.disabledContainerNewsAlertView(e,t)))),this.initialized=!1}))},refreshNewsViews(e,t){this.showArticleTitle=t.showArticleTitle,this.showArticleDate=t.showArticleDate,this.showHeader=t.showHeader,this.selectedOption=t,this.newsHeader=t.header,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.newsHeader=this.$root.header,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}}}},E=o(H,O,[],!1,null,null,null).exports;var z=function(){var e=this,t=e._self._c;return t("div",{ref:"articleListView",staticClass:"py-0",attrs:{id:"article-list-view"}},[t("v-row",e._l(e.newsInfo,(function(s,i){return t("v-col",{key:s,staticClass:"flex-grow-0",attrs:{cols:e.numberOfColumns}},[t("div",{attrs:{id:`article-item-${i}`}},[t("news-list-template-view-item",{key:i,attrs:{item:s,"selected-option":e.selectedOption}})],1)])})),1)],1)};z._withStripped=!0;const V={props:{newsTarget:{type:Object,required:!1,default:null}},data:()=>({initialized:!1,newsInfo:null,limit:4,offset:0,space:null,seeAllUrl:"",selectedOption:null,showHeader:!0,showSeeAll:!0,showArticleTitle:!0,showArticleSummary:!0,showArticleImage:!0,showArticleAuthor:!0,showArticleSpace:!0,showArticleDate:!0,showArticleReactions:!0,canPublishNews:!1,parentWidth:0}),computed:{numberOfColumns(){const e=this.$vuetify.breakpoint?.thresholds;return this.parentWidth<e.xs?12:this.parentWidth<e.sm?6:this.parentWidth<e.lg?4:3}},created(){this.$newsServices.canPublishNews().then((e=>{this.canPublishNews=e})),this.reset(),this.$root.$on("saved-news-settings",this.refreshNewsViews),this.getNewsList()},mounted(){this.parentWidth=this.$refs.articleListView.offsetWidth,window.addEventListener("resize",(()=>{this.parentWidth=this.$refs.articleListView.offsetWidth})),this.$nextTick().then((()=>this.$root.$emit("application-loaded")))},methods:{getNewsList(){this.initialized||this.$newsListService.getNewsList(this.newsTarget,this.offset,this.limit,!0).then((e=>{this.newsInfo=e.news.filter((e=>!!e)),this.initialized=!0})).finally((()=>this.initialized=!1))},refreshNewsViews(e,t){this.showArticleSummary=t.showArticleSummary,this.showArticleTitle=t.showArticleTitle,this.showArticleImage=t.showArticleImage,this.selectedOption=t,this.newsHeader=t.header,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.newsHeader=this.$root.header,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}}}},j=o(V,z,[],!1,null,null,null).exports;var P=function(){var e=this,t=e._self._c;return t("a",{staticClass:"article-item-link",attrs:{target:"_self",href:e.item.url}},[e.showArticleImage?t("div",{staticClass:"article-item-image"},[t("img",{attrs:{src:e.articleImage,alt:e.$t("news.latest.alt.articleImage")}})]):e._e(),e._v(" "),t("div",{staticClass:"article-item-content"},[e.showArticleTitle?t("span",{staticClass:"text-color text-body-2",class:e.extraClass},[e._v(e._s(e.item.title))]):e._e(),e._v(" "),e.showArticleSummary?t("span",{staticClass:"text-color text-body-2",class:e.extraClass},[e._v(e._s(e.item.summary))]):e._e(),e._v(" "),t("div",{staticClass:"d-flex"},[e.showArticleAuthor?t("span",{staticClass:"article-preTitle"},[e._v(e._s(e.item.authorDisplayName))]):e._e(),e._v(" "),e.showArticleSpace&&e.showArticleAuthor?t("v-icon",{staticClass:"mx-1",attrs:{small:""}},[e._v("\n        mdi-chevron-right\n      ")]):e._e(),e._v(" "),e.showArticleSpace?t("span",{staticClass:"article-preTitle"},[e._v(e._s(e.item.spaceDisplayName))]):e._e()],1),e._v(" "),t("div",{staticClass:"article-postTitle"},[t("span",{staticClass:"article-date me-2"},[e.showArticleDate?t("div",{staticClass:"flex-column"},[t("date-format",{attrs:{value:e.displayDate,format:e.dateFormat}})],1):e._e()]),e._v(" "),e.showArticleReactions?t("div",{staticClass:"reactions"},[t("v-icon",{staticClass:"reactions-icon-style me-1",attrs:{size:"12"}},[e._v("\n          mdi-thumb-up\n        ")]),e._v(" "),t("div",{staticClass:"likes-count me-2"},[e._v(e._s(e.item.likesCount))]),e._v(" "),t("v-icon",{staticClass:"reactions-icon-style me-1",attrs:{size:"12"}},[e._v("\n          mdi-comment\n        ")]),e._v(" "),t("div",{staticClass:"comments-count me-2"},[e._v(e._s(e.item.commentsCount))]),e._v(" "),t("v-icon",{staticClass:"reactions-icon-style me-1",attrs:{size:"12"}},[e._v("\n          mdi-eye\n        ")]),e._v(" "),t("div",{staticClass:"viewCount"},[e._v(e._s(e.item.viewsCount))])],1):e._e()])])])};P._withStripped=!0;const B=o({props:{item:{type:Object,required:!1,default:null},selectedOption:{type:Object,required:!1,default:null}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric"}}),computed:{displayDate(){return this.item?.publishDate?.time&&new Date(this.item.publishDate.time)},showArticleImage(){return this.selectedOption?.showArticleImage},showArticleAuthor(){return this.selectedOption?.showArticleAuthor},showArticleSpace(){return this.selectedOption?.showArticleSpace},showArticleDate(){return this.selectedOption?.showArticleDate},showArticleTitle(){return this.selectedOption?.showArticleTitle},showArticleSummary(){return this.selectedOption?.showArticleSummary},showArticleReactions(){return this.selectedOption?.showArticleReactions},articleImage(){return this.item?.illustrationURL?.concat("&size=70x70").toString()||"/news/images/news.png"},extraClass(){return this.showArticleSummary&&this.showArticleTitle?"article-title":"text-truncate-2"}}},P,[],!1,null,null,null).exports;var X=function(){var e=this,t=e._self._c;return t("div",{ref:"top-news-mosaic",attrs:{id:"top-news-mosaic"}},[e.isSmallBreakpoint?e._e():t("news-settings",{staticClass:"mt-3 mr-1",class:e.isMobile?"":"settingNewsContainer"}),e._v(" "),t("div",{class:`mosaic-container ${e.smallHeightClass}`},e._l(e.news,(function(s,i){return t("div",{key:i,class:e.isSmallWidth?"articleSmallWidth":"article",attrs:{id:`articleItem-${i}`}},[t("a",{staticClass:"articleLink d-block",attrs:{target:"_self",href:s.url}},[t("img",{attrs:{src:e.showArticleImage&&null!==s.illustrationURL?e.illustrationURL(s,i):"/news/images/news.png",alt:e.$t("news.latest.alt.articleImage")}}),e._v(" "),t("div",{staticClass:"titleArea"},[e.showArticleDate?t("div",{staticClass:"articleDate"},[t("date-format",{attrs:{value:new Date(s.publishDate.time),format:e.dateFormat}})],1):e._e(),e._v(" "),e.showArticleTitle?t("div",{class:e.styleArticleTitle()},[e._v("\n            "+e._s(s.title)+"\n          ")]):e._e()])])])})),0)],1)};X._withStripped=!0;const M=o({props:{newsTarget:{type:String,required:!1,default:null}},data:()=>({news:[],initialized:!1,limit:4,offset:0,showHeader:!1,showSeeAll:!0,showArticleTitle:!0,showArticleSummary:!1,showArticleImage:!0,showArticleAuthor:!0,showArticleSpace:!0,showArticleDate:!0,showArticleReactions:!0,seeAllUrl:"",newsHeader:"",selectedOption:null,dateFormat:{year:"numeric",month:"long",day:"numeric"},isSmallWidth:!1}),created(){this.reset(),this.$root.$on("saved-news-settings",this.refreshNewsViews),this.getNewsList()},mounted(){this.isSmallWidth=this.$refs&&this.$refs["top-news-mosaic"]&&100*this.$refs["top-news-mosaic"]?.clientWidth/window.screen.width<33},computed:{isMobile(){return"xs"===this.$vuetify.breakpoint.name||"sm"===this.$vuetify.breakpoint.name},isSmallBreakpoint(){return this.$vuetify.breakpoint.width<651},smallHeightClass(){return this.isMobile&&this.news&&1===this.news.length&&"small-mosaic-container"}},methods:{getNewsList(){this.initialized||this.$newsListService.getNewsList(this.newsTarget,this.offset,this.limit,!0).then((e=>{this.news=e.news.filter((e=>!!e)),this.initialized=!0})).finally((()=>this.initialized=!1))},minLength:e=>e<5&&e>0?100/e:25,refreshNewsViews(e,t){this.showArticleTitle=t.showArticleTitle,this.showArticleDate=t.showArticleDate,this.showHeader=t.showHeader,this.selectedOption=t,this.newsHeader=t.header,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.newsHeader=this.$root.header,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}},styleArticleTitle(){return(this.isSmallWidth?"articleTitle ":"").concat(this.isSmallBreakpoint?"text-truncate":"articleTitleTruncate")},illustrationURL(e,t){return this.news.length>1?0===t?e.illustrationURL.concat("&size=712x404").toString():e.illustrationURL.concat("&size=712x201").toString():e.illustrationURL.concat("&size=1426x404").toString()}}},X,[],!1,null,null,null).exports;var F=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"top-news-stories"}},[e.news.length?t("card-carousel",[e._l(e.news,(function(s,i){return t("news-stories-view-item",{key:i,attrs:{item:s,"selected-option":e.selectedOption}})})),e._v(" "),t("a",{staticClass:"see-all-link",attrs:{target:"_self",href:e.seeAllArticles}},[t("div",{staticClass:"card",attrs:{id:"see-all"}},[t("div",{staticClass:"see-all-icon"},[t("svg",{staticStyle:{"enable-background":"new 0 0 330 330"},attrs:{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1",id:"Layer_1",x:"0px",y:"0px",viewBox:"0 0 330 330","xml:space":"preserve"}},[t("path",{attrs:{d:"M165,0C74.019,0,0,74.019,0,165s74.019,165,165,165s165-74.019,165-165S255.981,0,165,0z M85,190  c-13.785,0-25-11.215-25-25s11.215-25,25-25s25,11.215,25,25S98.785,190,85,190z M165,190c-13.785,0-25-11.215-25-25  s11.215-25,25-25s25,11.215,25,25S178.785,190,165,190z M245,190c-13.785,0-25-11.215-25-25s11.215-25,25-25  c13.785,0,25,11.215,25,25S258.785,190,245,190z"}})])]),e._v(" "),t("div",{staticClass:"see-all-text"},[e._v(" "+e._s(e.$t("news.published.seeAll"))+" ")])])])],2):e._e()],1)};F._withStripped=!0;const q=o({props:{newsTarget:{type:String,required:!1,default:null}},data:()=>({news:[],initialized:!1,limit:10,offset:0,showHeader:!1,showSeeAll:!1,showArticleTitle:!0,showArticleSummary:!1,showArticleImage:!0,showArticleAuthor:!0,showArticleSpace:!1,showArticleDate:!0,showArticleReactions:!0,seeAllUrl:"",selectedOption:null}),created(){this.reset(),this.$root.$on("saved-news-settings",this.refreshNewsViews),this.getNewsList()},computed:{seeAllArticles(){return this.seeAllUrl&&`${eXo.env.portal.context}/${eXo.env.portal.portalName}${this.seeAllUrl}`}},methods:{getNewsList(){this.initialized||this.$newsListService.getNewsList(this.newsTarget,this.offset,this.limit,!0).then((e=>{this.news=e.news.filter((e=>!!e)),this.initialized=!0})).finally((()=>this.initialized=!1))},refreshNewsViews(e,t){this.showArticleSummary=t.showArticleSummary,this.showArticleTitle=t.showArticleTitle,this.showArticleImage=t.showArticleImage,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.selectedOption=t,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}}}},F,[],!1,null,null,null).exports;var W=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("news-settings"),e._v(" "),t("a",{staticClass:"articleLink",attrs:{target:"_self",href:e.item.url}},[t("img",{staticClass:"article-img",attrs:{src:e.articleImage,alt:e.$t("news.latest.alt.articleImage")}}),e._v(" "),t("div",{staticClass:"author-date-container"},[e.showArticleAuthor?t("img",{staticClass:"author-photo",attrs:{src:e.item.authorAvatarUrl,alt:"Author image"}}):e._e(),e._v(" "),e.showArticleDate?t("div",{staticClass:"author-date"},[t("date-format",{attrs:{value:e.displayDate,format:e.dateFormat}})],1):e._e()])]),e._v(" "),t("a",{staticClass:"articleLink",attrs:{target:"_self",href:e.item.url}},[t("div",{staticClass:"title-container"},[e.showArticleTitle?t("div",{staticClass:"article-title"},[e._v(e._s(e.item.title))]):e._e(),e._v(" "),e.showArticleReactions?t("div",{staticClass:"article-counters d-flex"},[t("div",{staticClass:"likes-container mb-1"},[t("v-icon",{staticClass:"counters-icons",attrs:{size:"14"}},[e._v("mdi-thumb-up")]),e._v(" "),t("span",{staticClass:"counterStyle ml-1"},[e._v(e._s(e.item.likesCount))])],1),e._v(" "),t("div",{staticClass:"comments-container ml-2"},[t("v-icon",{staticClass:"counters-icons mt-1",attrs:{size:"14"}},[e._v("\n            mdi-comment\n          ")]),e._v(" "),t("span",{staticClass:"counterStyle ml-1"},[e._v(e._s(e.item.commentsCount))])],1),e._v(" "),t("div",{staticClass:"views-container ml-2"},[t("v-icon",{staticClass:"counters-icons",attrs:{size:"16"}},[e._v("mdi-eye")]),e._v(" "),t("span",{staticClass:"counterStyle"},[e._v(e._s(e.item.viewsCount))])],1)]):e._e()])])],1)};W._withStripped=!0;const G=o({props:{item:{type:Object,required:!1,default:null},selectedOption:{type:Object,required:!1,default:null}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric"}}),computed:{displayDate(){return this.item.publishDate&&this.item.publishDate.time&&new Date(this.item.publishDate.time)},showArticleAuthor(){return this.selectedOption&&this.selectedOption.showArticleAuthor},showArticleDate(){return this.selectedOption&&this.selectedOption.showArticleDate},showArticleTitle(){return this.selectedOption&&this.selectedOption.showArticleTitle},showArticleReactions(){return this.selectedOption&&this.selectedOption.showArticleReactions},showArticleImage(){return this.selectedOption&&this.selectedOption.showArticleImage},articleImage(){return this.showArticleImage&&null!==this.item.illustrationURL?this.item.illustrationURL.concat("&size=140x210").toString():"/news/images/news.png"}}},W,[],!1,null,null,null).exports;var J=function(){var e=this,t=e._self._c;return t("div",{staticClass:"ma-3",attrs:{id:"cards-slider-large"}},[e.news.length?t("card-carousel",e._l(e.news,(function(s,i){return t("news-cards-view-item",{key:i,attrs:{item:s,"selected-option":e.selectedOption}})})),1):e._e()],1)};J._withStripped=!0;const Y=o({props:{newsTarget:{type:String,required:!1,default:null}},data:()=>({news:[],initialized:!1,limit:10,offset:0,showHeader:!0,showSeeAll:!0,showArticleTitle:!0,showArticleSummary:!0,showArticleImage:!0,showArticleAuthor:!0,showArticleSpace:!0,showArticleDate:!0,showArticleReactions:!0,seeAllUrl:"",selectedOption:null}),created(){this.reset(),this.$root.$on("saved-news-settings",this.refreshNewsViews),this.getNewsList()},methods:{getNewsList(){this.initialized||this.$newsListService.getNewsList(this.newsTarget,this.offset,this.limit,!0).then((e=>{this.news=e.news.filter((e=>!!e)),this.initialized=!0})).finally((()=>this.initialized=!1))},refreshNewsViews(e,t){this.showArticleSummary=t.showArticleSummary,this.showArticleTitle=t.showArticleTitle,this.showArticleImage=t.showArticleImage,this.seeAllUrl=t.seeAllUrl,this.limit=t.limit,this.selectedOption=t,this.newsTarget=e,this.getNewsList()},reset(){this.limit=this.$root.limit,this.showHeader=this.$root.showHeader,this.showSeeAll=this.$root.showSeeAll,this.showArticleTitle=this.$root.showArticleTitle,this.showArticleImage=this.$root.showArticleImage,this.showArticleSummary=this.$root.showArticleSummary,this.showArticleAuthor=this.$root.showArticleAuthor,this.showArticleSpace=this.$root.showArticleSpace,this.showArticleDate=this.$root.showArticleDate,this.showArticleReactions=this.$root.showArticleReactions,this.seeAllUrl=this.$root.seeAllUrl,this.selectedOption={limit:this.limit,showHeader:this.showHeader,showSeeAll:this.showSeeAll,showArticleTitle:this.showArticleTitle,showArticleSummary:this.showArticleSummary,showArticleAuthor:this.showArticleAuthor,showArticleSpace:this.showArticleSpace,showArticleDate:this.showArticleDate,showArticleReactions:this.showArticleReactions,showArticleImage:this.showArticleImage,seeAllUrl:this.seeAllUrl}}}},J,[],!1,null,null,null).exports;var Z=function(){var e=this,t=e._self._c;return t("div",{staticClass:"card"},[t("a",{staticClass:"articleLink",attrs:{target:"_self",href:e.item.url}},[t("div",{staticClass:"imgContainer"},[t("img",{staticClass:"article-illustration-img",attrs:{src:e.articleImage,alt:e.$t("news.latest.alt.articleImage")}})])]),e._v(" "),t("div",{staticClass:"text-area"},[t("div",{staticClass:"upper-row"},[!e.isHiddenSpace&&e.showArticleSpace?t("a",{staticClass:"space-link",attrs:{id:"space-link",target:"_self",href:e.item.spaceUrl}},[t("div",{staticClass:"article-space"},[t("img",{staticClass:"space-icon",attrs:{src:e.item.spaceAvatarUrl,alt:"Space icon"}}),e._v(" "),t("div",{staticClass:"space-name"},[e._v(e._s(e.item.spaceDisplayName))])])]):e._e(),e._v(" "),t("a",{staticClass:"articleLink",attrs:{target:"_self",href:e.item.url}},[e.showArticleTitle?t("div",{staticClass:"article-title"},[e._v(e._s(e.item.title))]):e._e(),e._v(" "),t("div",{staticClass:"article-author-date"},[e.showArticleAuthor?t("div",{staticClass:"author-name"},[e._v(e._s(e.item.authorDisplayName))]):e._e(),e._v(" "),e.showArticleAuthor&&e.showArticleDate?t("span",[e._v(",")]):e._e(),e._v(" "),e.showArticleDate?t("div",{staticClass:"date"},[t("date-format",{attrs:{value:e.displayDate,format:e.dateFormat}})],1):e._e()]),e._v(" "),e.showArticleSummary?t("div",{staticClass:"article-summary"},[e._v(" "+e._s(e.item.summary)+" ")]):e._e(),e._v(" "),t("div",{staticClass:"read-more"},[e._v(e._s(e.$t("news.cards.readMore")))])])]),e._v(" "),e.showArticleReactions?t("div",{staticClass:"bottom-row"},[t("div",{staticClass:"article-counters"},[t("a",{staticClass:"reactionsLink",attrs:{target:"_self",href:e.activityReactionsLink}},[t("div",{staticClass:"reactions"},[t("v-icon",{staticClass:"counters-icons",attrs:{size:"14"}},[e._v("mdi-thumb-up")]),e._v(" "),t("div",{staticClass:"likes-count"},[e._v(e._s(e.item.likesCount))]),e._v(" "),t("v-icon",{staticClass:"counters-icons mt-1 ml-2",attrs:{size:"14"}},[e._v("\n              mdi-comment\n            ")]),e._v(" "),t("div",{staticClass:"comments-count"},[e._v(e._s(e.item.commentsCount))])],1)]),e._v(" "),t("a",{staticClass:"articleLink",attrs:{target:"_self",href:e.activityReactionsLink}},[t("div",{staticClass:"views"},[t("v-icon",{staticClass:"counters-icons",attrs:{size:"16"}},[e._v("mdi-eye")]),e._v(" "),t("div",{staticClass:"views-count"},[e._v(e._s(e.item.viewsCount))])],1)])])]):e._e()])])};Z._withStripped=!0;const K={"news-list-view":n,"news-latest-view":w,"news-slider-view":u,"news-settings":A,"news-settings-drawer":S,"news-empty-latest-view":y,"news-empty-slider-view":C,"news-slider-view-item":b,"news-empty-template":L,"news-latest-view-item":k,"news-advanced-settings":U,"news-alert-view":E,"news-list-template-view":j,"news-list-template-view-item":B,"news-mosaic-view":M,"news-stories-view":q,"news-stories-view-item":G,"news-cards-view":Y,"news-cards-view-item":o({props:{item:{type:Object,required:!1,default:null},selectedOption:{type:Object,required:!1,default:null}},data:()=>({dateFormat:{year:"numeric",month:"long",day:"numeric"}}),computed:{displayDate(){return this.item.publishDate&&this.item.publishDate.time&&new Date(this.item.publishDate.time)},showArticleAuthor(){return this.selectedOption&&this.selectedOption.showArticleAuthor},showArticleDate(){return this.selectedOption&&this.selectedOption.showArticleDate},showArticleTitle(){return this.selectedOption&&this.selectedOption.showArticleTitle},showArticleReactions(){return this.selectedOption&&this.selectedOption.showArticleReactions},showArticleImage(){return this.selectedOption&&this.selectedOption.showArticleImage},showArticleSummary(){return this.selectedOption&&this.selectedOption.showArticleSummary},showArticleSpace(){return this.selectedOption&&this.selectedOption.showArticleSpace},articleImage(){return this.showArticleImage&&this.item&&this.item.illustrationURL&&this.item.illustrationURL.concat("&size=235x140").toString()||"/news/images/news.png"},isHiddenSpace(){return this.item&&!this.item.spaceMember&&this.item.hiddenSpace},activityReactionsLink(){return this.item&&`${this.item.url}#activityReactions`}}},Z,[],!1,null,null,null).exports};for(const e in K)Vue.component(e,K[e]);s(826),eXo.env.portal.context,eXo.env.portal.portalName,eXo.env.portal.containerName,eXo.env.portal.rest;const Q=`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news`,ee=(eXo.env.portal.context,eXo.env.portal.rest,`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/social/spaces`),te=`${eXo.env.portal.context}/${eXo.env.portal.rest}${eXo.env.portal.context}/social/spaces/suggest.json`,se=`${eXo.env.portal.context}/${eXo.env.portal.rest}/space/user/searchSpace/`,ie=(eXo.env.portal.spaceId,window.location.host,eXo.env.portal.context,eXo.env.portal.userName);function le(e,t,s,i){return fetch(`${Q}/byTarget/${e}?offset=${t}&limit=${s}&returnSize=${i}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error getting news list by target name")}))}function re(e,t){const s=new FormData;return t&&Object.keys(t).forEach((e=>{s.append(e,t[e])})),fetch(e,{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams(s).toString()}).then((e=>{if(!e||!e.ok)throw new Error("Response code indicates a server error",e)}))}function ae(e,t){return fetch(`${Q}/${e}?editMode=${t||""}`,{credentials:"include",method:"GET"}).then((e=>e&&e.ok?e.json():401===e.status?e.status:void 0)).then((e=>e)).catch((e=>e))}function oe(e){return fetch(`${Q}/byActivity/${e}`,{credentials:"include",method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Response code indicates a server error",e)}))}function ne(e){return fetch(`${Q}/${e}?fields=spaces`,{credentials:"include",method:"GET"}).then((e=>e.json())).then((e=>e))}function he(e){return fetch(`${Q}/markAsRead/${e}`,{credentials:"include",method:"POST"}).then((e=>{if(e&&e.ok)return e.text();throw new Error("Error while marking news as read")}))}function ce(e,t,s,i,l,r){let a=`${Q}?author=${ie}&publicationState=published&filter=${e}`;return s&&(a+=`&text=${s}`),t&&(a+=`&spaces=${t}`),isNaN(i)||(a+=`&offset=${i}`),isNaN(l)||(a+=`&limit=${l}`),r&&(a+=`&returnSize=${r}`),fetch(a,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>{if(e&&e.ok)return e.json();throw new Error("Error getting news list")}))}function we(e){return fetch(`${Q}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"POST",body:JSON.stringify(e)}).then((e=>e.json()))}function de(e){return fetch(`${Q}/schedule`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PATCH",body:JSON.stringify(e)}).then((e=>e.json()))}function me(e){return fetch(e,{headers:{"Content-Type":"blob"},credentials:"include",method:"GET"})}function ue(e,t){return fetch(`${Q}/${e.id}?post=${t}`,{headers:{"Content-Type":"application/json"},credentials:"include",method:"PUT",body:JSON.stringify(e)}).then((e=>e.json()))}function pe(e){return fetch(`${Q}/${e}/click`,{credentials:"include",method:"POST",body:"edit"})}function ve(e){return fetch(`${te}?conditionToSearch=${e}&currentUser=${ie}&typeOfRelation=confirmed`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>e.options))}function Ae(e){return fetch(`${Q}/${e}`,{credentials:"include",method:"DELETE"})}function ge(e){return fetch(`${ee}/${e}`,{credentials:"include",method:"GET"}).then((t=>{if(t&&t.ok)return t.json();throw new Error(`Error getting space with id ${e}`)}))}function fe(e,t,s){return fetch(`${ee}?offset=${e}&limit=${t}&returnSize=true&filterType=${s}`,{credentials:"include",method:"GET"}).then((e=>e.json())).then((e=>e))}function Se(e){return fetch(`${se}?fields=id,url,displayName,avatarUrl&keyword=${e}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json()))}function _e(e,t,s){return fetch(`/portal/rest/managedocument/getFoldersAndFiles/?driveName=${e}&workspaceName=${t}&currentFolder=${s}`,{}).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>e))}function ye(){return fetch("/portal/rest/wcmDriver/getDrivers",{}).then((e=>e.text())).then((e=>(new window.DOMParser).parseFromString(e,"text/xml"))).then((e=>e))}function $e(e){const t=document.createElement("div");return t.innerText=e,t.innerHTML}function Te(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news/canCreateNews/${eXo.env.portal.spaceId||e}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e&&e.ok&&e.json()))}function Ce(e){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news/canScheduleNews/${eXo.env.portal.spaceId||e}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e&&e.ok&&e.json()))}function xe(e,t,s){return s>0&&localStorage.setItem("deletedNews",e),fetch(`${Q}/${e}?isDraft=${t||""}&delay=${s||0}`,{credentials:"include",method:"DELETE"}).then((e=>{if(e&&!e.ok)throw new Error("Error when deleting news")}))}function be(e){return fetch(`${Q}/${e}/undoDelete`,{method:"POST",credentials:"include"}).then((e=>{if(!e||!e.ok)throw new Error("Error when undoing deleting news");localStorage.removeItem("deletedNews")}))}function Ne(){return fetch(`${eXo.env.portal.context}/${eXo.env.portal.rest}/v1/news/canPublishNews?spaceId=${eXo.env.portal.spaceId}`,{headers:{"Content-Type":"application/json"},method:"GET"}).then((e=>e.json())).then((e=>e))}function De(){return fetch(`${Q}/targeting`,{credentials:"include",method:"GET"}).then((e=>{if(e&&e.ok)return e.json()}))}function Le(){return fetch(`${Q}/targeting/allowed`,{credentials:"include",method:"GET"}).then((e=>{if(e&&e.ok)return e.json()}))}function Ie(e,t){return t>0&&localStorage.setItem("deletedNewsTarget",e),fetch(`${Q}/targeting/${e}?delay=${t||0}`,{credentials:"include",method:"DELETE"}).then((e=>{if(e&&!e.ok)throw new Error("Error when deleting news target")}))}function ke(e){return fetch(`${Q}/targeting/${e}/undoDelete`,{method:"POST",credentials:"include"}).then((e=>{if(!e||!e.ok)throw new Error("Error when undoing deleting news target");localStorage.removeItem("deletedNewsTarget")}))}function Re(e){return fetch(`${Q}/targeting`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(e&&e.ok)return e.status;if(409===e.status)return e.status;throw new Error("Error when creating news target")}))}function Ue(e,t){return fetch(`${Q}/targeting/${t}`,{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(e&&e.ok)return e.status;throw new Error("Error when updating news target")}))}if(Vue.prototype.$newsTargetingService||window.Object.defineProperty(Vue.prototype,"$newsTargetingService",{value:l}),Vue.prototype.$newsServices||window.Object.defineProperty(Vue.prototype,"$newsServices",{value:t}),Vue.prototype.$newsListService||window.Object.defineProperty(Vue.prototype,"$newsListService",{value:e}),extensionRegistry){const e=extensionRegistry.loadComponents("NewsListView");e&&e.length>0&&e.forEach((e=>{Vue.component(e.componentName,e.componentOptions)}))}const Oe=eXo&&eXo.env&&eXo.env.portal.language||"en",He=`${eXo.env.portal.context}/${eXo.env.portal.rest}/i18n/bundle/locale.portlet.news.News-${Oe}.json`;function Ee(e){const t=e.appId,s=e.viewTemplate,i=e.saveSettingsURL,l=e.newsTarget,r=e.header,a=""===e.limit?"4":e.limit,o="NewsSlider"!==s&&"true"===e.showHeader,n="NewsSlider"!==s&&"true"===e.showSeeAll,h=""===e.showArticleTitle||"true"===e.showArticleTitle,c="NewsLatest"!==s&&"true"===e.showArticleSummary,w=""===e.showArticleImage||"true"===e.showArticleImage,d="NewsLatest"!==s&&"true"===e.showArticleAuthor,m=""===e.showArticleSpace||"true"===e.showArticleSpace,u=""===e.showArticleReactions||"true"===e.showArticleReactions,p=""===e.showArticleDate||"true"===e.showArticleDate,v=e.seeAllUrl;exoi18n.loadLanguageAsync(Oe,He).then((e=>{Vue.createApp({data:{saveSettingsURL:i,viewTemplate:s,newsTarget:l,header:r,limit:a,showHeader:o,showSeeAll:n,showArticleTitle:h,showArticleSummary:c,showArticleImage:w,showArticleAuthor:d,showArticleSpace:m,showArticleReactions:u,showArticleDate:p,seeAllUrl:v},template:`<news-list-view\n                  id="${t}"\n                  :view-template="viewTemplate"\n                  :news-target="newsTarget"\n                  :header="header"\n                  :show-article-author="showArticleAuthor"\n                  :show-article-image="showArticleImage"\n                  :show-article-reactions="showArticleReactions"\n                  :show-article-space="showArticleSpace"\n                  :show-article-title="showArticleTitle"\n                  :show-header="showHeader"\n                  :show-see-all="showSeeAll"\n                  :show-article-date="showArticleDate"\n                  :show-article-summary="showArticleSummary"\n                  :limit="limit"\n                  :see-all-url="seeAllUrl"/>`,vuetify:Vue.prototype.vuetifyOptions,i18n:e},`#${t}`,`News List View - ${s}`)}))}})(),i})()));